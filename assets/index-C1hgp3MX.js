(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var tP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hw={exports:{}},Dh={},dw={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),nP=Symbol.for("react.portal"),iP=Symbol.for("react.fragment"),rP=Symbol.for("react.strict_mode"),sP=Symbol.for("react.profiler"),oP=Symbol.for("react.provider"),aP=Symbol.for("react.context"),lP=Symbol.for("react.forward_ref"),uP=Symbol.for("react.suspense"),cP=Symbol.for("react.memo"),hP=Symbol.for("react.lazy"),u_=Symbol.iterator;function dP(t){return t===null||typeof t!="object"?null:(t=u_&&t[u_]||t["@@iterator"],typeof t=="function"?t:null)}var fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pw=Object.assign,mw={};function ma(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||fw}ma.prototype.isReactComponent={};ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gw(){}gw.prototype=ma.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||fw}var $p=qp.prototype=new gw;$p.constructor=qp;pw($p,ma.prototype);$p.isPureReactComponent=!0;var c_=Array.isArray,_w=Object.prototype.hasOwnProperty,Gp={current:null},yw={key:!0,ref:!0,__self:!0,__source:!0};function vw(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)_w.call(e,i)&&!yw.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:tu,type:t,key:o,ref:l,props:s,_owner:Gp.current}}function fP(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function pP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var h_=/\/+/g;function bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pP(""+t.key):e.toString(36)}function _c(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case tu:case nP:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+bd(l,0):i,c_(s)?(n="",t!=null&&(n=t.replace(h_,"$&/")+"/"),_c(s,e,n,"",function(m){return m})):s!=null&&(Zp(s)&&(s=fP(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(h_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",c_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+bd(o,h);l+=_c(o,e,n,d,s)}else if(d=dP(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+bd(o,h++),l+=_c(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Gu(t,e,n){if(t==null)return t;var i=[],s=0;return _c(t,i,"","",function(o){return e.call(n,o,s++)}),i}function mP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},yc={transition:null},gP={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:yc,ReactCurrentOwner:Gp};function ww(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!Zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=ma;Pe.Fragment=iP;Pe.Profiler=sP;Pe.PureComponent=qp;Pe.StrictMode=rP;Pe.Suspense=uP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP;Pe.act=ww;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pw({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Gp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)_w.call(e,d)&&!yw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:tu,type:t.type,key:s,ref:o,props:i,_owner:l}};Pe.createContext=function(t){return t={$$typeof:aP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oP,_context:t},t.Consumer=t};Pe.createElement=vw;Pe.createFactory=function(t){var e=vw.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:lP,render:t}};Pe.isValidElement=Zp;Pe.lazy=function(t){return{$$typeof:hP,_payload:{_status:-1,_result:t},_init:mP}};Pe.memo=function(t,e){return{$$typeof:cP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=yc.transition;yc.transition={};try{t()}finally{yc.transition=e}};Pe.unstable_act=ww;Pe.useCallback=function(t,e){return qt.current.useCallback(t,e)};Pe.useContext=function(t){return qt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return qt.current.useEffect(t,e)};Pe.useId=function(){return qt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return qt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Pe.useRef=function(t){return qt.current.useRef(t)};Pe.useState=function(t){return qt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return qt.current.useTransition()};Pe.version="18.3.1";dw.exports=Pe;var le=dw.exports;const Uc=cw(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P=le,yP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),wP=Object.prototype.hasOwnProperty,TP=_P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EP={key:!0,ref:!0,__self:!0,__source:!0};function Tw(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)wP.call(e,i)&&!EP.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:yP,type:t,key:o,ref:l,props:s,_owner:TP.current}}Dh.Fragment=vP;Dh.jsx=Tw;Dh.jsxs=Tw;hw.exports=Dh;var F=hw.exports,Sf={},Ew={exports:{}},gn={},Iw={exports:{}},Sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,oe){var J=W.length;W.push(oe);e:for(;0<J;){var ce=J-1>>>1,ve=W[ce];if(0<s(ve,oe))W[ce]=oe,W[J]=ve,J=ce;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],J=W.pop();if(J!==oe){W[0]=J;e:for(var ce=0,ve=W.length,He=ve>>>1;ce<He;){var Te=2*(ce+1)-1,Ee=W[Te],fe=Te+1,Je=W[fe];if(0>s(Ee,J))fe<ve&&0>s(Je,Ee)?(W[ce]=Je,W[fe]=J,ce=fe):(W[ce]=Ee,W[Te]=J,ce=Te);else if(fe<ve&&0>s(Je,J))W[ce]=Je,W[fe]=J,ce=fe;else break e}}return oe}function s(W,oe){var J=W.sortIndex-oe.sortIndex;return J!==0?J:W.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],y=1,w=null,T=3,D=!1,O=!1,U=!1,Z=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var oe=n(m);oe!==null;){if(oe.callback===null)i(m);else if(oe.startTime<=W)i(m),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=n(m)}}function q(W){if(U=!1,b(W),!O)if(n(d)!==null)O=!0,nt(Q);else{var oe=n(m);oe!==null&&Gt(q,oe.startTime-W)}}function Q(W,oe){O=!1,U&&(U=!1,N(S),S=-1),D=!0;var J=T;try{for(b(oe),w=n(d);w!==null&&(!(w.expirationTime>oe)||W&&!R());){var ce=w.callback;if(typeof ce=="function"){w.callback=null,T=w.priorityLevel;var ve=ce(w.expirationTime<=oe);oe=t.unstable_now(),typeof ve=="function"?w.callback=ve:w===n(d)&&i(d),b(oe)}else i(d);w=n(d)}if(w!==null)var He=!0;else{var Te=n(m);Te!==null&&Gt(q,Te.startTime-oe),He=!1}return He}finally{w=null,T=J,D=!1}}var X=!1,P=null,S=-1,I=5,x=-1;function R(){return!(t.unstable_now()-x<I)}function M(){if(P!==null){var W=t.unstable_now();x=W;var oe=!0;try{oe=P(!0,W)}finally{oe?C():(X=!1,P=null)}}else X=!1}var C;if(typeof A=="function")C=function(){A(M)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,an=Ve.port2;Ve.port1.onmessage=M,C=function(){an.postMessage(null)}}else C=function(){Z(M,0)};function nt(W){P=W,X||(X=!0,C())}function Gt(W,oe){S=Z(function(){W(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,nt(Q))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(W){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var J=T;T=oe;try{return W()}finally{T=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=T;T=W;try{return oe()}finally{T=J}},t.unstable_scheduleCallback=function(W,oe,J){var ce=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ce+J:ce):J=ce,W){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=J+ve,W={id:y++,callback:oe,priorityLevel:W,startTime:J,expirationTime:ve,sortIndex:-1},J>ce?(W.sortIndex=J,e(m,W),n(d)===null&&W===n(m)&&(U?(N(S),S=-1):U=!0,Gt(q,J-ce))):(W.sortIndex=ve,e(d,W),O||D||(O=!0,nt(Q))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var oe=T;return function(){var J=T;T=oe;try{return W.apply(this,arguments)}finally{T=J}}}})(Sw);Iw.exports=Sw;var IP=Iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=le,mn=IP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pw=new Set,Rl={};function zs(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Rl[t]=e,t=0;t<e.length;t++)Pw.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pf=Object.prototype.hasOwnProperty,PP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d_={},f_={};function AP(t){return Pf.call(f_,t)?!0:Pf.call(d_,t)?!1:PP.test(t)?f_[t]=!0:(d_[t]=!0,!1)}function CP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kP(t,e,n,i){if(e===null||typeof e>"u"||CP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kp,Qp);At[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kp,Qp);At[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kp,Qp);At[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yp(t,e,n,i){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kP(e,n,s,i)&&(n=null),i||s===null?AP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var nr=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),Ro=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),Aw=Symbol.for("react.provider"),Cw=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),em=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),kw=Symbol.for("react.offscreen"),p_=Symbol.iterator;function Qa(t){return t===null||typeof t!="object"?null:(t=p_&&t[p_]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Dd;function ol(t){if(Dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dd=e&&e[1]||""}return`
`+Dd+t}var Od=!1;function Md(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ol(t):""}function RP(t){switch(t.tag){case 5:return ol(t.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return t=Md(t.type,!1),t;case 11:return t=Md(t.type.render,!1),t;case 1:return t=Md(t.type,!0),t;default:return""}}function Rf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case Ro:return"Portal";case Af:return"Profiler";case Jp:return"StrictMode";case Cf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cw:return(t.displayName||"Context")+".Consumer";case Aw:return(t._context.displayName||"Context")+".Provider";case Xp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case em:return e=t.displayName||null,e!==null?e:Rf(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return Rf(t(e))}catch{}}return null}function xP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rf(e);case 8:return e===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LP(t){var e=Rw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ku(t){t._valueTracker||(t._valueTracker=LP(t))}function xw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Rw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xf(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lw(t,e){e=e.checked,e!=null&&Yp(t,"checked",e,!1)}function Lf(t,e){Lw(t,e);var n=Fr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nf(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nf(t,e,n){(e!=="number"||Bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var al=Array.isArray;function Bo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function __(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(al(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function Nw(t,e){var n=Fr(e.value),i=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qu,Dw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qu=Qu||document.createElement("div"),Qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NP=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){NP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function Ow(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function Mw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Ow(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var bP=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Of(t,e){if(e){if(bP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ff=null,jo=null,Ho=null;function v_(t){if(t=ru(t)){if(typeof Ff!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=zh(e),Ff(t.stateNode,t.type,e))}}function Vw(t){jo?Ho?Ho.push(t):Ho=[t]:jo=t}function Fw(){if(jo){var t=jo,e=Ho;if(Ho=jo=null,v_(t),e)for(t=0;t<e.length;t++)v_(e[t])}}function zw(t,e){return t(e)}function Uw(){}var Vd=!1;function Bw(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return zw(t,e,n)}finally{Vd=!1,(jo!==null||Ho!==null)&&(Uw(),Fw())}}function Ll(t,e){var n=t.stateNode;if(n===null)return null;var i=zh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var zf=!1;if(Gi)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){zf=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{zf=!1}function DP(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(y){this.onError(y)}}var ml=!1,jc=null,Hc=!1,Uf=null,OP={onError:function(t){ml=!0,jc=t}};function MP(t,e,n,i,s,o,l,h,d){ml=!1,jc=null,DP.apply(OP,arguments)}function VP(t,e,n,i,s,o,l,h,d){if(MP.apply(this,arguments),ml){if(ml){var m=jc;ml=!1,jc=null}else throw Error(Y(198));Hc||(Hc=!0,Uf=m)}}function Us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w_(t){if(Us(t)!==t)throw Error(Y(188))}function FP(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return w_(s),t;if(o===i)return w_(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Hw(t){return t=FP(t),t!==null?Ww(t):null}function Ww(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ww(t);if(e!==null)return e;t=t.sibling}return null}var qw=mn.unstable_scheduleCallback,T_=mn.unstable_cancelCallback,zP=mn.unstable_shouldYield,UP=mn.unstable_requestPaint,ot=mn.unstable_now,BP=mn.unstable_getCurrentPriorityLevel,nm=mn.unstable_ImmediatePriority,$w=mn.unstable_UserBlockingPriority,Wc=mn.unstable_NormalPriority,jP=mn.unstable_LowPriority,Gw=mn.unstable_IdlePriority,Oh=null,fi=null;function HP(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(Oh,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:$P,WP=Math.log,qP=Math.LN2;function $P(t){return t>>>=0,t===0?32:31-(WP(t)/qP|0)|0}var Yu=64,Ju=4194304;function ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=ll(h):(o&=l,o!==0&&(i=ll(o)))}else l=n&~s,l!==0?i=ll(l):o!==0&&(i=ll(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Gn(e),s=1<<n,i|=t[n],e&=~s;return i}function GP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Gn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=GP(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Bf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zw(){var t=Yu;return Yu<<=1,!(Yu&4194240)&&(Yu=64),t}function Fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function KP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Gn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ze=0;function Kw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qw,rm,Yw,Jw,Xw,jf=!1,Xu=[],Ar=null,Cr=null,kr=null,Nl=new Map,bl=new Map,yr=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E_(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(e.pointerId)}}function Ja(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ru(e),e!==null&&rm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YP(t,e,n,i,s){switch(e){case"focusin":return Ar=Ja(Ar,t,e,n,i,s),!0;case"dragenter":return Cr=Ja(Cr,t,e,n,i,s),!0;case"mouseover":return kr=Ja(kr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Nl.set(o,Ja(Nl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,bl.set(o,Ja(bl.get(o)||null,t,e,n,i,s)),!0}return!1}function eT(t){var e=gs(t.target);if(e!==null){var n=Us(e);if(n!==null){if(e=n.tag,e===13){if(e=jw(n),e!==null){t.blockedOn=e,Xw(t.priority,function(){Yw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Vf=i,n.target.dispatchEvent(i),Vf=null}else return e=ru(n),e!==null&&rm(e),t.blockedOn=n,!1;e.shift()}return!0}function I_(t,e,n){vc(t)&&n.delete(e)}function JP(){jf=!1,Ar!==null&&vc(Ar)&&(Ar=null),Cr!==null&&vc(Cr)&&(Cr=null),kr!==null&&vc(kr)&&(kr=null),Nl.forEach(I_),bl.forEach(I_)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,JP)))}function Dl(t){function e(s){return Xa(s,t)}if(0<Xu.length){Xa(Xu[0],t);for(var n=1;n<Xu.length;n++){var i=Xu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ar!==null&&Xa(Ar,t),Cr!==null&&Xa(Cr,t),kr!==null&&Xa(kr,t),Nl.forEach(e),bl.forEach(e),n=0;n<yr.length;n++)i=yr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)eT(n),n.blockedOn===null&&yr.shift()}var Wo=nr.ReactCurrentBatchConfig,$c=!0;function XP(t,e,n,i){var s=ze,o=Wo.transition;Wo.transition=null;try{ze=1,sm(t,e,n,i)}finally{ze=s,Wo.transition=o}}function eA(t,e,n,i){var s=ze,o=Wo.transition;Wo.transition=null;try{ze=4,sm(t,e,n,i)}finally{ze=s,Wo.transition=o}}function sm(t,e,n,i){if($c){var s=Hf(t,e,n,i);if(s===null)Zd(t,e,i,Gc,n),E_(t,i);else if(YP(s,t,e,n,i))i.stopPropagation();else if(E_(t,i),e&4&&-1<QP.indexOf(t)){for(;s!==null;){var o=ru(s);if(o!==null&&Qw(o),o=Hf(t,e,n,i),o===null&&Zd(t,e,i,Gc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Zd(t,e,i,null,n)}}var Gc=null;function Hf(t,e,n,i){if(Gc=null,t=tm(i),t=gs(t),t!==null)if(e=Us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gc=t,null}function tT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BP()){case nm:return 1;case $w:return 4;case Wc:case jP:return 16;case Gw:return 536870912;default:return 16}default:return 16}}var Ir=null,om=null,wc=null;function nT(){if(wc)return wc;var t,e=om,n=e.length,i,s="value"in Ir?Ir.value:Ir.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return wc=s.slice(t,1<i?1-i:void 0)}function Tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function S_(){return!1}function _n(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ec:S_,this.isPropagationStopped=S_,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},am=_n(ga),iu=Qe({},ga,{view:0,detail:0}),tA=_n(iu),zd,Ud,el,Mh=Qe({},iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==el&&(el&&t.type==="mousemove"?(zd=t.screenX-el.screenX,Ud=t.screenY-el.screenY):Ud=zd=0,el=t),zd)},movementY:function(t){return"movementY"in t?t.movementY:Ud}}),P_=_n(Mh),nA=Qe({},Mh,{dataTransfer:0}),iA=_n(nA),rA=Qe({},iu,{relatedTarget:0}),Bd=_n(rA),sA=Qe({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=_n(sA),aA=Qe({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lA=_n(aA),uA=Qe({},ga,{data:0}),A_=_n(uA),cA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dA[t])?!!e[t]:!1}function lm(){return fA}var pA=Qe({},iu,{key:function(t){if(t.key){var e=cA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lm,charCode:function(t){return t.type==="keypress"?Tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mA=_n(pA),gA=Qe({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C_=_n(gA),_A=Qe({},iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lm}),yA=_n(_A),vA=Qe({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),wA=_n(vA),TA=Qe({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=_n(TA),IA=[9,13,27,32],um=Gi&&"CompositionEvent"in window,gl=null;Gi&&"documentMode"in document&&(gl=document.documentMode);var SA=Gi&&"TextEvent"in window&&!gl,iT=Gi&&(!um||gl&&8<gl&&11>=gl),k_=" ",R_=!1;function rT(t,e){switch(t){case"keyup":return IA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function PA(t,e){switch(t){case"compositionend":return sT(e);case"keypress":return e.which!==32?null:(R_=!0,k_);case"textInput":return t=e.data,t===k_&&R_?null:t;default:return null}}function AA(t,e){if(Lo)return t==="compositionend"||!um&&rT(t,e)?(t=nT(),wc=om=Ir=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iT&&e.locale!=="ko"?null:e.data;default:return null}}var CA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CA[t.type]:e==="textarea"}function oT(t,e,n,i){Vw(i),e=Zc(e,"onChange"),0<e.length&&(n=new am("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var _l=null,Ol=null;function kA(t){_T(t,0)}function Vh(t){var e=Do(t);if(xw(e))return t}function RA(t,e){if(t==="change")return e}var aT=!1;if(Gi){var jd;if(Gi){var Hd="oninput"in document;if(!Hd){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),Hd=typeof L_.oninput=="function"}jd=Hd}else jd=!1;aT=jd&&(!document.documentMode||9<document.documentMode)}function N_(){_l&&(_l.detachEvent("onpropertychange",lT),Ol=_l=null)}function lT(t){if(t.propertyName==="value"&&Vh(Ol)){var e=[];oT(e,Ol,t,tm(t)),Bw(kA,e)}}function xA(t,e,n){t==="focusin"?(N_(),_l=e,Ol=n,_l.attachEvent("onpropertychange",lT)):t==="focusout"&&N_()}function LA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vh(Ol)}function NA(t,e){if(t==="click")return Vh(e)}function bA(t,e){if(t==="input"||t==="change")return Vh(e)}function DA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:DA;function Ml(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Pf.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function b_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D_(t,e){var n=b_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b_(n)}}function uT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cT(){for(var t=window,e=Bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bc(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OA(t){var e=cT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uT(n.ownerDocument.documentElement,n)){if(i!==null&&cm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=D_(n,o);var l=D_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MA=Gi&&"documentMode"in document&&11>=document.documentMode,No=null,Wf=null,yl=null,qf=!1;function O_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qf||No==null||No!==Bc(i)||(i=No,"selectionStart"in i&&cm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),yl&&Ml(yl,i)||(yl=i,i=Zc(Wf,"onSelect"),0<i.length&&(e=new am("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=No)))}function tc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},Wd={},hT={};Gi&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Fh(t){if(Wd[t])return Wd[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hT)return Wd[t]=e[n];return t}var dT=Fh("animationend"),fT=Fh("animationiteration"),pT=Fh("animationstart"),mT=Fh("transitionend"),gT=new Map,M_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){gT.set(t,e),zs(e,[t])}for(var qd=0;qd<M_.length;qd++){var $d=M_[qd],VA=$d.toLowerCase(),FA=$d[0].toUpperCase()+$d.slice(1);$r(VA,"on"+FA)}$r(dT,"onAnimationEnd");$r(fT,"onAnimationIteration");$r(pT,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(mT,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ul));function V_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,VP(i,e,void 0,t),t.currentTarget=null}function _T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;V_(s,h,m),o=d}}}if(Hc)throw t=Uf,Hc=!1,Uf=null,t}function We(t,e){var n=e[Qf];n===void 0&&(n=e[Qf]=new Set);var i=t+"__bubble";n.has(i)||(yT(e,t,2,!1),n.add(i))}function Gd(t,e,n){var i=0;e&&(i|=4),yT(n,t,i,e)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Vl(t){if(!t[nc]){t[nc]=!0,Pw.forEach(function(n){n!=="selectionchange"&&(zA.has(n)||Gd(n,!1,t),Gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nc]||(e[nc]=!0,Gd("selectionchange",!1,e))}}function yT(t,e,n,i){switch(tT(e)){case 1:var s=XP;break;case 4:s=eA;break;default:s=sm}n=s.bind(null,e,n,t),s=void 0,!zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=gs(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Bw(function(){var m=o,y=tm(n),w=[];e:{var T=gT.get(t);if(T!==void 0){var D=am,O=t;switch(t){case"keypress":if(Tc(n)===0)break e;case"keydown":case"keyup":D=mA;break;case"focusin":O="focus",D=Bd;break;case"focusout":O="blur",D=Bd;break;case"beforeblur":case"afterblur":D=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=yA;break;case dT:case fT:case pT:D=oA;break;case mT:D=wA;break;case"scroll":D=tA;break;case"wheel":D=EA;break;case"copy":case"cut":case"paste":D=lA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=C_}var U=(e&4)!==0,Z=!U&&t==="scroll",N=U?T!==null?T+"Capture":null:T;U=[];for(var A=m,b;A!==null;){b=A;var q=b.stateNode;if(b.tag===5&&q!==null&&(b=q,N!==null&&(q=Ll(A,N),q!=null&&U.push(Fl(A,q,b)))),Z)break;A=A.return}0<U.length&&(T=new D(T,O,null,n,y),w.push({event:T,listeners:U}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",T&&n!==Vf&&(O=n.relatedTarget||n.fromElement)&&(gs(O)||O[Zi]))break e;if((D||T)&&(T=y.window===y?y:(T=y.ownerDocument)?T.defaultView||T.parentWindow:window,D?(O=n.relatedTarget||n.toElement,D=m,O=O?gs(O):null,O!==null&&(Z=Us(O),O!==Z||O.tag!==5&&O.tag!==6)&&(O=null)):(D=null,O=m),D!==O)){if(U=P_,q="onMouseLeave",N="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(U=C_,q="onPointerLeave",N="onPointerEnter",A="pointer"),Z=D==null?T:Do(D),b=O==null?T:Do(O),T=new U(q,A+"leave",D,n,y),T.target=Z,T.relatedTarget=b,q=null,gs(y)===m&&(U=new U(N,A+"enter",O,n,y),U.target=b,U.relatedTarget=Z,q=U),Z=q,D&&O)t:{for(U=D,N=O,A=0,b=U;b;b=So(b))A++;for(b=0,q=N;q;q=So(q))b++;for(;0<A-b;)U=So(U),A--;for(;0<b-A;)N=So(N),b--;for(;A--;){if(U===N||N!==null&&U===N.alternate)break t;U=So(U),N=So(N)}U=null}else U=null;D!==null&&F_(w,T,D,U,!1),O!==null&&Z!==null&&F_(w,Z,O,U,!0)}}e:{if(T=m?Do(m):window,D=T.nodeName&&T.nodeName.toLowerCase(),D==="select"||D==="input"&&T.type==="file")var Q=RA;else if(x_(T))if(aT)Q=bA;else{Q=LA;var X=xA}else(D=T.nodeName)&&D.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Q=NA);if(Q&&(Q=Q(t,m))){oT(w,Q,n,y);break e}X&&X(t,T,m),t==="focusout"&&(X=T._wrapperState)&&X.controlled&&T.type==="number"&&Nf(T,"number",T.value)}switch(X=m?Do(m):window,t){case"focusin":(x_(X)||X.contentEditable==="true")&&(No=X,Wf=m,yl=null);break;case"focusout":yl=Wf=No=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,O_(w,n,y);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":O_(w,n,y)}var P;if(um)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Lo?rT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(iT&&n.locale!=="ko"&&(Lo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Lo&&(P=nT()):(Ir=y,om="value"in Ir?Ir.value:Ir.textContent,Lo=!0)),X=Zc(m,S),0<X.length&&(S=new A_(S,t,null,n,y),w.push({event:S,listeners:X}),P?S.data=P:(P=sT(n),P!==null&&(S.data=P)))),(P=SA?PA(t,n):AA(t,n))&&(m=Zc(m,"onBeforeInput"),0<m.length&&(y=new A_("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:m}),y.data=P))}_T(w,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ll(t,n),o!=null&&i.unshift(Fl(t,o,s)),o=Ll(t,e),o!=null&&i.push(Fl(t,o,s))),t=t.return}return i}function So(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=Ll(n,o),d!=null&&l.unshift(Fl(n,d,h))):s||(d=Ll(n,o),d!=null&&l.push(Fl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var UA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function z_(t){return(typeof t=="string"?t:""+t).replace(UA,`
`).replace(BA,"")}function ic(t,e,n){if(e=z_(e),z_(t)!==e&&n)throw Error(Y(425))}function Kc(){}var $f=null,Gf=null;function Zf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(t){return U_.resolve(null).then(t).catch(WA)}:Kf;function WA(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Dl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Dl(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _a=Math.random().toString(36).slice(2),di="__reactFiber$"+_a,zl="__reactProps$"+_a,Zi="__reactContainer$"+_a,Qf="__reactEvents$"+_a,qA="__reactListeners$"+_a,$A="__reactHandles$"+_a;function gs(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B_(t);t!==null;){if(n=t[di])return n;t=B_(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[di]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function zh(t){return t[zl]||null}var Yf=[],Oo=-1;function Gr(t){return{current:t}}function $e(t){0>Oo||(t.current=Yf[Oo],Yf[Oo]=null,Oo--)}function je(t,e){Oo++,Yf[Oo]=t.current,t.current=e}var zr={},Mt=Gr(zr),nn=Gr(!1),ks=zr;function ta(t,e){var n=t.type.contextTypes;if(!n)return zr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function Qc(){$e(nn),$e(Mt)}function j_(t,e,n){if(Mt.current!==zr)throw Error(Y(168));je(Mt,e),je(nn,n)}function vT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Y(108,xP(t)||"Unknown",s));return Qe({},n,i)}function Yc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,ks=Mt.current,je(Mt,t),je(nn,nn.current),!0}function H_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=vT(t,e,ks),i.__reactInternalMemoizedMergedChildContext=t,$e(nn),$e(Mt),je(Mt,t)):$e(nn),je(nn,n)}var Ui=null,Uh=!1,Qd=!1;function wT(t){Ui===null?Ui=[t]:Ui.push(t)}function GA(t){Uh=!0,wT(t)}function Zr(){if(!Qd&&Ui!==null){Qd=!0;var t=0,e=ze;try{var n=Ui;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ui=null,Uh=!1}catch(s){throw Ui!==null&&(Ui=Ui.slice(t+1)),qw(nm,Zr),s}finally{ze=e,Qd=!1}}return null}var Mo=[],Vo=0,Jc=null,Xc=0,An=[],Cn=0,Rs=null,ji=1,Hi="";function fs(t,e){Mo[Vo++]=Xc,Mo[Vo++]=Jc,Jc=t,Xc=e}function TT(t,e,n){An[Cn++]=ji,An[Cn++]=Hi,An[Cn++]=Rs,Rs=t;var i=ji;t=Hi;var s=32-Gn(i)-1;i&=~(1<<s),n+=1;var o=32-Gn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,ji=1<<32-Gn(e)+s|n<<s|i,Hi=o+t}else ji=1<<o|n<<s|i,Hi=t}function hm(t){t.return!==null&&(fs(t,1),TT(t,1,0))}function dm(t){for(;t===Jc;)Jc=Mo[--Vo],Mo[Vo]=null,Xc=Mo[--Vo],Mo[Vo]=null;for(;t===Rs;)Rs=An[--Cn],An[Cn]=null,Hi=An[--Cn],An[Cn]=null,ji=An[--Cn],An[Cn]=null}var fn=null,hn=null,Ge=!1,Wn=null;function ET(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,hn=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:ji,overflow:Hi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,hn=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xf(t){if(Ge){var e=hn;if(e){var n=e;if(!W_(t,e)){if(Jf(t))throw Error(Y(418));e=Rr(n.nextSibling);var i=fn;e&&W_(t,e)?ET(i,n):(t.flags=t.flags&-4097|2,Ge=!1,fn=t)}}else{if(Jf(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ge=!1,fn=t}}}function q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function rc(t){if(t!==fn)return!1;if(!Ge)return q_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zf(t.type,t.memoizedProps)),e&&(e=hn)){if(Jf(t))throw IT(),Error(Y(418));for(;e;)ET(t,e),e=Rr(e.nextSibling)}if(q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=fn?Rr(t.stateNode.nextSibling):null;return!0}function IT(){for(var t=hn;t;)t=Rr(t.nextSibling)}function na(){hn=fn=null,Ge=!1}function fm(t){Wn===null?Wn=[t]:Wn.push(t)}var ZA=nr.ReactCurrentBatchConfig;function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $_(t){var e=t._init;return e(t._payload)}function ST(t){function e(N,A){if(t){var b=N.deletions;b===null?(N.deletions=[A],N.flags|=16):b.push(A)}}function n(N,A){if(!t)return null;for(;A!==null;)e(N,A),A=A.sibling;return null}function i(N,A){for(N=new Map;A!==null;)A.key!==null?N.set(A.key,A):N.set(A.index,A),A=A.sibling;return N}function s(N,A){return N=br(N,A),N.index=0,N.sibling=null,N}function o(N,A,b){return N.index=b,t?(b=N.alternate,b!==null?(b=b.index,b<A?(N.flags|=2,A):b):(N.flags|=2,A)):(N.flags|=1048576,A)}function l(N){return t&&N.alternate===null&&(N.flags|=2),N}function h(N,A,b,q){return A===null||A.tag!==6?(A=rf(b,N.mode,q),A.return=N,A):(A=s(A,b),A.return=N,A)}function d(N,A,b,q){var Q=b.type;return Q===xo?y(N,A,b.props.children,q,b.key):A!==null&&(A.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===gr&&$_(Q)===A.type)?(q=s(A,b.props),q.ref=tl(N,A,b),q.return=N,q):(q=kc(b.type,b.key,b.props,null,N.mode,q),q.ref=tl(N,A,b),q.return=N,q)}function m(N,A,b,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==b.containerInfo||A.stateNode.implementation!==b.implementation?(A=sf(b,N.mode,q),A.return=N,A):(A=s(A,b.children||[]),A.return=N,A)}function y(N,A,b,q,Q){return A===null||A.tag!==7?(A=Is(b,N.mode,q,Q),A.return=N,A):(A=s(A,b),A.return=N,A)}function w(N,A,b){if(typeof A=="string"&&A!==""||typeof A=="number")return A=rf(""+A,N.mode,b),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zu:return b=kc(A.type,A.key,A.props,null,N.mode,b),b.ref=tl(N,null,A),b.return=N,b;case Ro:return A=sf(A,N.mode,b),A.return=N,A;case gr:var q=A._init;return w(N,q(A._payload),b)}if(al(A)||Qa(A))return A=Is(A,N.mode,b,null),A.return=N,A;sc(N,A)}return null}function T(N,A,b,q){var Q=A!==null?A.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return Q!==null?null:h(N,A,""+b,q);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:return b.key===Q?d(N,A,b,q):null;case Ro:return b.key===Q?m(N,A,b,q):null;case gr:return Q=b._init,T(N,A,Q(b._payload),q)}if(al(b)||Qa(b))return Q!==null?null:y(N,A,b,q,null);sc(N,b)}return null}function D(N,A,b,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number")return N=N.get(b)||null,h(A,N,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Zu:return N=N.get(q.key===null?b:q.key)||null,d(A,N,q,Q);case Ro:return N=N.get(q.key===null?b:q.key)||null,m(A,N,q,Q);case gr:var X=q._init;return D(N,A,b,X(q._payload),Q)}if(al(q)||Qa(q))return N=N.get(b)||null,y(A,N,q,Q,null);sc(A,q)}return null}function O(N,A,b,q){for(var Q=null,X=null,P=A,S=A=0,I=null;P!==null&&S<b.length;S++){P.index>S?(I=P,P=null):I=P.sibling;var x=T(N,P,b[S],q);if(x===null){P===null&&(P=I);break}t&&P&&x.alternate===null&&e(N,P),A=o(x,A,S),X===null?Q=x:X.sibling=x,X=x,P=I}if(S===b.length)return n(N,P),Ge&&fs(N,S),Q;if(P===null){for(;S<b.length;S++)P=w(N,b[S],q),P!==null&&(A=o(P,A,S),X===null?Q=P:X.sibling=P,X=P);return Ge&&fs(N,S),Q}for(P=i(N,P);S<b.length;S++)I=D(P,N,S,b[S],q),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?S:I.key),A=o(I,A,S),X===null?Q=I:X.sibling=I,X=I);return t&&P.forEach(function(R){return e(N,R)}),Ge&&fs(N,S),Q}function U(N,A,b,q){var Q=Qa(b);if(typeof Q!="function")throw Error(Y(150));if(b=Q.call(b),b==null)throw Error(Y(151));for(var X=Q=null,P=A,S=A=0,I=null,x=b.next();P!==null&&!x.done;S++,x=b.next()){P.index>S?(I=P,P=null):I=P.sibling;var R=T(N,P,x.value,q);if(R===null){P===null&&(P=I);break}t&&P&&R.alternate===null&&e(N,P),A=o(R,A,S),X===null?Q=R:X.sibling=R,X=R,P=I}if(x.done)return n(N,P),Ge&&fs(N,S),Q;if(P===null){for(;!x.done;S++,x=b.next())x=w(N,x.value,q),x!==null&&(A=o(x,A,S),X===null?Q=x:X.sibling=x,X=x);return Ge&&fs(N,S),Q}for(P=i(N,P);!x.done;S++,x=b.next())x=D(P,N,S,x.value,q),x!==null&&(t&&x.alternate!==null&&P.delete(x.key===null?S:x.key),A=o(x,A,S),X===null?Q=x:X.sibling=x,X=x);return t&&P.forEach(function(M){return e(N,M)}),Ge&&fs(N,S),Q}function Z(N,A,b,q){if(typeof b=="object"&&b!==null&&b.type===xo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zu:e:{for(var Q=b.key,X=A;X!==null;){if(X.key===Q){if(Q=b.type,Q===xo){if(X.tag===7){n(N,X.sibling),A=s(X,b.props.children),A.return=N,N=A;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===gr&&$_(Q)===X.type){n(N,X.sibling),A=s(X,b.props),A.ref=tl(N,X,b),A.return=N,N=A;break e}n(N,X);break}else e(N,X);X=X.sibling}b.type===xo?(A=Is(b.props.children,N.mode,q,b.key),A.return=N,N=A):(q=kc(b.type,b.key,b.props,null,N.mode,q),q.ref=tl(N,A,b),q.return=N,N=q)}return l(N);case Ro:e:{for(X=b.key;A!==null;){if(A.key===X)if(A.tag===4&&A.stateNode.containerInfo===b.containerInfo&&A.stateNode.implementation===b.implementation){n(N,A.sibling),A=s(A,b.children||[]),A.return=N,N=A;break e}else{n(N,A);break}else e(N,A);A=A.sibling}A=sf(b,N.mode,q),A.return=N,N=A}return l(N);case gr:return X=b._init,Z(N,A,X(b._payload),q)}if(al(b))return O(N,A,b,q);if(Qa(b))return U(N,A,b,q);sc(N,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,A!==null&&A.tag===6?(n(N,A.sibling),A=s(A,b),A.return=N,N=A):(n(N,A),A=rf(b,N.mode,q),A.return=N,N=A),l(N)):n(N,A)}return Z}var ia=ST(!0),PT=ST(!1),eh=Gr(null),th=null,Fo=null,pm=null;function mm(){pm=Fo=th=null}function gm(t){var e=eh.current;$e(eh),t._currentValue=e}function ep(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){th=t,pm=Fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(pm!==t)if(t={context:t,memoizedValue:e,next:null},Fo===null){if(th===null)throw Error(Y(308));Fo=t,th.dependencies={lanes:0,firstContext:t}}else Fo=Fo.next=t;return e}var _s=null;function _m(t){_s===null?_s=[t]:_s.push(t)}function AT(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,_m(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ki(t,i)}function Ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ki(t,n)}return s=i.interleaved,s===null?(e.next=e,_m(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ki(t,n)}function Ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,im(t,n)}}function G_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nh(t,e,n,i){var s=t.updateQueue;_r=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=m:h.next=m,y.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,y=m=d=null,h=o;do{var T=h.lane,D=h.eventTime;if((i&T)===T){y!==null&&(y=y.next={eventTime:D,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var O=t,U=h;switch(T=e,D=n,U.tag){case 1:if(O=U.payload,typeof O=="function"){w=O.call(D,w,T);break e}w=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=U.payload,T=typeof O=="function"?O.call(D,w,T):O,T==null)break e;w=Qe({},w,T);break e;case 2:_r=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else D={eventTime:D,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(m=y=D,d=w):y=y.next=D,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(y===null&&(d=w),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ls|=l,t.lanes=l,t.memoizedState=w}}function Z_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var su={},pi=Gr(su),Ul=Gr(su),Bl=Gr(su);function ys(t){if(t===su)throw Error(Y(174));return t}function vm(t,e){switch(je(Bl,e),je(Ul,t),je(pi,su),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}$e(pi),je(pi,e)}function ra(){$e(pi),$e(Ul),$e(Bl)}function kT(t){ys(Bl.current);var e=ys(pi.current),n=Df(e,t.type);e!==n&&(je(Ul,t),je(pi,n))}function wm(t){Ul.current===t&&($e(pi),$e(Ul))}var Ze=Gr(0);function ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yd=[];function Tm(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var Ic=nr.ReactCurrentDispatcher,Jd=nr.ReactCurrentBatchConfig,xs=0,Ke=null,pt=null,wt=null,rh=!1,vl=!1,jl=0,KA=0;function xt(){throw Error(Y(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Im(t,e,n,i,s,o){if(xs=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ic.current=t===null||t.memoizedState===null?XA:eC,t=n(i,s),vl){o=0;do{if(vl=!1,jl=0,25<=o)throw Error(Y(301));o+=1,wt=pt=null,e.updateQueue=null,Ic.current=tC,t=n(i,s)}while(vl)}if(Ic.current=sh,e=pt!==null&&pt.next!==null,xs=0,wt=pt=Ke=null,rh=!1,e)throw Error(Y(300));return t}function Sm(){var t=jl!==0;return jl=0,t}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ke.memoizedState=wt=t:wt=wt.next=t,wt}function bn(){if(pt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Ke.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(Y(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Ke.memoizedState=wt=t:wt=wt.next=t}return wt}function Hl(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=pt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var y=m.lane;if((xs&y)===y)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var w={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=w,l=i):d=d.next=w,Ke.lanes|=y,Ls|=y}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,Yn(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,Ls|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ef(t){var e=bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Yn(o,e.memoizedState)||(tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function RT(){}function xT(t,e){var n=Ke,i=bn(),s=e(),o=!Yn(i.memoizedState,s);if(o&&(i.memoizedState=s,tn=!0),i=i.queue,Pm(bT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,NT.bind(null,n,i,s,e),void 0,null),Tt===null)throw Error(Y(349));xs&30||LT(n,e,s)}return s}function LT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NT(t,e,n,i){e.value=n,e.getSnapshot=i,DT(e)&&OT(t)}function bT(t,e,n){return n(function(){DT(e)&&OT(t)})}function DT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function OT(t){var e=Ki(t,1);e!==null&&Zn(e,t,1,-1)}function K_(t){var e=ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=JA.bind(null,Ke,t),[e.memoizedState,t]}function Wl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function MT(){return bn().memoizedState}function Sc(t,e,n,i){var s=ci();Ke.flags|=t,s.memoizedState=Wl(1|e,n,void 0,i===void 0?null:i)}function Bh(t,e,n,i){var s=bn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&Em(i,l.deps)){s.memoizedState=Wl(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Wl(1|e,n,o,i)}function Q_(t,e){return Sc(8390656,8,t,e)}function Pm(t,e){return Bh(2048,8,t,e)}function VT(t,e){return Bh(4,2,t,e)}function FT(t,e){return Bh(4,4,t,e)}function zT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UT(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4,4,zT.bind(null,e,t),n)}function Am(){}function BT(t,e){var n=bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function jT(t,e){var n=bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Em(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function HT(t,e,n){return xs&21?(Yn(n,e)||(n=Zw(),Ke.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function QA(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=Jd.transition;Jd.transition={};try{t(!1),e()}finally{ze=n,Jd.transition=i}}function WT(){return bn().memoizedState}function YA(t,e,n){var i=Nr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qT(t))$T(e,n);else if(n=AT(t,e,n,i),n!==null){var s=Ht();Zn(n,t,i,s),GT(n,e,i)}}function JA(t,e,n){var i=Nr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qT(t))$T(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Yn(h,l)){var d=e.interleaved;d===null?(s.next=s,_m(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=AT(t,e,s,i),n!==null&&(s=Ht(),Zn(n,t,i,s),GT(n,e,i))}}function qT(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function $T(t,e){vl=rh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,im(t,n)}}var sh={readContext:Nn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},XA={readContext:Nn,useCallback:function(t,e){return ci().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:Q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4194308,4,zT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sc(4,2,t,e)},useMemo:function(t,e){var n=ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ci();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YA.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=ci();return t={current:t},e.memoizedState=t},useState:K_,useDebugValue:Am,useDeferredValue:function(t){return ci().memoizedState=t},useTransition:function(){var t=K_(!1),e=t[0];return t=QA.bind(null,t[1]),ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=ci();if(Ge){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Tt===null)throw Error(Y(349));xs&30||LT(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,Q_(bT.bind(null,i,o,t),[t]),i.flags|=2048,Wl(9,NT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ci(),e=Tt.identifierPrefix;if(Ge){var n=Hi,i=ji;n=(i&~(1<<32-Gn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=jl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eC={readContext:Nn,useCallback:BT,useContext:Nn,useEffect:Pm,useImperativeHandle:UT,useInsertionEffect:VT,useLayoutEffect:FT,useMemo:jT,useReducer:Xd,useRef:MT,useState:function(){return Xd(Hl)},useDebugValue:Am,useDeferredValue:function(t){var e=bn();return HT(e,pt.memoizedState,t)},useTransition:function(){var t=Xd(Hl)[0],e=bn().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:xT,useId:WT,unstable_isNewReconciler:!1},tC={readContext:Nn,useCallback:BT,useContext:Nn,useEffect:Pm,useImperativeHandle:UT,useInsertionEffect:VT,useLayoutEffect:FT,useMemo:jT,useReducer:ef,useRef:MT,useState:function(){return ef(Hl)},useDebugValue:Am,useDeferredValue:function(t){var e=bn();return pt===null?e.memoizedState=t:HT(e,pt.memoizedState,t)},useTransition:function(){var t=ef(Hl)[0],e=bn().memoizedState;return[t,e]},useMutableSource:RT,useSyncExternalStore:xT,useId:WT,unstable_isNewReconciler:!1};function jn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jh={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ht(),s=Nr(t),o=$i(i,s);o.payload=e,n!=null&&(o.callback=n),e=xr(t,o,s),e!==null&&(Zn(e,t,s,i),Ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ht(),s=Nr(t),o=$i(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=xr(t,o,s),e!==null&&(Zn(e,t,s,i),Ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),i=Nr(t),s=$i(n,i);s.tag=2,e!=null&&(s.callback=e),e=xr(t,s,i),e!==null&&(Zn(e,t,i,n),Ec(e,t,i))}};function Y_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,i)||!Ml(s,o):!0}function ZT(t,e,n){var i=!1,s=zr,o=e.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(s=rn(e)?ks:Mt.current,i=e.contextTypes,o=(i=i!=null)?ta(t,s):zr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function J_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function np(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ym(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Nn(o):(o=rn(e)?ks:Mt.current,s.context=ta(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jh.enqueueReplaceState(s,s.state,null),nh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",i=e;do n+=RP(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ip(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nC=typeof WeakMap=="function"?WeakMap:Map;function KT(t,e,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ah||(ah=!0,fp=i),ip(t,e)},n}function QT(t,e,n){n=$i(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){ip(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ip(t,e),typeof i!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function X_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new nC;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=gC.bind(null,t,e,n),e.then(t,t))}function ey(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ty(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$i(-1,1),e.tag=2,xr(n,e,1))),n.lanes|=1),t)}var iC=nr.ReactCurrentOwner,tn=!1;function jt(t,e,n,i){e.child=t===null?PT(e,null,n,i):ia(e,t.child,n,i)}function ny(t,e,n,i,s){n=n.render;var o=e.ref;return qo(e,s),i=Im(t,e,n,i,o,s),n=Sm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qi(t,e,s)):(Ge&&n&&hm(e),e.flags|=1,jt(t,e,i,s),e.child)}function iy(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Dm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,YT(t,e,o,i,s)):(t=kc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(l,i)&&t.ref===e.ref)return Qi(t,e,s)}return e.flags|=1,t=br(o,i),t.ref=e.ref,t.return=e,e.child=t}function YT(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ml(o,i)&&t.ref===e.ref)if(tn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Qi(t,e,s)}return rp(t,e,n,i,s)}function JT(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Uo,cn),cn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Uo,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je(Uo,cn),cn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je(Uo,cn),cn|=i;return jt(t,e,s,n),e.child}function XT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rp(t,e,n,i,s){var o=rn(n)?ks:Mt.current;return o=ta(e,o),qo(e,s),n=Im(t,e,n,i,o,s),i=Sm(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qi(t,e,s)):(Ge&&i&&hm(e),e.flags|=1,jt(t,e,n,s),e.child)}function ry(t,e,n,i,s){if(rn(n)){var o=!0;Yc(e)}else o=!1;if(qo(e,s),e.stateNode===null)Pc(t,e),ZT(e,n,i),np(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Nn(m):(m=rn(n)?ks:Mt.current,m=ta(e,m));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&J_(e,l,i,m),_r=!1;var T=e.memoizedState;l.state=T,nh(e,i,l,s),d=e.memoizedState,h!==i||T!==d||nn.current||_r?(typeof y=="function"&&(tp(e,n,y,i),d=e.memoizedState),(h=_r||Y_(e,n,h,i,T,d,m))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,CT(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:jn(e.type,h),l.props=m,w=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Nn(d):(d=rn(n)?ks:Mt.current,d=ta(e,d));var D=n.getDerivedStateFromProps;(y=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||T!==d)&&J_(e,l,i,d),_r=!1,T=e.memoizedState,l.state=T,nh(e,i,l,s);var O=e.memoizedState;h!==w||T!==O||nn.current||_r?(typeof D=="function"&&(tp(e,n,D,i),O=e.memoizedState),(m=_r||Y_(e,n,m,i,T,O,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,O,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,O,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=O),l.props=i,l.state=O,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return sp(t,e,n,i,o,s)}function sp(t,e,n,i,s,o){XT(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&H_(e,n,!1),Qi(t,e,o);i=e.stateNode,iC.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=ia(e,t.child,null,o),e.child=ia(e,null,h,o)):jt(t,e,h,o),e.memoizedState=i.state,s&&H_(e,n,!0),e.child}function eE(t){var e=t.stateNode;e.pendingContext?j_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j_(t,e.context,!1),vm(t,e.containerInfo)}function sy(t,e,n,i,s){return na(),fm(s),e.flags|=256,jt(t,e,n,i),e.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function tE(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(Ze,s&1),t===null)return Xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=qh(l,i,0,null),t=Is(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ap(n),e.memoizedState=op,t):Cm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return rC(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=br(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=br(h,o):(o=Is(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?ap(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=op,i}return o=t.child,t=o.sibling,i=br(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Cm(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,i){return i!==null&&fm(i),ia(e,t.child,null,n),t=Cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rC(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=tf(Error(Y(422))),oc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=qh({mode:"visible",children:i.children},s,0,null),o=Is(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ia(e,t.child,null,l),e.child.memoizedState=ap(l),e.memoizedState=op,o);if(!(e.mode&1))return oc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=tf(o,i,void 0),oc(t,e,l,i)}if(h=(l&t.childLanes)!==0,tn||h){if(i=Tt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ki(t,s),Zn(i,t,s,-1))}return bm(),i=tf(Error(Y(421))),oc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_C.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,hn=Rr(s.nextSibling),fn=e,Ge=!0,Wn=null,t!==null&&(An[Cn++]=ji,An[Cn++]=Hi,An[Cn++]=Rs,ji=t.id,Hi=t.overflow,Rs=e),e=Cm(e,i.children),e.flags|=4096,e)}function oy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ep(t.return,e,n)}function nf(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function nE(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(jt(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,n,e);else if(t.tag===19)oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nf(e,!0,n,null,o);break;case"together":nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sC(t,e,n){switch(e.tag){case 3:eE(e),na();break;case 5:kT(e);break;case 1:rn(e.type)&&Yc(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;je(eh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?tE(t,e,n):(je(Ze,Ze.current&1),t=Qi(t,e,n),t!==null?t.sibling:null);je(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return nE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,JT(t,e,n)}return Qi(t,e,n)}var iE,lp,rE,sE;iE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lp=function(){};rE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ys(pi.current);var o=null;switch(n){case"input":s=xf(t,s),i=xf(t,i),o=[];break;case"select":s=Qe({},s,{value:void 0}),i=Qe({},i,{value:void 0}),o=[];break;case"textarea":s=bf(t,s),i=bf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Kc)}Of(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Rl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Rl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&We("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};sE=function(t,e,n,i){n!==i&&(e.flags|=4)};function nl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oC(t,e,n){var i=e.pendingProps;switch(dm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return rn(e.type)&&Qc(),Lt(e),null;case 3:return i=e.stateNode,ra(),$e(nn),$e(Mt),Tm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(gp(Wn),Wn=null))),lp(t,e),Lt(e),null;case 5:wm(e);var s=ys(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)rE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Lt(e),null}if(t=ys(pi.current),rc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[di]=e,i[zl]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(s=0;s<ul.length;s++)We(ul[s],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":m_(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":__(i,o),We("invalid",i)}Of(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&ic(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&ic(i.textContent,h,t),s=["children",""+h]):Rl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&We("scroll",i)}switch(n){case"input":Ku(i),g_(i,o,!0);break;case"textarea":Ku(i),y_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Kc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[di]=e,t[zl]=i,iE(t,e,!1,!1),e.stateNode=t;e:{switch(l=Mf(n,i),n){case"dialog":We("cancel",t),We("close",t),s=i;break;case"iframe":case"object":case"embed":We("load",t),s=i;break;case"video":case"audio":for(s=0;s<ul.length;s++)We(ul[s],t);s=i;break;case"source":We("error",t),s=i;break;case"img":case"image":case"link":We("error",t),We("load",t),s=i;break;case"details":We("toggle",t),s=i;break;case"input":m_(t,i),s=xf(t,i),We("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Qe({},i,{value:void 0}),We("invalid",t);break;case"textarea":__(t,i),s=bf(t,i),We("invalid",t);break;default:s=i}Of(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Mw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Dw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&xl(t,d):typeof d=="number"&&xl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Rl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&We("scroll",t):d!=null&&Yp(t,o,d,l))}switch(n){case"input":Ku(t),g_(t,i,!1);break;case"textarea":Ku(t),y_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Fr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Bo(t,!!i.multiple,o,!1):i.defaultValue!=null&&Bo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)sE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ys(Bl.current),ys(pi.current),rc(e)){if(i=e.stateNode,n=e.memoizedProps,i[di]=e,(o=i.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:ic(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ic(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[di]=e,e.stateNode=i}return Lt(e),null;case 13:if($e(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&hn!==null&&e.mode&1&&!(e.flags&128))IT(),na(),e.flags|=98560,o=!1;else if(o=rc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[di]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),o=!1}else Wn!==null&&(gp(Wn),Wn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?mt===0&&(mt=3):bm())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return ra(),lp(t,e),t===null&&Vl(e.stateNode.containerInfo),Lt(e),null;case 10:return gm(e.type._context),Lt(e),null;case 17:return rn(e.type)&&Qc(),Lt(e),null;case 19:if($e(Ze),o=e.memoizedState,o===null)return Lt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)nl(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ih(t),l!==null){for(e.flags|=128,nl(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&ot()>oa&&(e.flags|=128,i=!0,nl(o,!1),e.lanes=4194304)}else{if(!i)if(t=ih(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ge)return Lt(e),null}else 2*ot()-o.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,i=!0,nl(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ot(),e.sibling=null,n=Ze.current,je(Ze,i?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Nm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function aC(t,e){switch(dm(e),e.tag){case 1:return rn(e.type)&&Qc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),$e(nn),$e(Mt),Tm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wm(e),null;case 13:if($e(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ze),null;case 4:return ra(),null;case 10:return gm(e.type._context),null;case 22:case 23:return Nm(),null;case 24:return null;default:return null}}var ac=!1,Dt=!1,lC=typeof WeakSet=="function"?WeakSet:Set,se=null;function zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function up(t,e,n){try{n()}catch(i){et(t,e,i)}}var ay=!1;function uC(t,e){if($f=$c,t=cT(),cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,y=0,w=t,T=null;t:for(;;){for(var D;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(d=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(D=w.firstChild)!==null;)T=w,w=D;for(;;){if(w===t)break t;if(T===n&&++m===s&&(h=l),T===o&&++y===i&&(d=l),(D=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=D}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},$c=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var U=O.memoizedProps,Z=O.memoizedState,N=e.stateNode,A=N.getSnapshotBeforeUpdate(e.elementType===e.type?U:jn(e.type,U),Z);N.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(q){et(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return O=ay,ay=!1,O}function wl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&up(e,n,o)}s=s.next}while(s!==i)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oE(t){var e=t.alternate;e!==null&&(t.alternate=null,oE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[zl],delete e[Qf],delete e[qA],delete e[$A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aE(t){return t.tag===5||t.tag===3||t.tag===4}function ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kc));else if(i!==4&&(t=t.child,t!==null))for(hp(t,e,n),t=t.sibling;t!==null;)hp(t,e,n),t=t.sibling}function dp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}var Et=null,Hn=!1;function pr(t,e,n){for(n=n.child;n!==null;)lE(t,e,n),n=n.sibling}function lE(t,e,n){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(Oh,n)}catch{}switch(n.tag){case 5:Dt||zo(n,e);case 6:var i=Et,s=Hn;Et=null,pr(t,e,n),Et=i,Hn=s,Et!==null&&(Hn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Hn?(t=Et,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),Dl(t)):Kd(Et,n.stateNode));break;case 4:i=Et,s=Hn,Et=n.stateNode.containerInfo,Hn=!0,pr(t,e,n),Et=i,Hn=s;break;case 0:case 11:case 14:case 15:if(!Dt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&up(n,e,l),s=s.next}while(s!==i)}pr(t,e,n);break;case 1:if(!Dt&&(zo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}pr(t,e,n);break;case 21:pr(t,e,n);break;case 22:n.mode&1?(Dt=(i=Dt)||n.memoizedState!==null,pr(t,e,n),Dt=i):pr(t,e,n);break;default:pr(t,e,n)}}function uy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lC),e.forEach(function(i){var s=yC.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Et=h.stateNode,Hn=!1;break e;case 3:Et=h.stateNode.containerInfo,Hn=!0;break e;case 4:Et=h.stateNode.containerInfo,Hn=!0;break e}h=h.return}if(Et===null)throw Error(Y(160));lE(o,l,s),Et=null,Hn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){et(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uE(e,t),e=e.sibling}function uE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),ui(t),i&4){try{wl(3,t,t.return),Hh(3,t)}catch(U){et(t,t.return,U)}try{wl(5,t,t.return)}catch(U){et(t,t.return,U)}}break;case 1:Bn(e,t),ui(t),i&512&&n!==null&&zo(n,n.return);break;case 5:if(Bn(e,t),ui(t),i&512&&n!==null&&zo(n,n.return),t.flags&32){var s=t.stateNode;try{xl(s,"")}catch(U){et(t,t.return,U)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Lw(s,o),Mf(h,l);var m=Mf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],w=d[l+1];y==="style"?Mw(s,w):y==="dangerouslySetInnerHTML"?Dw(s,w):y==="children"?xl(s,w):Yp(s,y,w,m)}switch(h){case"input":Lf(s,o);break;case"textarea":Nw(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?Bo(s,!!o.multiple,D,!1):T!==!!o.multiple&&(o.defaultValue!=null?Bo(s,!!o.multiple,o.defaultValue,!0):Bo(s,!!o.multiple,o.multiple?[]:"",!1))}s[zl]=o}catch(U){et(t,t.return,U)}}break;case 6:if(Bn(e,t),ui(t),i&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(U){et(t,t.return,U)}}break;case 3:if(Bn(e,t),ui(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(U){et(t,t.return,U)}break;case 4:Bn(e,t),ui(t);break;case 13:Bn(e,t),ui(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(xm=ot())),i&4&&uy(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(m=Dt)||y,Bn(e,t),Dt=m):Bn(e,t),ui(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(se=t,y=t.child;y!==null;){for(w=se=y;se!==null;){switch(T=se,D=T.child,T.tag){case 0:case 11:case 14:case 15:wl(4,T,T.return);break;case 1:zo(T,T.return);var O=T.stateNode;if(typeof O.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(U){et(i,n,U)}}break;case 5:zo(T,T.return);break;case 22:if(T.memoizedState!==null){hy(w);continue}}D!==null?(D.return=T,se=D):hy(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{s=w.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Ow("display",l))}catch(U){et(t,t.return,U)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(U){et(t,t.return,U)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Bn(e,t),ui(t),i&4&&uy(t);break;case 21:break;default:Bn(e,t),ui(t)}}function ui(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(xl(s,""),i.flags&=-33);var o=ly(t);dp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=ly(t);hp(t,h,l);break;default:throw Error(Y(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cC(t,e,n){se=t,cE(t)}function cE(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var s=se,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||ac;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Dt;h=ac;var m=Dt;if(ac=l,(Dt=d)&&!m)for(se=s;se!==null;)l=se,d=l.child,l.tag===22&&l.memoizedState!==null?dy(s):d!==null?(d.return=l,se=d):dy(s);for(;o!==null;)se=o,cE(o),o=o.sibling;se=s,ac=h,Dt=m}cy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,se=o):cy(t)}}function cy(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Hh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Z_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&Dl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Dt||e.flags&512&&cp(e)}catch(T){et(e,e.return,T)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function hy(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function dy(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){et(e,s,d)}}var o=e.return;try{cp(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{cp(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){se=null;break}var h=e.sibling;if(h!==null){h.return=e.return,se=h;break}se=e.return}}var hC=Math.ceil,oh=nr.ReactCurrentDispatcher,km=nr.ReactCurrentOwner,Ln=nr.ReactCurrentBatchConfig,Le=0,Tt=null,ct=null,Pt=0,cn=0,Uo=Gr(0),mt=0,ql=null,Ls=0,Wh=0,Rm=0,Tl=null,Xt=null,xm=0,oa=1/0,zi=null,ah=!1,fp=null,Lr=null,lc=!1,Sr=null,lh=0,El=0,pp=null,Ac=-1,Cc=0;function Ht(){return Le&6?ot():Ac!==-1?Ac:Ac=ot()}function Nr(t){return t.mode&1?Le&2&&Pt!==0?Pt&-Pt:ZA.transition!==null?(Cc===0&&(Cc=Zw()),Cc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:tT(t.type)),t):1}function Zn(t,e,n,i){if(50<El)throw El=0,pp=null,Error(Y(185));nu(t,n,i),(!(Le&2)||t!==Tt)&&(t===Tt&&(!(Le&2)&&(Wh|=n),mt===4&&vr(t,Pt)),sn(t,i),n===1&&Le===0&&!(e.mode&1)&&(oa=ot()+500,Uh&&Zr()))}function sn(t,e){var n=t.callbackNode;ZP(t,e);var i=qc(t,t===Tt?Pt:0);if(i===0)n!==null&&T_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&T_(n),e===1)t.tag===0?GA(fy.bind(null,t)):wT(fy.bind(null,t)),HA(function(){!(Le&6)&&Zr()}),n=null;else{switch(Kw(i)){case 1:n=nm;break;case 4:n=$w;break;case 16:n=Wc;break;case 536870912:n=Gw;break;default:n=Wc}n=yE(n,hE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hE(t,e){if(Ac=-1,Cc=0,Le&6)throw Error(Y(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var i=qc(t,t===Tt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=uh(t,i);else{e=i;var s=Le;Le|=2;var o=fE();(Tt!==t||Pt!==e)&&(zi=null,oa=ot()+500,Es(t,e));do try{pC();break}catch(h){dE(t,h)}while(!0);mm(),oh.current=o,Le=s,ct!==null?e=0:(Tt=null,Pt=0,e=mt)}if(e!==0){if(e===2&&(s=Bf(t),s!==0&&(i=s,e=mp(t,s))),e===1)throw n=ql,Es(t,0),vr(t,i),sn(t,ot()),n;if(e===6)vr(t,i);else{if(s=t.current.alternate,!(i&30)&&!dC(s)&&(e=uh(t,i),e===2&&(o=Bf(t),o!==0&&(i=o,e=mp(t,o))),e===1))throw n=ql,Es(t,0),vr(t,i),sn(t,ot()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:ps(t,Xt,zi);break;case 3:if(vr(t,i),(i&130023424)===i&&(e=xm+500-ot(),10<e)){if(qc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kf(ps.bind(null,t,Xt,zi),e);break}ps(t,Xt,zi);break;case 4:if(vr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Gn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=ot()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hC(i/1960))-i,10<i){t.timeoutHandle=Kf(ps.bind(null,t,Xt,zi),i);break}ps(t,Xt,zi);break;case 5:ps(t,Xt,zi);break;default:throw Error(Y(329))}}}return sn(t,ot()),t.callbackNode===n?hE.bind(null,t):null}function mp(t,e){var n=Tl;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=uh(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&gp(e)),t}function gp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function dC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Yn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vr(t,e){for(e&=~Rm,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),i=1<<n;t[n]=-1,e&=~i}}function fy(t){if(Le&6)throw Error(Y(327));$o();var e=qc(t,0);if(!(e&1))return sn(t,ot()),null;var n=uh(t,e);if(t.tag!==0&&n===2){var i=Bf(t);i!==0&&(e=i,n=mp(t,i))}if(n===1)throw n=ql,Es(t,0),vr(t,e),sn(t,ot()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ps(t,Xt,zi),sn(t,ot()),null}function Lm(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(oa=ot()+500,Uh&&Zr())}}function Ns(t){Sr!==null&&Sr.tag===0&&!(Le&6)&&$o();var e=Le;Le|=1;var n=Ln.transition,i=ze;try{if(Ln.transition=null,ze=1,t)return t()}finally{ze=i,Ln.transition=n,Le=e,!(Le&6)&&Zr()}}function Nm(){cn=Uo.current,$e(Uo)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jA(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(dm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qc();break;case 3:ra(),$e(nn),$e(Mt),Tm();break;case 5:wm(i);break;case 4:ra();break;case 13:$e(Ze);break;case 19:$e(Ze);break;case 10:gm(i.type._context);break;case 22:case 23:Nm()}n=n.return}if(Tt=t,ct=t=br(t.current,null),Pt=cn=e,mt=0,ql=null,Rm=Wh=Ls=0,Xt=Tl=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}_s=null}return t}function dE(t,e){do{var n=ct;try{if(mm(),Ic.current=sh,rh){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}rh=!1}if(xs=0,wt=pt=Ke=null,vl=!1,jl=0,km.current=null,n===null||n.return===null){mt=1,ql=e,ct=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=Pt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,y=h,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var T=y.alternate;T?(y.updateQueue=T.updateQueue,y.memoizedState=T.memoizedState,y.lanes=T.lanes):(y.updateQueue=null,y.memoizedState=null)}var D=ey(l);if(D!==null){D.flags&=-257,ty(D,l,h,o,e),D.mode&1&&X_(o,m,e),e=D,d=m;var O=e.updateQueue;if(O===null){var U=new Set;U.add(d),e.updateQueue=U}else O.add(d);break e}else{if(!(e&1)){X_(o,m,e),bm();break e}d=Error(Y(426))}}else if(Ge&&h.mode&1){var Z=ey(l);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),ty(Z,l,h,o,e),fm(sa(d,h));break e}}o=d=sa(d,h),mt!==4&&(mt=2),Tl===null?Tl=[o]:Tl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=KT(o,d,e);G_(o,N);break e;case 1:h=d;var A=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof A.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Lr===null||!Lr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var q=QT(o,h,e);G_(o,q);break e}}o=o.return}while(o!==null)}mE(n)}catch(Q){e=Q,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function fE(){var t=oh.current;return oh.current=sh,t===null?sh:t}function bm(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(Ls&268435455)&&!(Wh&268435455)||vr(Tt,Pt)}function uh(t,e){var n=Le;Le|=2;var i=fE();(Tt!==t||Pt!==e)&&(zi=null,Es(t,e));do try{fC();break}catch(s){dE(t,s)}while(!0);if(mm(),Le=n,oh.current=i,ct!==null)throw Error(Y(261));return Tt=null,Pt=0,mt}function fC(){for(;ct!==null;)pE(ct)}function pC(){for(;ct!==null&&!zP();)pE(ct)}function pE(t){var e=_E(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?mE(t):ct=e,km.current=null}function mE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aC(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ct=null;return}}else if(n=oC(n,e,cn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);mt===0&&(mt=5)}function ps(t,e,n){var i=ze,s=Ln.transition;try{Ln.transition=null,ze=1,mC(t,e,n,i)}finally{Ln.transition=s,ze=i}return null}function mC(t,e,n,i){do $o();while(Sr!==null);if(Le&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(KP(t,o),t===Tt&&(ct=Tt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lc||(lc=!0,yE(Wc,function(){return $o(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ln.transition,Ln.transition=null;var l=ze;ze=1;var h=Le;Le|=4,km.current=null,uC(t,n),uE(n,t),OA(Gf),$c=!!$f,Gf=$f=null,t.current=n,cC(n),UP(),Le=h,ze=l,Ln.transition=o}else t.current=n;if(lc&&(lc=!1,Sr=t,lh=s),o=t.pendingLanes,o===0&&(Lr=null),HP(n.stateNode),sn(t,ot()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(ah)throw ah=!1,t=fp,fp=null,t;return lh&1&&t.tag!==0&&$o(),o=t.pendingLanes,o&1?t===pp?El++:(El=0,pp=t):El=0,Zr(),null}function $o(){if(Sr!==null){var t=Kw(lh),e=Ln.transition,n=ze;try{if(Ln.transition=null,ze=16>t?16:t,Sr===null)var i=!1;else{if(t=Sr,Sr=null,lh=0,Le&6)throw Error(Y(331));var s=Le;for(Le|=4,se=t.current;se!==null;){var o=se,l=o.child;if(se.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(se=m;se!==null;){var y=se;switch(y.tag){case 0:case 11:case 15:wl(8,y,o)}var w=y.child;if(w!==null)w.return=y,se=w;else for(;se!==null;){y=se;var T=y.sibling,D=y.return;if(oE(y),y===m){se=null;break}if(T!==null){T.return=D,se=T;break}se=D}}}var O=o.alternate;if(O!==null){var U=O.child;if(U!==null){O.child=null;do{var Z=U.sibling;U.sibling=null,U=Z}while(U!==null)}}se=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,se=l;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wl(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,se=N;break e}se=o.return}}var A=t.current;for(se=A;se!==null;){l=se;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,se=b;else e:for(l=A;se!==null;){if(h=se,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Hh(9,h)}}catch(Q){et(h,h.return,Q)}if(h===l){se=null;break e}var q=h.sibling;if(q!==null){q.return=h.return,se=q;break e}se=h.return}}if(Le=s,Zr(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(Oh,t)}catch{}i=!0}return i}finally{ze=n,Ln.transition=e}}return!1}function py(t,e,n){e=sa(n,e),e=KT(t,e,1),t=xr(t,e,1),e=Ht(),t!==null&&(nu(t,1,e),sn(t,e))}function et(t,e,n){if(t.tag===3)py(t,t,n);else for(;e!==null;){if(e.tag===3){py(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Lr===null||!Lr.has(i))){t=sa(n,t),t=QT(e,t,1),e=xr(e,t,1),t=Ht(),e!==null&&(nu(e,1,t),sn(e,t));break}}e=e.return}}function gC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Pt&n)===n&&(mt===4||mt===3&&(Pt&130023424)===Pt&&500>ot()-xm?Es(t,0):Rm|=n),sn(t,e)}function gE(t,e){e===0&&(t.mode&1?(e=Ju,Ju<<=1,!(Ju&130023424)&&(Ju=4194304)):e=1);var n=Ht();t=Ki(t,e),t!==null&&(nu(t,e,n),sn(t,n))}function _C(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gE(t,n)}function yC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),gE(t,n)}var _E;_E=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,sC(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ge&&e.flags&1048576&&TT(e,Xc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Pc(t,e),t=e.pendingProps;var s=ta(e,Mt.current);qo(e,n),s=Im(null,e,i,t,s,n);var o=Sm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(i)?(o=!0,Yc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ym(e),s.updater=jh,e.stateNode=s,s._reactInternals=e,np(e,i,t,n),e=sp(null,e,i,!0,o,n)):(e.tag=0,Ge&&o&&hm(e),jt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Pc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wC(i),t=jn(i,t),s){case 0:e=rp(null,e,i,t,n);break e;case 1:e=ry(null,e,i,t,n);break e;case 11:e=ny(null,e,i,t,n);break e;case 14:e=iy(null,e,i,jn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:jn(i,s),rp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:jn(i,s),ry(t,e,i,s,n);case 3:e:{if(eE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,s=o.element,CT(t,e),nh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=sa(Error(Y(423)),e),e=sy(t,e,i,n,s);break e}else if(i!==s){s=sa(Error(Y(424)),e),e=sy(t,e,i,n,s);break e}else for(hn=Rr(e.stateNode.containerInfo.firstChild),fn=e,Ge=!0,Wn=null,n=PT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===s){e=Qi(t,e,n);break e}jt(t,e,i,n)}e=e.child}return e;case 5:return kT(e),t===null&&Xf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Zf(i,s)?l=null:o!==null&&Zf(i,o)&&(e.flags|=32),XT(t,e),jt(t,e,l,n),e.child;case 6:return t===null&&Xf(e),null;case 13:return tE(t,e,n);case 4:return vm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ia(e,null,i,n):jt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:jn(i,s),ny(t,e,i,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,je(eh,i._currentValue),i._currentValue=l,o!==null)if(Yn(o.value,l)){if(o.children===s.children&&!nn.current){e=Qi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=$i(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?d.next=d:(d.next=y.next,y.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ep(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ep(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,qo(e,n),s=Nn(s),i=i(s),e.flags|=1,jt(t,e,i,n),e.child;case 14:return i=e.type,s=jn(i,e.pendingProps),s=jn(i.type,s),iy(t,e,i,s,n);case 15:return YT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:jn(i,s),Pc(t,e),e.tag=1,rn(i)?(t=!0,Yc(e)):t=!1,qo(e,n),ZT(e,i,s),np(e,i,s,n),sp(null,e,i,!0,t,n);case 19:return nE(t,e,n);case 22:return JT(t,e,n)}throw Error(Y(156,e.tag))};function yE(t,e){return qw(t,e)}function vC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,i){return new vC(t,e,n,i)}function Dm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wC(t){if(typeof t=="function")return Dm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xp)return 11;if(t===em)return 14}return 2}function br(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Dm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case xo:return Is(n.children,s,o,e);case Jp:l=8,s|=8;break;case Af:return t=xn(12,n,e,s|2),t.elementType=Af,t.lanes=o,t;case Cf:return t=xn(13,n,e,s),t.elementType=Cf,t.lanes=o,t;case kf:return t=xn(19,n,e,s),t.elementType=kf,t.lanes=o,t;case kw:return qh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Aw:l=10;break e;case Cw:l=9;break e;case Xp:l=11;break e;case em:l=14;break e;case gr:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=xn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Is(t,e,n,i){return t=xn(7,t,i,e),t.lanes=n,t}function qh(t,e,n,i){return t=xn(22,t,i,e),t.elementType=kw,t.lanes=n,t.stateNode={isHidden:!1},t}function rf(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function sf(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TC(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,i,s,o,l,h,d){return t=new TC(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(o),t}function EC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function vE(t){if(!t)return zr;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(rn(n))return vT(t,n,e)}return e}function wE(t,e,n,i,s,o,l,h,d){return t=Om(n,i,!0,t,s,o,l,h,d),t.context=vE(null),n=t.current,i=Ht(),s=Nr(n),o=$i(i,s),o.callback=e??null,xr(n,o,s),t.current.lanes=s,nu(t,s,i),sn(t,i),t}function $h(t,e,n,i){var s=e.current,o=Ht(),l=Nr(s);return n=vE(n),e.context===null?e.context=n:e.pendingContext=n,e=$i(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=xr(s,e,l),t!==null&&(Zn(t,s,l,o),Ec(t,s,l)),l}function ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function my(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mm(t,e){my(t,e),(t=t.alternate)&&my(t,e)}function IC(){return null}var TE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vm(t){this._internalRoot=t}Gh.prototype.render=Vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));$h(t,e,null,null)};Gh.prototype.unmount=Vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){$h(null,t,null,null)}),e[Zi]=null}};function Gh(t){this._internalRoot=t}Gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&eT(t)}};function Fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gy(){}function SC(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=ch(l);o.call(m)}}var l=wE(e,i,t,0,null,!1,!1,"",gy);return t._reactRootContainer=l,t[Zi]=l.current,Vl(t.nodeType===8?t.parentNode:t),Ns(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=ch(d);h.call(m)}}var d=Om(t,0,!1,null,null,!1,!1,"",gy);return t._reactRootContainer=d,t[Zi]=d.current,Vl(t.nodeType===8?t.parentNode:t),Ns(function(){$h(e,d,n,i)}),d}function Kh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=ch(l);h.call(d)}}$h(e,l,t,s)}else l=SC(n,e,t,s,i);return ch(l)}Qw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ll(e.pendingLanes);n!==0&&(im(e,n|1),sn(e,ot()),!(Le&6)&&(oa=ot()+500,Zr()))}break;case 13:Ns(function(){var i=Ki(t,1);if(i!==null){var s=Ht();Zn(i,t,1,s)}}),Mm(t,1)}};rm=function(t){if(t.tag===13){var e=Ki(t,134217728);if(e!==null){var n=Ht();Zn(e,t,134217728,n)}Mm(t,134217728)}};Yw=function(t){if(t.tag===13){var e=Nr(t),n=Ki(t,e);if(n!==null){var i=Ht();Zn(n,t,e,i)}Mm(t,e)}};Jw=function(){return ze};Xw=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Ff=function(t,e,n){switch(e){case"input":if(Lf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=zh(i);if(!s)throw Error(Y(90));xw(i),Lf(i,s)}}}break;case"textarea":Nw(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};zw=Lm;Uw=Ns;var PC={usingClientEntryPoint:!1,Events:[ru,Do,zh,Vw,Fw,Lm]},il={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AC={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hw(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||IC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{Oh=uc.inject(AC),fi=uc}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PC;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fm(e))throw Error(Y(200));return EC(t,e,null,n)};gn.createRoot=function(t,e){if(!Fm(t))throw Error(Y(299));var n=!1,i="",s=TE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,i,s),t[Zi]=e.current,Vl(t.nodeType===8?t.parentNode:t),new Vm(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Hw(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Ns(t)};gn.hydrate=function(t,e,n){if(!Zh(e))throw Error(Y(200));return Kh(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!Fm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=TE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=wE(e,null,t,1,n??null,s,!1,o,l),t[Zi]=e.current,Vl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gh(e)};gn.render=function(t,e,n){if(!Zh(e))throw Error(Y(200));return Kh(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Zh(t))throw Error(Y(40));return t._reactRootContainer?(Ns(function(){Kh(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};gn.unstable_batchedUpdates=Lm;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Zh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Kh(t,e,n,!1,i)};gn.version="18.3.1-next-f1338f8080-20240426";function EE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EE)}catch(t){console.error(t)}}EE(),Ew.exports=gn;var IE=Ew.exports,_y=IE;Sf.createRoot=_y.createRoot,Sf.hydrateRoot=_y.hydrateRoot;function SE(t,e){const n=le.useRef(e);le.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const CC=1;function kC(t){return Object.freeze({__version:CC,map:t})}function RC(t,e){return Object.freeze({...t,...e})}const PE=le.createContext(null),AE=PE.Provider;function zm(){const t=le.useContext(PE);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function xC(t){function e(n,i){const{instance:s,context:o}=t(n).current;return le.useImperativeHandle(i,()=>s),n.children==null?null:Uc.createElement(AE,{value:o},n.children)}return le.forwardRef(e)}function LC(t){function e(n,i){const[s,o]=le.useState(!1),{instance:l}=t(n,o).current;le.useImperativeHandle(i,()=>l),le.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?IE.createPortal(n.children,h):null}return le.forwardRef(e)}function NC(t){function e(n,i){const{instance:s}=t(n).current;return le.useImperativeHandle(i,()=>s),null}return le.forwardRef(e)}function CE(t,e){const n=le.useRef();le.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Um(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function bC(t,e){return function(i,s){const o=zm(),l=t(Um(i,o),o);return SE(o.map,i.attribution),CE(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var _p={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(tP,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,v,k;return k=function(){f=!1,g&&(v.apply(c,g),g=!1)},v=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(k,a),f=!0)},v}function y(r,a,c){var f=a[1],g=a[0],v=f-g;return r===f&&c?r:((r-g)%v+v)%v+g}function w(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function D(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function O(r){return D(r).split(/\s+/)}function U(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function Z(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function A(r,a){return r.replace(N,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var b=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function q(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var P=0;function S(r){var a=+new Date,c=Math.max(0,16-(a-P));return P=a+c,window.setTimeout(r,c)}var I=window.requestAnimationFrame||X("RequestAnimationFrame")||S,x=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function R(r,a,c){if(c&&I===S)r.call(a);else return I.call(window,l(r,a))}function M(r){r&&x.call(window,r)}var C={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:y,falseFn:w,formatNum:T,trim:D,splitWords:O,setOptions:U,getParamString:Z,template:A,isArray:b,indexOf:q,emptyImageUrl:Q,requestFn:I,cancelFn:x,requestAnimFrame:R,cancelAnimFrame:M};function Ve(){}Ve.extend=function(r){var a=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(an(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,k=f._initHooks.length;v<k;v++)f._initHooks[v].call(this)}},a},Ve.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Ve.mergeOptions=function(r){return s(this.prototype.options,r),this},Ve.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function an(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=b(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var nt={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=O(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=O(r);for(var g=arguments.length===1,v=0,k=r.length;v<k;v++)g?this._off(r[v]):this._off(r[v],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,v;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,v=f.length;g<v;g++)f[g].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var B=f[k];this._firingCount&&(B.fn=w,this._events[r]=f=f.slice()),f.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var v=0,k=g.length;v<k;v++){var B=g[v],H=B.fn;B.once&&this.off(r,H,B.ctx),H.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,v=f.length;g<v;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=O(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};nt.addEventListener=nt.on,nt.removeEventListener=nt.clearAllEventListeners=nt.off,nt.addOneTimeEventListener=nt.once,nt.fireEvent=nt.fire,nt.hasEventListeners=nt.listens;var Gt=Ve.extend(nt);function W(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var oe=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(r){return this.clone()._add(J(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(J(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new W(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new W(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(r){r=J(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=J(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=J(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function J(r,a,c){return r instanceof W?r:b(r)?new W(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new W(r.x,r.y):new W(r,a,c)}function ce(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ce.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof W||typeof r[0]=="number"||"x"in r)a=c=J(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof W?r=J(r):r=ve(r),r instanceof ce?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,v=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return v&&k},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,v=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return v&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ve(J(a.x-f,a.y-g),J(c.x+f,c.y+g))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof ce?r:new ce(r,a)}function He(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}He.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof Ee)f=r,g=r;else if(r instanceof He){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(fe(r)||Te(r)):this;return!a&&!c?(this._southWest=new Ee(f.lat,f.lng),this._northEast=new Ee(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new He(new Ee(a.lat-f,a.lng-g),new Ee(c.lat+f,c.lng+g))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Ee||"lat"in r?r=fe(r):r=Te(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof He?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Te(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return v&&k},overlaps:function(r){r=Te(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return v&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Te(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Te(r,a){return r instanceof He?r:new He(r,a)}function Ee(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}Ee.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return kt.distance(this,fe(r))},wrap:function(){return kt.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Te([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof Ee?r:b(r)&&typeof r[0]!="object"?r.length===3?new Ee(r[0],r[1],r[2]):r.length===2?new Ee(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Ee(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new Ee(r,a,c)}var Je={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ce(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new Ee(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var v=r.getSouthWest(),k=r.getNorthEast(),B=new Ee(v.lat-f,v.lng-g),H=new Ee(k.lat-f,k.lng-g);return new He(B,H)}},kt=s({},Je,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,v=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),B=v*v+Math.cos(f)*Math.cos(g)*k*k,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),ir=6378137,Jr={R:ir,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new W(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new Ee((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=ir*Math.PI;return new ce([-r,-r],[r,r])}()};function Xr(r,a,c,f){if(b(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Xr.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new W((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function ei(r,a,c,f){return new Xr(r,a,c,f)}var Si=s({},kt,{code:"EPSG:3857",projection:Jr,transformation:function(){var r=.5/(Math.PI*Jr.R);return ei(r,.5,-r,.5)}()}),Gs=s({},Si,{code:"EPSG:900913"});function Zs(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function rr(r,a){var c="",f,g,v,k,B,H;for(f=0,v=r.length;f<v;f++){for(B=r[f],g=0,k=B.length;g<k;g++)H=B[g],c+=(g?"L":"M")+H.x+" "+H.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var Pi=document.documentElement.style,Ai="ActiveXObject"in window,it=Ai&&!document.addEventListener,V="msLaunchUri"in navigator&&!("documentMode"in document),we=Zt("webkit"),Ft=Zt("android"),yn=Zt("android 2")||Zt("android 3"),Ks=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),es=Ft&&Zt("Google")&&Ks<537&&!("AudioNode"in window),Qs=!!window.opera,Pa=!V&&Zt("chrome"),Ys=Zt("gecko")&&!we&&!Qs&&!Ai,Td=!Pa&&Zt("safari"),gu=Zt("phantom"),Aa="OTransition"in Pi,_u=navigator.platform.indexOf("Win")===0,sr=Ai&&"transition"in Pi,ts="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yn,Js="MozPerspective"in Pi,Ci=!window.L_DISABLE_3D&&(sr||ts||Js)&&!Aa&&!gu,or=typeof orientation<"u"||Zt("mobile"),Xs=or&&we,yu=or&&ts,ar=!window.PointerEvent&&window.MSPointerEvent,Ca=!!(window.PointerEvent||ar),_t="ontouchstart"in window||!!window.TouchEvent,vu=!window.L_NO_TOUCH&&(_t||Ca),ns=or&&Qs,is=or&&Ys,Ed=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Id=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),lr=function(){return!!document.createElement("canvas").getContext}(),ka=!!(document.createElementNS&&Zs("svg").createSVGRect),Sd=!!ka&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),eo=!ka&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),wu=navigator.platform.indexOf("Mac")===0,Tu=navigator.platform.indexOf("Linux")===0;function Zt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ae={ie:Ai,ielt9:it,edge:V,webkit:we,android:Ft,android23:yn,androidStock:es,opera:Qs,chrome:Pa,gecko:Ys,safari:Td,phantom:gu,opera12:Aa,win:_u,ie3d:sr,webkit3d:ts,gecko3d:Js,any3d:Ci,mobile:or,mobileWebkit:Xs,mobileWebkit3d:yu,msPointer:ar,pointer:Ca,touch:vu,touchNative:_t,mobileOpera:ns,mobileGecko:is,retina:Ed,passiveEvents:Id,canvas:lr,svg:ka,vml:eo,inlineSvg:Sd,mac:wu,linux:Tu},Eu=ae.msPointer?"MSPointerDown":"pointerdown",Mn=ae.msPointer?"MSPointerMove":"pointermove",Ra=ae.msPointer?"MSPointerUp":"pointerup",xa=ae.msPointer?"MSPointerCancel":"pointercancel",rs={touchstart:Eu,touchmove:Mn,touchend:Ra,touchcancel:xa},to={touchstart:La,touchmove:vn,touchend:vn,touchcancel:vn},ki={},Iu=!1;function Su(r,a,c){return a==="touchstart"&&ss(),to[a]?(c=to[a].bind(this,c),r.addEventListener(rs[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function Pd(r,a,c){if(!rs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(rs[a],c,!1)}function no(r){ki[r.pointerId]=r}function Pu(r){ki[r.pointerId]&&(ki[r.pointerId]=r)}function io(r){delete ki[r.pointerId]}function ss(){Iu||(document.addEventListener(Eu,no,!0),document.addEventListener(Mn,Pu,!0),document.addEventListener(Ra,io,!0),document.addEventListener(xa,io,!0),Iu=!0)}function vn(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in ki)a.touches.push(ki[c]);a.changedTouches=[a],r(a)}}function La(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&at(a),vn(r,a)}function Ad(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Au=200;function Cu(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var k=Ma(v);if(!(k.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!k.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Au?(f++,f===2&&a(Ad(v))):f=1,c=B}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function ku(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var os=ro(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ri=ro(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Na=Ri==="webkitTransition"||Ri==="OTransition"?Ri+"End":"transitionend";function ba(r){return typeof r=="string"?document.getElementById(r):r}function ur(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Re(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ne(r){var a=r.parentNode;a&&a.removeChild(r)}function zt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function wn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Tn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function as(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=ti(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function re(r,a){if(r.classList!==void 0)for(var c=O(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!as(r,a)){var v=ti(r);xi(r,(v?v+" ":"")+a)}}function Ue(r,a){r.classList!==void 0?r.classList.remove(a):xi(r,D((" "+ti(r)+" ").replace(" "+a+" "," ")))}function xi(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function ti(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Kt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ru(r,a)}function Ru(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function ro(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Li(r,a,c){var f=a||new W(0,0);r.style[os]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(r,a){r._leaflet_pos=a,ae.any3d?Li(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Ni(r){return r._leaflet_pos||new W(0,0)}var Vn,ln,so;if("onselectstart"in document)Vn=function(){me(window,"selectstart",at)},ln=function(){Fe(window,"selectstart",at)};else{var cr=ro(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vn=function(){if(cr){var r=document.documentElement.style;so=r[cr],r[cr]="none"}},ln=function(){cr&&(document.documentElement.style[cr]=so,so=void 0)}}function oo(){me(window,"dragstart",at)}function ao(){Fe(window,"dragstart",at)}var ls,ni;function Da(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(lo(),ls=r,ni=r.style.outlineStyle,r.style.outlineStyle="none",me(window,"keydown",lo))}function lo(){ls&&(ls.style.outlineStyle=ni,ls=void 0,ni=void 0,Fe(window,"keydown",lo))}function xu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function En(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Cd={__proto__:null,TRANSFORM:os,TRANSITION:Ri,TRANSITION_END:Na,get:ba,getStyle:ur,create:Re,remove:Ne,empty:zt,toFront:wn,toBack:Tn,hasClass:as,addClass:re,removeClass:Ue,setClass:xi,getClass:ti,setOpacity:Kt,testProp:ro,setTransform:Li,setPosition:Xe,getPosition:Ni,get disableTextSelection(){return Vn},get enableTextSelection(){return ln},disableImageDrag:oo,enableImageDrag:ao,preventOutline:Da,restoreOutline:lo,getSizedParentNode:xu,getScale:En};function me(r,a,c,f){if(a&&typeof a=="object")for(var g in a)uo(r,g,a[g],c);else{a=O(a);for(var v=0,k=a.length;v<k;v++)uo(r,a[v],c,f)}return this}var Ut="_leaflet_events";function Fe(r,a,c,f){if(arguments.length===1)hr(r),delete r[Ut];else if(a&&typeof a=="object")for(var g in a)us(r,g,a[g],c);else if(a=O(a),arguments.length===2)hr(r,function(B){return q(a,B)!==-1});else for(var v=0,k=a.length;v<k;v++)us(r,a[v],c,f);return this}function hr(r,a){for(var c in r[Ut]){var f=c.split(/\d/)[0];(!a||a(f))&&us(r,f,null,null,c)}}var bi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function uo(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[Ut]&&r[Ut][g])return this;var v=function(B){return c.call(f||r,B||window.event)},k=v;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?v=Su(r,a,v):ae.touch&&a==="dblclick"?v=Cu(r,v):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(bi[a]||a,v,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(v=function(B){B=B||window.event,Fa(r,B)&&k(B)},r.addEventListener(bi[a],v,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,v),r[Ut]=r[Ut]||{},r[Ut][g]=v}function us(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var v=r[Ut]&&r[Ut][g];if(!v)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?Pd(r,a,v):ae.touch&&a==="dblclick"?ku(r,v):"removeEventListener"in r?r.removeEventListener(bi[a]||a,v,!1):r.detachEvent("on"+a,v),r[Ut][g]=null}function De(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Oa(r){return uo(r,"wheel",De),this}function cs(r){return me(r,"mousedown touchstart dblclick contextmenu",De),r._leaflet_disable_click=!0,this}function at(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function ii(r){return at(r),De(r),this}function Ma(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function hs(r,a){if(!a)return new W(r.clientX,r.clientY);var c=En(a),f=c.boundingClientRect;return new W((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var ri=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Va(r){return ae.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/ri:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Fa(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ds={__proto__:null,on:me,off:Fe,stopPropagation:De,disableScrollPropagation:Oa,disableClickPropagation:cs,preventDefault:at,stop:ii,getPropagationPath:Ma,getMousePosition:hs,getWheelDelta:Va,isExternalTarget:Fa,addListener:me,removeListener:Fe},za=Gt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Ni(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ie=Gt.extend({options:{crs:Si,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=U(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ri&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),v=r instanceof W?r:this.latLngToContainerPoint(r),k=v.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(k));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Te(r);var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var v=f.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),g),B=this.project(r.getNorthEast(),g),H=this.unproject(k.add(B).divideBy(2).add(v),g);return{center:H,zoom:g}},fitBounds:function(r,a){if(r=Te(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=J(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new za,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),v=this.getSize(),k=this._zoom;r=fe(r),a=a===void 0?k:a;var B=Math.max(v.x,v.y),H=B*this.getZoomScale(k,a),K=g.distanceTo(f)||1,te=1.42,he=te*te;function Se(lt){var $u=lt?-1:1,YS=lt?H:B,JS=H*H-B*B+$u*he*he*K*K,XS=2*YS*he*K,Nd=JS/XS,l_=Math.sqrt(Nd*Nd+1)-Nd,eP=l_<1e-9?-18:Math.log(l_);return eP}function Bt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function yt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}function Pn(lt){return Bt(lt)/yt(lt)}var Yt=Se(0);function Io(lt){return B*(yt(Yt)/yt(Yt+te*lt))}function GS(lt){return B*(yt(Yt)*Pn(Yt+te*lt)-Bt(Yt))/he}function ZS(lt){return 1-Math.pow(1-lt,1.5)}var KS=Date.now(),o_=(Se(1)-Yt)/te,QS=c.duration?1e3*c.duration:1e3*o_*.8;function a_(){var lt=(Date.now()-KS)/QS,$u=ZS(lt)*o_;lt<=1?(this._flyToFrame=R(a_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(GS($u)/K)),k),this.getScaleZoom(B/Io($u),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),a_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Te(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Te(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),v=this.project(r),k=this.getPixelBounds(),B=ve([k.min.add(c),k.max.subtract(f)]),H=B.getSize();if(!B.contains(v)){this._enforcingBounds=!0;var K=v.subtract(B.getCenter()),te=B.extend(v).getSize().subtract(H);g.x+=K.x<0?-te.x:te.x,g.y+=K.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),v=f.subtract(g);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new Ee(a,c),g=f.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var k=this.getBoundsZoom(g);this.setView(f,v.maxZoom?Math.min(k,v.maxZoom):k)}var B={latlng:f,bounds:g,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(B[H]=r.coords[H]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ne(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Re("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new He(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Te(r),c=J(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),v=this.getMaxZoom(),k=r.getNorthWest(),B=r.getSouthEast(),H=this.getSize().subtract(c),K=ve(this.project(B,f),this.project(k,f)).getSize(),te=ae.any3d?this.options.zoomSnap:1,he=H.x/K.x,Se=H.y/K.y,Bt=a?Math.max(he,Se):Math.min(he,Se);return f=this.getScaleZoom(Bt,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ce(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(J(r),a)},layerPointToLatLng:function(r){var a=J(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Te(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return J(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return J(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(J(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return hs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ba(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,re(r,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ur(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(r.markerPane,"leaflet-zoom-hide"),re(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){Xe(this._mapPane,new W(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Fe:me;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",v=r.target||r.srcElement,k=!1;v;){if(f=this._targets[d(v)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!Fa(v,r)||(c.push(f),g))||v===this._container)break;v=v.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&Da(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var v=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&v.push(c[k]);g=v.concat(g)}if(g.length){a==="contextmenu"&&at(r);var B=g[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=K?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,H,!0),H.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&q(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Ni(this._mapPane)||new W(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),v=new ce(f.subtract(g),f.add(g)),k=this._getBoundsOffset(v,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(f.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ce(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),v=f.max.subtract(r.max),k=this._rebound(g.x,-v.x),B=this._rebound(g.y,-v.y);return new W(k,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=os,f=this._proxy.style[c];Li(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Li(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(R(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function co(r,a){return new Ie(r,a)}var Qt=Ve.extend({options:{position:"topright"},initialize:function(r){U(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return re(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),si=function(r){return new Qt(r)};Ie.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Re("div",a+"control-container",this._container);function f(g,v){var k=a+g+" "+a+v;r[g+v]=Re("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ne(this._controlCorners[r]);Ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Lu=Qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){U(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Qt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Re("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),cs(a),Oa(a);var f=this._section=Re("section",r+"-list");c&&(this._map.on("click",this.collapse,this),me(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Re("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),me(g,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){at(v),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Re("div",r+"-base",f),this._separator=Re("div",r+"-separator",f),this._overlaysList=Re("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zt(this._baseLayersList),zt(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),me(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var v=document.createElement("span");a.appendChild(v),v.appendChild(f),v.appendChild(g);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)a=r[v],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(v=0;v<g.length;v++)this._map.hasLayer(g[v])&&this._map.removeLayer(g[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,me(r,"click",at),this.expand();var a=this;setTimeout(function(){Fe(r,"click",at),a._preventClick=!1})}}),Nu=function(r,a,c){return new Lu(r,a,c)},Di=Qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Re("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var v=Re("a",c,f);return v.innerHTML=r,v.href="#",v.title=a,v.setAttribute("role","button"),v.setAttribute("aria-label",a),cs(v),me(v,"click",ii),me(v,"click",g,this),me(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Ue(this._zoomInButton,a),Ue(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(re(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(re(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var bu=function(r){return new Di(r)},Ua=Qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Re("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Re("div",a,c)),r.imperial&&(this._iScale=Re("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ba=function(r){return new Ua(r)},ja='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ho=Qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?ja+" ":"")+"Leaflet</a>"},initialize:function(r){U(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),cs(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new ho().addTo(this)});var fo=function(r){return new ho(r)};Qt.Layers=Lu,Qt.Zoom=Di,Qt.Scale=Ua,Qt.Attribution=ho,si.layers=Nu,si.zoom=bu,si.scale=Ba,si.attribution=fo;var un=Ve.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});un.addTo=function(r,a){return r.addHandler(a,this),this};var Du={Events:nt},oi=ae.touch?"touchstart mousedown":"mousedown",Fn=Gt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){U(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(me(this._dragStartTarget,oi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fn._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,oi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!as(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Fn._dragging===this&&this.finishDrag();return}if(!(Fn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Fn._dragging=this,this._preventOutline&&Da(this._element),oo(),Vn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=xu(this._element);this._startPoint=new W(a.clientX,a.clientY),this._startPos=Ni(this._element),this._parentScale=En(c);var f=r.type==="mousedown";me(document,f?"mousemove":"touchmove",this._onMove,this),me(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new W(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,at(r),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),ao(),ln();var a=this._moved&&this._moving;this._moving=!1,Fn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Ha(r,a,c){var f,g=[1,4,2,8],v,k,B,H,K,te,he,Se;for(v=0,te=r.length;v<te;v++)r[v]._code=j(r[v],a);for(B=0;B<4;B++){for(he=g[B],f=[],v=0,te=r.length,k=te-1;v<te;k=v++)H=r[v],K=r[k],H._code&he?K._code&he||(Se=z(K,H,he,a,c),Se._code=j(Se,a),f.push(Se)):(K._code&he&&(Se=z(K,H,he,a,c),Se._code=j(Se,a),f.push(Se)),f.push(H));r=f}return r}function Wa(r,a){var c,f,g,v,k,B,H,K,te;if(!r||r.length===0)throw new Error("latlngs not passed");be(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var he=fe([0,0]),Se=Te(r),Bt=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());Bt<1700&&(he=po(r));var yt=r.length,Pn=[];for(c=0;c<yt;c++){var Yt=fe(r[c]);Pn.push(a.project(fe([Yt.lat-he.lat,Yt.lng-he.lng])))}for(B=H=K=0,c=0,f=yt-1;c<yt;f=c++)g=Pn[c],v=Pn[f],k=g.y*v.x-v.y*g.x,H+=(g.x+v.x)*k,K+=(g.y+v.y)*k,B+=k*3;B===0?te=Pn[0]:te=[H/B,K/B];var Io=a.unproject(J(te));return fe([Io.lat+he.lat,Io.lng+he.lng])}function po(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var v=fe(r[g]);a+=v.lat,c+=v.lng,f++}return fe([a/f,c/f])}var mo={__proto__:null,clipPolygon:Ha,polygonCenter:Wa,centroid:po};function Rt(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=p(r,c),r=dr(r,c),r}function qa(r,a,c){return Math.sqrt(ge(r,a,c,!0))}function Ou(r,a,c){return ge(r,a,c)}function dr(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var v,k=[];for(v=0;v<c;v++)g[v]&&k.push(r[v]);return k}function u(r,a,c,f,g){var v=0,k,B,H;for(B=f+1;B<=g-1;B++)H=ge(r[B],r[f],r[g],!0),H>v&&(k=B,v=H);v>c&&(a[k]=1,u(r,a,c,f,k),u(r,a,c,k,g))}function p(r,a){for(var c=[r[0]],f=1,g=0,v=r.length;f<v;f++)ee(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<v-1&&c.push(r[v-1]),c}var _;function E(r,a,c,f,g){var v=f?_:j(r,c),k=j(a,c),B,H,K;for(_=k;;){if(!(v|k))return[r,a];if(v&k)return!1;B=v||k,H=z(r,a,B,c,g),K=j(H,c),B===v?(r=H,v=K):(a=H,k=K)}}function z(r,a,c,f,g){var v=a.x-r.x,k=a.y-r.y,B=f.min,H=f.max,K,te;return c&8?(K=r.x+v*(H.y-r.y)/k,te=H.y):c&4?(K=r.x+v*(B.y-r.y)/k,te=B.y):c&2?(K=H.x,te=r.y+k*(H.x-r.x)/v):c&1&&(K=B.x,te=r.y+k*(B.x-r.x)/v),new W(K,te,g)}function j(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function ee(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function ge(r,a,c,f){var g=a.x,v=a.y,k=c.x-g,B=c.y-v,H=k*k+B*B,K;return H>0&&(K=((r.x-g)*k+(r.y-v)*B)/H,K>1?(g=c.x,v=c.y):K>0&&(g+=k*K,v+=B*K)),k=r.x-g,B=r.y-v,f?k*k+B*B:new W(g,v)}function be(r){return!b(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Oe(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),be(r)}function rt(r,a){var c,f,g,v,k,B,H,K;if(!r||r.length===0)throw new Error("latlngs not passed");be(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var te=fe([0,0]),he=Te(r),Se=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());Se<1700&&(te=po(r));var Bt=r.length,yt=[];for(c=0;c<Bt;c++){var Pn=fe(r[c]);yt.push(a.project(fe([Pn.lat-te.lat,Pn.lng-te.lng])))}for(c=0,f=0;c<Bt-1;c++)f+=yt[c].distanceTo(yt[c+1])/2;if(f===0)K=yt[0];else for(c=0,v=0;c<Bt-1;c++)if(k=yt[c],B=yt[c+1],g=k.distanceTo(B),v+=g,v>f){H=(v-f)/g,K=[B.x-H*(B.x-k.x),B.y-H*(B.y-k.y)];break}var Yt=a.unproject(J(K));return fe([Yt.lat+te.lat,Yt.lng+te.lng])}var In={__proto__:null,simplify:Rt,pointToSegmentDistance:qa,closestPointOnSegment:Ou,clipSegment:E,_getEdgeIntersection:z,_getBitCode:j,_sqClosestPointOnSegment:ge,isFlat:be,_flat:Oe,polylineCenter:rt},zn={project:function(r){return new W(r.lng,r.lat)},unproject:function(r){return new Ee(r.y,r.x)},bounds:new ce([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,v=Math.sqrt(1-g*g),k=v*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),v/2);return f=-c*Math.log(Math.max(B,1e-10)),new W(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),v=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(v),B=0,H=.1,K;B<15&&Math.abs(H)>1e-7;B++)K=g*Math.sin(k),K=Math.pow((1-K)/(1+K),g/2),H=Math.PI/2-2*Math.atan(v*K)-k,k+=H;return new Ee(k*a,r.x*a/c)}},ai={__proto__:null,LonLat:zn,Mercator:Sn,SphericalMercator:Jr},go=s({},kt,{code:"EPSG:3395",projection:Sn,transformation:function(){var r=.5/(Math.PI*Sn.R);return ei(r,.5,-r,.5)}()}),_o=s({},kt,{code:"EPSG:4326",projection:zn,transformation:ei(1/180,1,-1/180,.5)}),PS=s({},Je,{projection:zn,transformation:ei(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});Je.Earth=kt,Je.EPSG3395=go,Je.EPSG3857=Si,Je.EPSG900913=Gs,Je.EPSG4326=_o,Je.Simple=PS;var Un=Gt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?b(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yo=Un.extend({initialize:function(r,a){U(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),AS=function(r,a){return new yo(r,a)},Oi=yo.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),yo.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),yo.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new He;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),CS=function(r,a){return new Oi(r,a)},vo=Ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){U(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=J(f),v=J(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ae.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function kS(r){return new vo(r)}var $a=vo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof $a.imagePath!="string"&&($a.imagePath=this._detectIconPath()),(this.options.imagePath||$a.imagePath)+vo.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var v=f.exec(c);return v&&v[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Re("div","leaflet-default-icon-path",document.body),a=ur(r,"background-image")||ur(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Bg=un.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Fn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,v=Ni(a._icon),k=c.getPixelBounds(),B=c.getPixelOrigin(),H=ve(k.min._subtract(B).add(g),k.max._subtract(B).subtract(g));if(!H.contains(v)){var K=J((Math.max(H.max.x,v.x)-H.max.x)/(k.max.x-H.max.x)-(Math.min(H.min.x,v.x)-H.min.x)/(k.min.x-H.min.x),(Math.max(H.max.y,v.y)-H.max.y)/(k.max.y-H.max.y)-(Math.min(H.min.y,v.y)-H.min.y)/(k.min.y-H.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),Xe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=R(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=Ni(a._icon),g=a._map.layerPointToLatLng(f);c&&Xe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Mu=Un.extend({options:{icon:new $a,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){U(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),re(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),v=!1;g!==this._shadow&&(this._removeShadow(),v=!0),g&&(re(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),Ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ne(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Kt(this._icon,r),this._shadow&&Kt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?J(a.iconSize):J(0,0),f=a.iconAnchor?J(a.iconAnchor):J(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function RS(r,a){return new Mu(r,a)}var fr=Un.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return U(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vu=fr.extend({options:{fill:!0,radius:10},initialize:function(r,a){U(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return fr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ce(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xS(r,a){return new Vu(r,a)}var kd=Vu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),U(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new He(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:fr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===kt.distance){var g=Math.PI/180,v=this._mRadius/kt.R/g,k=c.project([a+v,r]),B=c.project([a-v,r]),H=k.add(B).divideBy(2),K=c.unproject(H).lat,te=Math.acos((Math.cos(v*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(te)||te===0)&&(te=v/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:H.x-c.project([K,r-te]).x,this._radiusY=H.y-k.y}else{var he=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(he).x}this._updateBounds()}});function LS(r,a,c){return new kd(r,a,c)}var Mi=fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){U(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=ge,g,v,k=0,B=this._parts.length;k<B;k++)for(var H=this._parts[k],K=1,te=H.length;K<te;K++){g=H[K-1],v=H[K];var he=f(r,g,v,!0);he<a&&(a=he,c=f(r,g,v))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new He,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return be(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=be(r),f=0,g=r.length;f<g;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new W(r,r);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof Ee,g=r.length,v,k;if(f){for(k=[],v=0;v<g;v++)k[v]=this._map.latLngToLayerPoint(r[v]),c.extend(k[v]);a.push(k)}else for(v=0;v<g;v++)this._projectLatlngs(r[v],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,v,k,B,H;for(c=0,g=0,v=this._rings.length;c<v;c++)for(H=this._rings[c],f=0,k=H.length;f<k-1;f++)B=E(H[f],H[f+1],r,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==H[f+1]||f===k-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Rt(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,v,k,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,v=this._parts.length;c<v;c++)for(B=this._parts[c],f=0,k=B.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&qa(r,B[g],B[f])<=H)return!0;return!1}});function NS(r,a){return new Mi(r,a)}Mi._flat=Oe;var wo=Mi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Mi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof Ee&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Mi.prototype._setLatLngs.call(this,r),be(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return be(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new W(a,a);if(r=new ce(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,v;f<g;f++)v=Ha(this._rings[f],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,v,k,B,H,K;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,H=this._parts.length;v<H;v++)for(c=this._parts[v],k=0,K=c.length,B=K-1;k<K;B=k++)f=c[k],g=c[B],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Mi.prototype._containsPoint.call(this,r,!0)}});function bS(r,a){return new wo(r,a)}var Vi=Oi.extend({initialize:function(r,a){U(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=b(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var k=Fu(r,v);return k?(k.feature=Bu(r),k.defaultOptions=k.options,this.resetStyle(k),v.onEachFeature&&v.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Fu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],v=a&&a.pointToLayer,k=a&&a.coordsToLatLng||Rd,B,H,K,te;if(!f&&!c)return null;switch(c.type){case"Point":return B=k(f),jg(v,r,B,a);case"MultiPoint":for(K=0,te=f.length;K<te;K++)B=k(f[K]),g.push(jg(v,r,B,a));return new Oi(g);case"LineString":case"MultiLineString":return H=zu(f,c.type==="LineString"?0:1,k),new Mi(H,a);case"Polygon":case"MultiPolygon":return H=zu(f,c.type==="Polygon"?1:2,k),new wo(H,a);case"GeometryCollection":for(K=0,te=c.geometries.length;K<te;K++){var he=Fu({geometry:c.geometries[K],type:"Feature",properties:r.properties},a);he&&g.push(he)}return new Oi(g);case"FeatureCollection":for(K=0,te=c.features.length;K<te;K++){var Se=Fu(c.features[K],a);Se&&g.push(Se)}return new Oi(g);default:throw new Error("Invalid GeoJSON object.")}}function jg(r,a,c,f){return r?r(a,c):new Mu(c,f&&f.markersInheritOptions&&f)}function Rd(r){return new Ee(r[1],r[0],r[2])}function zu(r,a,c){for(var f=[],g=0,v=r.length,k;g<v;g++)k=a?zu(r[g],a-1,c):(c||Rd)(r[g]),f.push(k);return f}function xd(r,a){return r=fe(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function Uu(r,a,c,f){for(var g=[],v=0,k=r.length;v<k;v++)g.push(a?Uu(r[v],be(r[v])?0:a-1,c,f):xd(r[v],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function To(r,a){return r.feature?s({},r.feature,{geometry:a}):Bu(a)}function Bu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Ld={toGeoJSON:function(r){return To(this,{type:"Point",coordinates:xd(this.getLatLng(),r)})}};Mu.include(Ld),kd.include(Ld),Vu.include(Ld),Mi.include({toGeoJSON:function(r){var a=!be(this._latlngs),c=Uu(this._latlngs,a?1:0,!1,r);return To(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),wo.include({toGeoJSON:function(r){var a=!be(this._latlngs),c=a&&!be(this._latlngs[0]),f=Uu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),To(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),yo.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),To(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var v=g.toGeoJSON(r);if(c)f.push(v.geometry);else{var k=Bu(v);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?To(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Hg(r,a){return new Vi(r,a)}var DS=Hg,ju=Un.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Te(a),U(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&wn(this._image),this},bringToBack:function(){return this._map&&Tn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Te(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Re("img");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Li(this._image,c,a)},_reset:function(){var r=this._image,a=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();Xe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),OS=function(r,a,c){return new ju(r,a,c)},Wg=ju.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Re("video");if(re(a,"leaflet-image-layer"),this._zoomAnimated&&re(a,"leaflet-zoom-animated"),this.options.className&&re(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var k=Re("source");k.src=this._url[v],a.appendChild(k)}}});function MS(r,a,c){return new Wg(r,a,c)}var qg=ju.extend({_initImage:function(){var r=this._image=this._url;re(r,"leaflet-image-layer"),this._zoomAnimated&&re(r,"leaflet-zoom-animated"),this.options.className&&re(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function VS(r,a,c){return new qg(r,a,c)}var li=Un.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof Ee||b(r))?(this._latlng=fe(r),U(this,a)):(U(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Kt(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Kt(this._container,0),this._removeTimeout=setTimeout(l(Ne,void 0,this._container),200)):Ne(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wn(this._container),this},bringToBack:function(){return this._map&&Tn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Oi){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Un.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(U(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Hu=li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,li.prototype.openOn.call(this,r)},onAdd:function(r){li.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fr||this._source.on("preclick",De))},onRemove:function(r){li.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fr||this._source.off("preclick",De))},getEvents:function(){var r=li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Re("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Re("div",r+"-content-wrapper",a);if(this._contentNode=Re("div",r+"-content",c),cs(a),Oa(this._contentNode),me(a,"contextmenu",De),this._tipContainer=Re("div",r+"-tip-container",a),this._tip=Re("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Re("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',me(f,"click",function(g){at(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,v="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",re(r,v)):Ue(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Xe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(ur(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new W(this._containerLeft,-c-this._containerBottom);g._add(Ni(this._container));var v=r.layerPointToContainerPoint(g),k=J(this.options.autoPanPadding),B=J(this.options.autoPanPaddingTopLeft||k),H=J(this.options.autoPanPaddingBottomRight||k),K=r.getSize(),te=0,he=0;v.x+f+H.x>K.x&&(te=v.x+f-K.x+H.x),v.x-te-B.x<0&&(te=v.x-B.x),v.y+c+H.y>K.y&&(he=v.y+c-K.y+H.y),v.y-he-B.y<0&&(he=v.y-B.y),(te||he)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([te,he]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),FS=function(r,a){return new Hu(r,a)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(r,a,c){return this._initOverlay(Hu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Un.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Hu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Oi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){ii(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Wu=li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){li.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){li.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=li.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,v=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(r),B=this.options.direction,H=g.offsetWidth,K=g.offsetHeight,te=J(this.options.offset),he=this._getAnchor();B==="top"?(a=H/2,c=K):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=K/2):B==="right"?(a=0,c=K/2):B==="left"?(a=H,c=K/2):k.x<v.x?(B="right",a=0,c=K/2):(B="left",a=H+(te.x+he.x)*2,c=K/2),r=r.subtract(J(a,c,!0)).add(te).add(he),Ue(g,"leaflet-tooltip-right"),Ue(g,"leaflet-tooltip-left"),Ue(g,"leaflet-tooltip-top"),Ue(g,"leaflet-tooltip-bottom"),re(g,"leaflet-tooltip-"+B),Xe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Kt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zS=function(r,a){return new Wu(r,a)};Ie.include({openTooltip:function(r,a,c){return this._initOverlay(Wu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Un.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Oi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(me(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),me(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var $g=vo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(zt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=J(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function US(r){return new $g(r)}vo.Default=$a;var Ga=Un.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){U(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ne(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof W?r:new W(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,v;f<g;f++)v=a[f].style.zIndex,a[f]!==this._container&&v&&(c=r(c,+v));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Kt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var v=Math.min(1,(r-g.loaded)/200);Kt(g.el,v),v<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ne(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ne(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),v=Math.floor(a/2),k=c-1,B=new W(+g,+v);B.z=+k;var H=this._tileCoordsToKey(B),K=this._tiles[H];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),k>f?this._retainParent(g,v,k,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var v=2*a;v<2*a+2;v++){var k=new W(g,v);k.z=c+1;var B=this._tileCoordsToKey(k),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<f&&this._retainChildren(g,v,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var v=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||v)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Li(r.el,g,f):Xe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),v=a.getSize().divideBy(f*2);return new ce(g.subtract(v),g.add(v))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),v=g.getCenter(),k=[],B=this.options.keepBuffer,H=new ce(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var te=this._tiles[K].coords;(te.z!==this._tileZoom||!H.contains(new W(te.x,te.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var he=g.min.y;he<=g.max.y;he++)for(var Se=g.min.x;Se<=g.max.x;Se++){var Bt=new W(Se,he);if(Bt.z=this._tileZoom,!!this._isValidTile(Bt)){var yt=this._tiles[this._tileCoordsToKey(Bt)];yt?yt.current=!0:k.push(Bt)}}if(k.sort(function(Yt,Io){return Yt.distanceTo(v)-Io.distanceTo(v)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Pn=document.createDocumentFragment();for(Se=0;Se<k.length;Se++)this._addTile(k[Se],Pn);this._level.el.appendChild(Pn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Te(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),v=a.unproject(f,r.z),k=a.unproject(g,r.z);return[v,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new He(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new W(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ne(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){re(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,ae.ielt9&&this.options.opacity<1&&Kt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&R(l(this._tileReady,this,r,null,g)),Xe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Kt(c.el,0),M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(re(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new W(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ce(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function BS(r){return new Ga(r)}var Eo=Ga.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=U(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return me(c,"load",l(this._tileOnLoad,this,a,c)),me(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return A(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ae.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Q;var c=this._tiles[r].coords;Ne(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Q),Ga.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return Ga.prototype._tileReady.call(this,r,a,c)}});function Gg(r,a){return new Eo(r,a)}var Zg=Eo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=U(this,a);var g=a.detectRetina&&ae.retina?2:1,v=this.getTileSize();c.width=v.x*g,c.height=v.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Eo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,v=f.max,k=(this._wmsVersion>=1.3&&this._crs===_o?[g.y,g.x,v.y,v.x]:[g.x,g.y,v.x,v.y]).join(","),B=Eo.prototype.getTileUrl.call(this,r);return B+Z(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function jS(r,a){return new Zg(r,a)}Eo.WMS=Zg,Gg.wms=jS;var Fi=Un.extend({options:{padding:.1},initialize:function(r){U(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),v=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ae.any3d?Li(this._container,v,c):Xe(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ce(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kg=Fi.extend({options:{tolerance:0},getEvents:function(){var r=Fi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");me(r,"mousemove",this._onMouseMove,this),me(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Ne(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ae.retina?2:1;Xe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,v,k=r._parts,B=k.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(f=0,g=k[c].length;f<g;f++)v=k[c][f],H[f?"lineTo":"moveTo"](v.x,v.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(re(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Qg(r){return ae.canvas?new Kg(r):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),HS={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Za("shape");re(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Za("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ne(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Za("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=b(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Za("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){wn(r._container)},_bringToBack:function(r){Tn(r._container)}},qu=ae.vml?Za:Zs,Ka=Fi.extend({_initContainer:function(){this._container=qu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ne(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),Xe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=qu("path");r.options.className&&re(a,r.options.className),r.options.interactive&&re(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ne(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,rr(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,v)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){wn(r._path)},_bringToBack:function(r){Tn(r._path)}});ae.vml&&Ka.include(HS);function Yg(r){return ae.svg||ae.vml?new Ka(r):null}Ie.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Qg(r)||Yg(r)}});var Jg=wo.extend({initialize:function(r,a){wo.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Te(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function WS(r,a){return new Jg(r,a)}Ka.create=qu,Ka.pointsToPath=rr,Vi.geometryToLayer=Fu,Vi.coordsToLatLng=Rd,Vi.coordsToLatLngs=zu,Vi.latLngToCoords=xd,Vi.latLngsToCoords=Uu,Vi.getFeature=To,Vi.asFeature=Bu,Ie.mergeOptions({boxZoom:!0});var Xg=un.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vn(),oo(),this._startPoint=this._map.mouseEventToContainerPoint(r),me(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ce(this._point,this._startPoint),c=a.getSize();Xe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ne(this._box),Ue(this._container,"leaflet-crosshair")),ln(),ao(),Fe(document,{contextmenu:ii,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new He(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",Xg),Ie.mergeOptions({doubleClickZoom:!0});var e_=un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ie.addInitHook("addHandler","doubleClickZoom",e_),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var t_=un.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Fn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Te(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,v=(f+a+c)%r-a-c,k=Math.abs(g+c)<Math.abs(v+c)?g:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,B=g.multiplyBy(k/v),H=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,H),te=B.multiplyBy(K/H),he=K/(c.inertiaDeceleration*k),Se=te.multiplyBy(-he/2).round();!Se.x&&!Se.y?a.fire("moveend"):(Se=a._limitOffset(Se,a.options.maxBounds),R(function(){a.panBy(Se,{duration:he,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",t_),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var n_=un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),me(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=J(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(J(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;ii(r)}}});Ie.addInitHook("addHandler","keyboard",n_),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var i_=un.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Va(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),ii(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=c?Math.ceil(g/c)*c:g,k=r._limitZoom(a+(this._delta>0?v:-v))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});Ie.addInitHook("addHandler","scrollWheelZoom",i_);var qS=600;Ie.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var r_=un.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new W(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",at),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),qS),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Fe(document,"touchend",at),Fe(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new W(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ie.addInitHook("addHandler","tapHold",r_),Ie.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var s_=un.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),at(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var v=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&v.x===0&&v.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(k,this,!0),at(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",s_),Ie.BoxZoom=Xg,Ie.DoubleClickZoom=e_,Ie.Drag=t_,Ie.Keyboard=n_,Ie.ScrollWheelZoom=i_,Ie.TapHold=r_,Ie.TouchZoom=s_,n.Bounds=ce,n.Browser=ae,n.CRS=Je,n.Canvas=Kg,n.Circle=kd,n.CircleMarker=Vu,n.Class=Ve,n.Control=Qt,n.DivIcon=$g,n.DivOverlay=li,n.DomEvent=ds,n.DomUtil=Cd,n.Draggable=Fn,n.Evented=Gt,n.FeatureGroup=Oi,n.GeoJSON=Vi,n.GridLayer=Ga,n.Handler=un,n.Icon=vo,n.ImageOverlay=ju,n.LatLng=Ee,n.LatLngBounds=He,n.Layer=Un,n.LayerGroup=yo,n.LineUtil=In,n.Map=Ie,n.Marker=Mu,n.Mixin=Du,n.Path=fr,n.Point=W,n.PolyUtil=mo,n.Polygon=wo,n.Polyline=Mi,n.Popup=Hu,n.PosAnimation=za,n.Projection=ai,n.Rectangle=Jg,n.Renderer=Fi,n.SVG=Ka,n.SVGOverlay=qg,n.TileLayer=Eo,n.Tooltip=Wu,n.Transformation=Xr,n.Util=C,n.VideoOverlay=Wg,n.bind=l,n.bounds=ve,n.canvas=Qg,n.circle=LS,n.circleMarker=xS,n.control=si,n.divIcon=US,n.extend=s,n.featureGroup=CS,n.geoJSON=Hg,n.geoJson=DS,n.gridLayer=BS,n.icon=kS,n.imageOverlay=OS,n.latLng=fe,n.latLngBounds=Te,n.layerGroup=AS,n.map=co,n.marker=RS,n.point=J,n.polygon=bS,n.polyline=NS,n.popup=FS,n.rectangle=WS,n.setOptions=U,n.stamp=d,n.svg=Yg,n.svgOverlay=VS,n.tileLayer=Gg,n.tooltip=zS,n.transformation=ei,n.version=i,n.videoOverlay=MS;var $S=window.L;n.noConflict=function(){return window.L=$S,this},window.L=n})})(_p,_p.exports);var ou=_p.exports;const DC=cw(ou);function Bm(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function jm(t,e){return e==null?function(i,s){const o=le.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=le.useRef();o.current||(o.current=t(i,s));const l=le.useRef(i),{instance:h}=o.current;return le.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function OC(t,e){le.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function kE(t){return function(n){const i=zm(),s=t(Um(n,i),i);return SE(i.map,n.attribution),CE(s.current,n.eventHandlers),OC(s.current,i),s}}function MC(t,e){const n=jm(t,e),i=kE(n);return xC(i)}function VC(t,e){const n=jm(t),i=bC(n,e);return LC(i)}function FC(t,e){const n=jm(t,e),i=kE(n);return NC(i)}function zC(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function RE(){return zm().map}function UC(t){const e=RE();return le.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function yp(){return yp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yp.apply(this,arguments)}function BC({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:m,...y},w){const[T]=le.useState({className:s,id:o,style:h}),[D,O]=le.useState(null);le.useImperativeHandle(w,()=>(D==null?void 0:D.map)??null,[D]);const U=le.useCallback(N=>{if(N!==null&&D===null){const A=new ou.Map(N,y);n!=null&&m!=null?A.setView(n,m):t!=null&&A.fitBounds(t,e),d!=null&&A.whenReady(d),O(kC(A))}},[]);le.useEffect(()=>()=>{D==null||D.map.remove()},[D]);const Z=D?Uc.createElement(AE,{value:D},i):l??null;return Uc.createElement("div",yp({},T,{ref:U}),Z)}const jC=le.forwardRef(BC),HC=MC(function({position:e,...n},i){const s=new ou.Marker(e,n);return Bm(s,RC(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),WC=VC(function(e,n){const i=new ou.Popup(e,n.overlayContainer);return Bm(i,n)},function(e,n,{position:i},s){le.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function d(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),yy=FC(function({url:e,...n},i){const s=new ou.TileLayer(e,Um(n,i));return Bm(s,i)},function(e,n,i){zC(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),qC=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$C=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,y=o>>2,w=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,D=m&63;d||(D=64,l||(T=64)),i.push(n[y],n[w],n[T],n[D])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$C(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||w==null)throw new GC;const T=o<<2|h>>4;if(i.push(T),m!==64){const D=h<<4&240|m>>2;if(i.push(D),w!==64){const O=m<<6&192|w;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZC=function(t){const e=xE(t);return LE.encodeByteArray(e,!0)},hh=function(t){return ZC(t).replace(/\./g,"")},NE=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=()=>KC().__FIREBASE_DEFAULTS__,YC=()=>{if(typeof process>"u"||typeof vy>"u")return;const t=vy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NE(t[1]);return e&&JSON.parse(e)},Qh=()=>{try{return qC()||QC()||YC()||JC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bE=t=>{var e,n;return(n=(e=Qh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},DE=t=>{const e=bE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},OE=()=>{var t;return(t=Qh())==null?void 0:t.config},ME=t=>{var e;return(e=Qh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[hh(JSON.stringify(n)),hh(JSON.stringify(l)),""].join(".")}const Il={};function e1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?t.emulator.push(e):t.prod.push(e);return t}function t1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wy=!1;function Wm(t,e){if(typeof window>"u"||typeof document>"u"||!Bs(window.location.host)||Il[t]===e||Il[t]||wy)return;Il[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=e1().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,D){T.setAttribute("width","24"),T.setAttribute("id",D),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{wy=!0,l()},T}function y(T,D){T.setAttribute("id",D),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=t1(i),D=n("text"),O=document.getElementById(D)||document.createElement("span"),U=n("learnmore"),Z=document.getElementById(U)||document.createElement("a"),N=n("preprendIcon"),A=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const b=T.element;h(b),y(Z,U);const q=m();d(A,N),b.append(A,O,Z,q),document.body.appendChild(b)}o?(O.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function i1(){var e;const t=(e=Qh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o1(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function a1(){return!i1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zE(){try{return typeof indexedDB=="object"}catch{return!1}}function UE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function l1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="FirebaseError";class On extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=u1,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,js.prototype.create)}}class js{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?c1(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new On(s,h,i)}}function c1(t,e){return t.replace(h1,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const h1=/\{\$([^}]+)}/g;function d1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yi(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Ty(o)&&Ty(l)){if(!Yi(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function f1(t,e){const n=new p1(t,e);return n.subscribe.bind(n)}class p1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");m1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=of),s.error===void 0&&(s.error=of),s.complete===void 0&&(s.complete=of);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=1e3,_1=2,y1=4*60*60*1e3,v1=.5;function Ey(t,e=g1,n=_1){const i=e*Math.pow(n,t),s=Math.round(v1*i*(Math.random()-.5)*2);return Math.min(y1,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Dn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E1(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:T1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T1(t){return t===ms?void 0:t}function E1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new w1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const S1={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},P1=Ae.INFO,A1={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},C1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=A1[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yh{constructor(e){this.name=e,this._logLevel=P1,this._logHandler=C1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const k1=(t,e)=>e.some(n=>t instanceof n);let Iy,Sy;function R1(){return Iy||(Iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x1(){return Sy||(Sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BE=new WeakMap,vp=new WeakMap,jE=new WeakMap,af=new WeakMap,qm=new WeakMap;function L1(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Dr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&BE.set(n,t)}).catch(()=>{}),qm.set(e,t),e}function N1(t){if(vp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});vp.set(t,e)}let wp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b1(t){wp=t(wp)}function D1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(lf(this),e,...n);return jE.set(i,e.sort?e.sort():[e]),Dr(i)}:x1().includes(t)?function(...e){return t.apply(lf(this),e),Dr(BE.get(this))}:function(...e){return Dr(t.apply(lf(this),e))}}function O1(t){return typeof t=="function"?D1(t):(t instanceof IDBTransaction&&N1(t),k1(t,R1())?new Proxy(t,wp):t)}function Dr(t){if(t instanceof IDBRequest)return L1(t);if(af.has(t))return af.get(t);const e=O1(t);return e!==t&&(af.set(t,e),qm.set(e,t)),e}const lf=t=>qm.get(t);function HE(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=Dr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(Dr(l.result),d.oldVersion,d.newVersion,Dr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const M1=["get","getKey","getAll","getAllKeys","count"],V1=["put","add","delete","clear"],uf=new Map;function Py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=V1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||M1.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return uf.set(e,o),o}b1(t=>({...t,get:(e,n,i)=>Py(e,n)||t.get(e,n,i),has:(e,n)=>!!Py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",Ay="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Yh("@firebase/app"),U1="@firebase/app-compat",B1="@firebase/analytics-compat",j1="@firebase/analytics",H1="@firebase/app-check-compat",W1="@firebase/app-check",q1="@firebase/auth",$1="@firebase/auth-compat",G1="@firebase/database",Z1="@firebase/data-connect",K1="@firebase/database-compat",Q1="@firebase/functions",Y1="@firebase/functions-compat",J1="@firebase/installations",X1="@firebase/installations-compat",ek="@firebase/messaging",tk="@firebase/messaging-compat",nk="@firebase/performance",ik="@firebase/performance-compat",rk="@firebase/remote-config",sk="@firebase/remote-config-compat",ok="@firebase/storage",ak="@firebase/storage-compat",lk="@firebase/firestore",uk="@firebase/ai",ck="@firebase/firestore-compat",hk="firebase",dk="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",fk={[Tp]:"fire-core",[U1]:"fire-core-compat",[j1]:"fire-analytics",[B1]:"fire-analytics-compat",[W1]:"fire-app-check",[H1]:"fire-app-check-compat",[q1]:"fire-auth",[$1]:"fire-auth-compat",[G1]:"fire-rtdb",[Z1]:"fire-data-connect",[K1]:"fire-rtdb-compat",[Q1]:"fire-fn",[Y1]:"fire-fn-compat",[J1]:"fire-iid",[X1]:"fire-iid-compat",[ek]:"fire-fcm",[tk]:"fire-fcm-compat",[nk]:"fire-perf",[ik]:"fire-perf-compat",[rk]:"fire-rc",[sk]:"fire-rc-compat",[ok]:"fire-gcs",[ak]:"fire-gcs-compat",[lk]:"fire-fst",[ck]:"fire-fst-compat",[uk]:"fire-vertex","fire-js":"fire-js",[hk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,pk=new Map,Ip=new Map;function Cy(t,e){try{t.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jn(t){const e=t.name;if(Ip.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of dh.values())Cy(n,t);for(const n of pk.values())Cy(n,t);return!0}function Kr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new js("app","Firebase",mk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=dk;function WE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ep,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(n||(n=OE()),!n)throw Or.create("no-options");const o=dh.get(s);if(o){if(Yi(n,o.options)&&Yi(i,o.config))return o;throw Or.create("duplicate-app",{appName:s})}const l=new I1(s);for(const d of Ip.values())l.addComponent(d);const h=new gk(n,i,l);return dh.set(s,h),h}function Jh(t=Ep){const e=dh.get(t);if(!e&&t===Ep&&OE())return WE();if(!e)throw Or.create("no-app",{appName:t});return e}function on(t,e,n){let i=fk[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(l.join(" "));return}Jn(new Dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="firebase-heartbeat-database",yk=1,$l="firebase-heartbeat-store";let cf=null;function qE(){return cf||(cf=HE(_k,yk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),cf}async function vk(t){try{const n=(await qE()).transaction($l),i=await n.objectStore($l).get($E(t));return await n.done,i}catch(e){if(e instanceof On)Ji.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ji.warn(n.message)}}}async function ky(t,e){try{const i=(await qE()).transaction($l,"readwrite");await i.objectStore($l).put(e,$E(t)),await i.done}catch(n){if(n instanceof On)Ji.warn(n.message);else{const i=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ji.warn(i.message)}}}function $E(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=1024,Tk=30;class Ek{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Sk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ry();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Tk){const l=Pk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ji.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:i,unsentEntries:s}=Ik(this._heartbeatsCache.heartbeats),o=hh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ji.warn(n),""}}}function Ry(){return new Date().toISOString().substring(0,10)}function Ik(t,e=wk){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),xy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zE()?UE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xy(t){return hh(JSON.stringify({version:2,heartbeats:t})).length}function Pk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){Jn(new Dn("platform-logger",e=>new F1(e),"PRIVATE")),Jn(new Dn("heartbeat",e=>new Ek(e),"PRIVATE")),on(Tp,Ay,t),on(Tp,Ay,"esm2020"),on("fire-js","")}Ak("");function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ck=GE,ZE=new js("auth","Firebase",GE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Yh("@firebase/auth");function kk(t,...e){fh.logLevel<=Ae.WARN&&fh.warn(`Auth (${Hs}): ${t}`,...e)}function Rc(t,...e){fh.logLevel<=Ae.ERROR&&fh.error(`Auth (${Hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,...e){throw Gm(t,...e)}function Kn(t,...e){return Gm(t,...e)}function $m(t,e,n){const i={...Ck(),[e]:n};return new js("auth","Firebase",i).create(e,{appName:t.name})}function Ss(t){return $m(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rk(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&wi(t,"argument-error"),$m(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ZE.create(t,...e)}function pe(t,e,...n){if(!t)throw Gm(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rc(e),new Error(e)}function Xi(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function xk(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xk()||FE()||"connection"in navigator)?navigator.onLine:!0}function Nk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=n1()||s1()}get(){return Lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t,e){Xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ok=new lu(3e4,6e4);function Km(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ya(t,e,n,i,s={}){return QE(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=au({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:d,...o};return r1()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(m.credentials="include"),KE.fetch()(await YE(t,t.config.apiHost,n,h),m)})}async function QE(t,e,n){t._canInitEmulator=!1;const i={...bk,...e};try{const s=new Vk(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw cc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw cc(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw $m(t,y,m);wi(t,y)}}catch(s){if(s instanceof On)throw s;wi(t,"network-request-failed",{message:String(s)})}}async function Mk(t,e,n,i,s={}){const o=await ya(t,e,n,i,s);return"mfaPendingCredential"in o&&wi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function YE(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Zm(t.config,s):`${t.config.apiScheme}://${s}`;return Dk.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class Vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Kn(this.auth,"network-request-failed")),Ok.get())})}}function cc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Kn(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){return ya(t,"POST","/v1/accounts:delete",e)}async function ph(t,e){return ya(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zk(t,e=!1){const n=tt(t),i=await n.getIdToken(e),s=Qm(i);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Sl(hf(s.auth_time)),issuedAtTime:Sl(hf(s.iat)),expirationTime:Sl(hf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function hf(t){return Number(t)*1e3}function Qm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const s=NE(n);return s?JSON.parse(s):(Rc("Failed to decode base64 JWT payload"),null)}catch(s){return Rc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ny(t){const e=Qm(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof On&&Uk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Uk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(t){var w;const e=t.auth,n=await t.getIdToken(),i=await Gl(t,ph(e,{idToken:n}));pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?JE(s.providerUserInfo):[],l=Hk(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),m=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Pp(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function jk(t){const e=tt(t);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hk(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function JE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e){const n=await QE(t,{},async()=>{const i=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await YE(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&Bs(t.emulatorConfig.host)&&(d.credentials="include"),KE.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qk(t,e){return ya(t,"POST","/v2/accounts:revokeToken",Km(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=Ny(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Wk(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Go;return i&&(pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Bk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gl(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zk(this,e)}reload(){return jk(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await mh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await Gl(this,Fk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,m=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:D,providerData:O,stsTokenManager:U}=n;pe(w&&U,e,"internal-error");const Z=Go.fromJSON(this.name,U);pe(typeof w=="string",e,"internal-error"),mr(i,e.name),mr(s,e.name),pe(typeof T=="boolean",e,"internal-error"),pe(typeof D=="boolean",e,"internal-error"),mr(o,e.name),mr(l,e.name),mr(h,e.name),mr(d,e.name),mr(m,e.name),mr(y,e.name);const N=new qn({uid:w,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:D,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:Z,createdAt:m,lastLoginAt:y});return O&&Array.isArray(O)&&(N.providerData=O.map(A=>({...A}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,n,i=!1){const s=new Go;s.updateFromServerResponse(n);const o=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await mh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?JE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Go;h.updateFromIdToken(i);const d=new qn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Pp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function qi(t){Xi(t instanceof Function,"Expected a class definition");let e=by.get(t);return e?(Xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,by.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XE.type="NONE";const Dy=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=xc(this.userKey,s.apiKey,o),this.fullPersistenceKey=xc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?qn._fromGetAccountInfoResponse(this.auth,n,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Zo(qi(Dy),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||qi(Dy);const l=xc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const y=await m._get(l);if(y){let w;if(typeof y=="string"){const T=await ph(e,{idToken:y}).catch(()=>{});if(!T)break;w=await qn._fromGetAccountInfoResponse(e,T,y)}else w=qn._fromJSON(e,y);m!==o&&(h=w),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Zo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Zo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s0(e))return"Blackberry";if(o0(e))return"Webos";if(t0(e))return"Safari";if((e.includes("chrome/")||n0(e))&&!e.includes("edge/"))return"Chrome";if(r0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function e0(t=Vt()){return/firefox\//i.test(t)}function t0(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n0(t=Vt()){return/crios\//i.test(t)}function i0(t=Vt()){return/iemobile/i.test(t)}function r0(t=Vt()){return/android/i.test(t)}function s0(t=Vt()){return/blackberry/i.test(t)}function o0(t=Vt()){return/webos/i.test(t)}function Ym(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $k(t=Vt()){var e;return Ym(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Gk(){return o1()&&document.documentMode===10}function a0(t=Vt()){return Ym(t)||r0(t)||o0(t)||s0(t)||/windows phone/i.test(t)||i0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e=[]){let n;switch(t){case"Browser":n=Oy(Vt());break;case"Worker":n=`${Oy(Vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(t,e={}){return ya(t,"GET","/v2/passwordPolicy",Km(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=6;class Yk{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Qk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new My(this),this.idTokenSubscription=new My(this),this.beforeStateQueue=new Zk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Ss(this));const n=e?tt(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Kk(this),n=new Yk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new js("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await qk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&kk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xh(t){return tt(t)}class My{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xk(t){Jm=t}function eR(t){return Jm.loadJS(t)}function tR(){return Jm.gapiScript}function nR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e){const n=Kr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Yi(o,e??{}))return s;wi(s,"already-initialized")}return n.initialize({options:e})}function rR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sR(t,e,n){const i=Xh(t);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=u0(e),{host:l,port:h}=oR(e),d=h===null?"":`:${h}`,m={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(Yi(m,i.config.emulator)&&Yi(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Bs(l)?(Hm(`${o}//${l}${d}`),Wm("Auth",!0)):aR()}function u0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oR(t){const e=u0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Vy(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Vy(l)}}}function Vy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e){return Mk(t,"POST","/v1/accounts:signInWithIdp",Km(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="http://localhost";class bs extends c0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new bs(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ko(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ko(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ko(e,n)}buildRequest(){const e={requestUri:lR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends uu{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Bi.credential(n,i)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends uu{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends uu{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Er.credential(n,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await qn._fromIdTokenResponse(e,i,s),l=Fy(i);return new aa({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Fy(i);return new aa({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Fy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends On{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new gh(e,n,i,s)}}function h0(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(t,o,e,i):o})}async function uR(t,e,n=!1){const i=await Gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return aa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e,n=!1){const{auth:i}=t;if(kn(i.app))return Promise.reject(Ss(i));const s="reauthenticate";try{const o=await Gl(t,h0(i,s,e,t),n);pe(o.idToken,i,"internal-error");const l=Qm(o.idToken);pe(l,i,"internal-error");const{sub:h}=l;return pe(t.uid===h,i,"user-mismatch"),aa._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&wi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e,n=!1){if(kn(t.app))return Promise.reject(Ss(t));const i="signIn",s=await h0(t,i,e),o=await aa._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}function dR(t,e,n,i){return tt(t).onIdTokenChanged(e,n,i)}function fR(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function pR(t,e,n,i){return tt(t).onAuthStateChanged(e,n,i)}function mR(t){return tt(t).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=1e3,_R=10;class f0 extends d0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);Gk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_R):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}f0.type="LOCAL";const yR=f0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends d0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}p0.type="SESSION";const m0=p0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await vR(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=eg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return window}function TR(t){mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(){return typeof mi().WorkerGlobalScope<"u"&&typeof mi().importScripts=="function"}async function ER(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function SR(){return g0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="firebaseLocalStorageDb",PR=1,yh="firebaseLocalStorage",y0="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function td(t,e){return t.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function AR(){const t=indexedDB.deleteDatabase(_0);return new cu(t).toPromise()}function Ap(){const t=indexedDB.open(_0,PR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yh,{keyPath:y0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await AR(),e(await Ap()))})})}async function zy(t,e,n){const i=td(t,!0).put({[y0]:e,value:n});return new cu(i).toPromise()}async function CR(t,e){const n=td(t,!1).get(e),i=await new cu(n).toPromise();return i===void 0?null:i.value}function Uy(t,e){const n=td(t,!0).delete(e);return new cu(n).toPromise()}const kR=800,RR=3;class v0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>RR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ed._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await zy(e,_h,"1"),await Uy(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>zy(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>CR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=td(s,!1).getAll();return new cu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v0.type="LOCAL";const xR=v0;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e){return e?qi(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends c0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LR(t){return hR(t.auth,new tg(t),t.bypassAuthState)}function NR(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),cR(n,new tg(t),t.bypassAuthState)}async function bR(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),uR(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LR;case"linkViaPopup":case"linkViaRedirect":return bR;case"reauthViaPopup":case"reauthViaRedirect":return NR;default:wi(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new lu(2e3,1e4);async function OR(t,e,n){if(kn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const i=Xh(t);Rk(t,e,Xm);const s=w0(i,n);return new vs(i,"signInViaPopup",e,s).executeNotNull()}class vs extends T0{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,vs.currentPopupAction&&vs.currentPopupAction.cancel(),vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DR.get())};e()}}vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="pendingRedirect",Lc=new Map;class VR extends T0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const i=await FR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FR(t,e){const n=BR(e),i=UR(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function zR(t,e){Lc.set(t._key(),e)}function UR(t){return qi(t._redirectPersistence)}function BR(t){return xc(MR,t.config.apiKey,t.name)}async function jR(t,e,n=!1){if(kn(t.app))return Promise.reject(Ss(t));const i=Xh(t),s=w0(i,e),l=await new VR(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=10*60*1e3;class WR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!E0(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(By(e))}saveEventToCache(e){this.cachedEventUids.add(By(e)),this.lastProcessedEventTime=Date.now()}}function By(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function E0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e={}){return ya(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZR=/^https?/;async function KR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $R(t);for(const n of e)try{if(QR(n))return}catch{}wi(t,"unauthorized-domain")}function QR(t){const e=Sp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!ZR.test(n))return!1;if(GR.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new lu(3e4,6e4);function jy(){const t=mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JR(t){return new Promise((e,n)=>{var s,o,l;function i(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),n(Kn(t,"network-request-failed"))},timeout:YR.get()})}if((o=(s=mi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=mi().gapi)!=null&&l.load)i();else{const h=nR("iframefcb");return mi()[h]=()=>{gapi.load?i():n(Kn(t,"network-request-failed"))},eR(`${tR()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Nc=null,e})}let Nc=null;function XR(t){return Nc=Nc||JR(t),Nc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new lu(5e3,15e3),tx="__/auth/iframe",nx="emulator/auth/iframe",ix={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sx(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zm(e,nx):`https://${t.config.authDomain}/${tx}`,i={apiKey:e.apiKey,appName:t.name,v:Hs},s=rx.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${au(i).slice(1)}`}async function ox(t){const e=await XR(t),n=mi().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:sx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ix,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Kn(t,"network-request-failed"),h=mi().setTimeout(()=>{o(l)},ex.get());function d(){mi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lx=500,ux=600,cx="_blank",hx="http://localhost";class Hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dx(t,e,n,i=lx,s=ux){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...ax,width:i.toString(),height:s.toString(),top:o,left:l},m=Vt().toLowerCase();n&&(h=n0(m)?cx:n),e0(m)&&(e=e||hx,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[D,O])=>`${T}${D}=${O},`,"");if($k(m)&&h!=="_self")return fx(e||"",h),new Hy(null);const w=window.open(e||"",h,y);pe(w,t,"popup-blocked");try{w.focus()}catch{}return new Hy(w)}function fx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="__/auth/handler",mx="emulator/auth/handler",gx=encodeURIComponent("fac");async function Wy(t,e,n,i,s,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Hs,eventId:s};if(e instanceof Xm){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",d1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof uu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),m=d?`#${gx}=${encodeURIComponent(d)}`:"";return`${_x(t)}?${au(h).slice(1)}${m}`}function _x({config:t}){return t.emulator?Zm(t,mx):`https://${t.authDomain}/${px}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="webStorageSupport";class yx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m0,this._completeRedirectFn=jR,this._overrideRedirectResult=zR}async _openPopup(e,n,i,s){var l;Xi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Wy(e,n,i,Sp(),s);return dx(e,o,eg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Wy(e,n,i,Sp(),s);return TR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Xi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ox(e),i=new WR(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(df,{type:df},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[df];o!==void 0&&n(!!o),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a0()||t0()||Ym()}}const vx=yx;var qy="@firebase/auth",$y="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ex(t){Jn(new Dn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l0(t)},m=new Jk(i,s,o,d);return rR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Jn(new Dn("auth-internal",e=>{const n=Xh(e.getProvider("auth").getImmediate());return(i=>new wx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(qy,$y,Tx(t)),on(qy,$y,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=5*60,Sx=ME("authIdTokenMaxAge")||Ix;let Gy=null;const Px=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Sx)return;const s=n==null?void 0:n.token;Gy!==s&&(Gy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ax(t=Jh()){const e=Kr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iR(t,{popupRedirectResolver:vx,persistence:[xR,yR,m0]}),i=ME("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Px(o.toString());fR(n,l,()=>l(n.currentUser)),dR(n,h=>l(h))}}const s=bE("auth");return s&&sR(n,`http://${s}`),n}function Cx(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Xk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Kn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",Cx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ex("Browser");var kx="firebase",Rx="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(kx,Rx,"app");var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,I0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function I(){}I.prototype=S.prototype,P.F=S.prototype,P.prototype=new I,P.prototype.constructor=P,P.D=function(x,R,M){for(var C=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)C[Ve-2]=arguments[Ve];return S.prototype[R].apply(x,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,S,I){I||(I=0);const x=Array(16);if(typeof S=="string")for(var R=0;R<16;++R)x[R]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(R=0;R<16;++R)x[R]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=P.g[0],I=P.g[1],R=P.g[2];let M=P.g[3],C;C=S+(M^I&(R^M))+x[0]+3614090360&4294967295,S=I+(C<<7&4294967295|C>>>25),C=M+(R^S&(I^R))+x[1]+3905402710&4294967295,M=S+(C<<12&4294967295|C>>>20),C=R+(I^M&(S^I))+x[2]+606105819&4294967295,R=M+(C<<17&4294967295|C>>>15),C=I+(S^R&(M^S))+x[3]+3250441966&4294967295,I=R+(C<<22&4294967295|C>>>10),C=S+(M^I&(R^M))+x[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=M+(R^S&(I^R))+x[5]+1200080426&4294967295,M=S+(C<<12&4294967295|C>>>20),C=R+(I^M&(S^I))+x[6]+2821735955&4294967295,R=M+(C<<17&4294967295|C>>>15),C=I+(S^R&(M^S))+x[7]+4249261313&4294967295,I=R+(C<<22&4294967295|C>>>10),C=S+(M^I&(R^M))+x[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=M+(R^S&(I^R))+x[9]+2336552879&4294967295,M=S+(C<<12&4294967295|C>>>20),C=R+(I^M&(S^I))+x[10]+4294925233&4294967295,R=M+(C<<17&4294967295|C>>>15),C=I+(S^R&(M^S))+x[11]+2304563134&4294967295,I=R+(C<<22&4294967295|C>>>10),C=S+(M^I&(R^M))+x[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=M+(R^S&(I^R))+x[13]+4254626195&4294967295,M=S+(C<<12&4294967295|C>>>20),C=R+(I^M&(S^I))+x[14]+2792965006&4294967295,R=M+(C<<17&4294967295|C>>>15),C=I+(S^R&(M^S))+x[15]+1236535329&4294967295,I=R+(C<<22&4294967295|C>>>10),C=S+(R^M&(I^R))+x[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=M+(I^R&(S^I))+x[6]+3225465664&4294967295,M=S+(C<<9&4294967295|C>>>23),C=R+(S^I&(M^S))+x[11]+643717713&4294967295,R=M+(C<<14&4294967295|C>>>18),C=I+(M^S&(R^M))+x[0]+3921069994&4294967295,I=R+(C<<20&4294967295|C>>>12),C=S+(R^M&(I^R))+x[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=M+(I^R&(S^I))+x[10]+38016083&4294967295,M=S+(C<<9&4294967295|C>>>23),C=R+(S^I&(M^S))+x[15]+3634488961&4294967295,R=M+(C<<14&4294967295|C>>>18),C=I+(M^S&(R^M))+x[4]+3889429448&4294967295,I=R+(C<<20&4294967295|C>>>12),C=S+(R^M&(I^R))+x[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=M+(I^R&(S^I))+x[14]+3275163606&4294967295,M=S+(C<<9&4294967295|C>>>23),C=R+(S^I&(M^S))+x[3]+4107603335&4294967295,R=M+(C<<14&4294967295|C>>>18),C=I+(M^S&(R^M))+x[8]+1163531501&4294967295,I=R+(C<<20&4294967295|C>>>12),C=S+(R^M&(I^R))+x[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=M+(I^R&(S^I))+x[2]+4243563512&4294967295,M=S+(C<<9&4294967295|C>>>23),C=R+(S^I&(M^S))+x[7]+1735328473&4294967295,R=M+(C<<14&4294967295|C>>>18),C=I+(M^S&(R^M))+x[12]+2368359562&4294967295,I=R+(C<<20&4294967295|C>>>12),C=S+(I^R^M)+x[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=M+(S^I^R)+x[8]+2272392833&4294967295,M=S+(C<<11&4294967295|C>>>21),C=R+(M^S^I)+x[11]+1839030562&4294967295,R=M+(C<<16&4294967295|C>>>16),C=I+(R^M^S)+x[14]+4259657740&4294967295,I=R+(C<<23&4294967295|C>>>9),C=S+(I^R^M)+x[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=M+(S^I^R)+x[4]+1272893353&4294967295,M=S+(C<<11&4294967295|C>>>21),C=R+(M^S^I)+x[7]+4139469664&4294967295,R=M+(C<<16&4294967295|C>>>16),C=I+(R^M^S)+x[10]+3200236656&4294967295,I=R+(C<<23&4294967295|C>>>9),C=S+(I^R^M)+x[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=M+(S^I^R)+x[0]+3936430074&4294967295,M=S+(C<<11&4294967295|C>>>21),C=R+(M^S^I)+x[3]+3572445317&4294967295,R=M+(C<<16&4294967295|C>>>16),C=I+(R^M^S)+x[6]+76029189&4294967295,I=R+(C<<23&4294967295|C>>>9),C=S+(I^R^M)+x[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=M+(S^I^R)+x[12]+3873151461&4294967295,M=S+(C<<11&4294967295|C>>>21),C=R+(M^S^I)+x[15]+530742520&4294967295,R=M+(C<<16&4294967295|C>>>16),C=I+(R^M^S)+x[2]+3299628645&4294967295,I=R+(C<<23&4294967295|C>>>9),C=S+(R^(I|~M))+x[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=M+(I^(S|~R))+x[7]+1126891415&4294967295,M=S+(C<<10&4294967295|C>>>22),C=R+(S^(M|~I))+x[14]+2878612391&4294967295,R=M+(C<<15&4294967295|C>>>17),C=I+(M^(R|~S))+x[5]+4237533241&4294967295,I=R+(C<<21&4294967295|C>>>11),C=S+(R^(I|~M))+x[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=M+(I^(S|~R))+x[3]+2399980690&4294967295,M=S+(C<<10&4294967295|C>>>22),C=R+(S^(M|~I))+x[10]+4293915773&4294967295,R=M+(C<<15&4294967295|C>>>17),C=I+(M^(R|~S))+x[1]+2240044497&4294967295,I=R+(C<<21&4294967295|C>>>11),C=S+(R^(I|~M))+x[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=M+(I^(S|~R))+x[15]+4264355552&4294967295,M=S+(C<<10&4294967295|C>>>22),C=R+(S^(M|~I))+x[6]+2734768916&4294967295,R=M+(C<<15&4294967295|C>>>17),C=I+(M^(R|~S))+x[13]+1309151649&4294967295,I=R+(C<<21&4294967295|C>>>11),C=S+(R^(I|~M))+x[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=M+(I^(S|~R))+x[11]+3174756917&4294967295,M=S+(C<<10&4294967295|C>>>22),C=R+(S^(M|~I))+x[2]+718787259&4294967295,R=M+(C<<15&4294967295|C>>>17),C=I+(M^(R|~S))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(R+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+M&4294967295}i.prototype.v=function(P,S){S===void 0&&(S=P.length);const I=S-this.blockSize,x=this.C;let R=this.h,M=0;for(;M<S;){if(R==0)for(;M<=I;)s(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<S;)if(x[R++]=P.charCodeAt(M++),R==this.blockSize){s(this,x),R=0;break}}else for(;M<S;)if(x[R++]=P[M++],R==this.blockSize){s(this,x),R=0;break}}this.h=R,this.o+=S},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var I=P.length-8;I<P.length;++I)P[I]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,I=0;I<4;++I)for(let x=0;x<32;x+=8)P[S++]=this.g[I]>>>x&255;return P};function o(P,S){var I=h;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=S(P)}function l(P,S){this.h=S;const I=[];let x=!0;for(let R=P.length-1;R>=0;R--){const M=P[R]|0;x&&M==S||(I[R]=M,x=!1)}this.g=I}var h={};function d(P){return-128<=P&&P<128?o(P,function(S){return new l([S|0],S<0?-1:0)}):new l([P|0],P<0?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return w;if(P<0)return Z(m(-P));const S=[];let I=1;for(let x=0;P>=I;x++)S[x]=P/I|0,I*=4294967296;return new l(S,0)}function y(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return Z(y(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=m(Math.pow(S,8));let x=w;for(let M=0;M<P.length;M+=8){var R=Math.min(8,P.length-M);const C=parseInt(P.substring(M,M+R),S);R<8?(R=m(Math.pow(S,R)),x=x.j(R).add(m(C))):(x=x.j(I),x=x.add(m(C)))}return x}var w=d(0),T=d(1),D=d(16777216);t=l.prototype,t.m=function(){if(U(this))return-Z(this).m();let P=0,S=1;for(let I=0;I<this.g.length;I++){const x=this.i(I);P+=(x>=0?x:4294967296+x)*S,S*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(O(this))return"0";if(U(this))return"-"+Z(this).toString(P);const S=m(Math.pow(P,6));var I=this;let x="";for(;;){const R=q(I,S).g;I=N(I,R.j(S));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(P);if(I=R,O(I))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function O(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function U(P){return P.h==-1}t.l=function(P){return P=N(this,P),U(P)?-1:O(P)?0:1};function Z(P){const S=P.g.length,I=[];for(let x=0;x<S;x++)I[x]=~P.g[x];return new l(I,~P.h).add(T)}t.abs=function(){return U(this)?Z(this):this},t.add=function(P){const S=Math.max(this.g.length,P.g.length),I=[];let x=0;for(let R=0;R<=S;R++){let M=x+(this.i(R)&65535)+(P.i(R)&65535),C=(M>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);x=C>>>16,M&=65535,C&=65535,I[R]=C<<16|M}return new l(I,I[I.length-1]&-2147483648?-1:0)};function N(P,S){return P.add(Z(S))}t.j=function(P){if(O(this)||O(P))return w;if(U(this))return U(P)?Z(this).j(Z(P)):Z(Z(this).j(P));if(U(P))return Z(this.j(Z(P)));if(this.l(D)<0&&P.l(D)<0)return m(this.m()*P.m());const S=this.g.length+P.g.length,I=[];for(var x=0;x<2*S;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(let R=0;R<P.g.length;R++){const M=this.i(x)>>>16,C=this.i(x)&65535,Ve=P.i(R)>>>16,an=P.i(R)&65535;I[2*x+2*R]+=C*an,A(I,2*x+2*R),I[2*x+2*R+1]+=M*an,A(I,2*x+2*R+1),I[2*x+2*R+1]+=C*Ve,A(I,2*x+2*R+1),I[2*x+2*R+2]+=M*Ve,A(I,2*x+2*R+2)}for(P=0;P<S;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=S;P<2*S;P++)I[P]=0;return new l(I,0)};function A(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function b(P,S){this.g=P,this.h=S}function q(P,S){if(O(S))throw Error("division by zero");if(O(P))return new b(w,w);if(U(P))return S=q(Z(P),S),new b(Z(S.g),Z(S.h));if(U(S))return S=q(P,Z(S)),new b(Z(S.g),S.h);if(P.g.length>30){if(U(P)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var I=T,x=S;x.l(P)<=0;)I=Q(I),x=Q(x);var R=X(I,1),M=X(x,1);for(x=X(x,2),I=X(I,2);!O(x);){var C=M.add(x);C.l(P)<=0&&(R=R.add(I),M=C),x=X(x,1),I=X(I,1)}return S=N(P,R.j(S)),new b(R,S)}for(R=w;P.l(S)>=0;){for(I=Math.max(1,Math.floor(P.m()/S.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=m(I),C=M.j(S);U(C)||C.l(P)>0;)I-=x,M=m(I),C=M.j(S);O(M)&&(M=T),R=R.add(M),P=N(P,C)}return new b(R,P)}t.B=function(P){return q(this,P).h},t.and=function(P){const S=Math.max(this.g.length,P.g.length),I=[];for(let x=0;x<S;x++)I[x]=this.i(x)&P.i(x);return new l(I,this.h&P.h)},t.or=function(P){const S=Math.max(this.g.length,P.g.length),I=[];for(let x=0;x<S;x++)I[x]=this.i(x)|P.i(x);return new l(I,this.h|P.h)},t.xor=function(P){const S=Math.max(this.g.length,P.g.length),I=[];for(let x=0;x<S;x++)I[x]=this.i(x)^P.i(x);return new l(I,this.h^P.h)};function Q(P){const S=P.g.length+1,I=[];for(let x=0;x<S;x++)I[x]=P.i(x)<<1|P.i(x-1)>>>31;return new l(I,P.h)}function X(P,S){const I=S>>5;S%=32;const x=P.g.length-I,R=[];for(let M=0;M<x;M++)R[M]=S>0?P.i(M+I)>>>S|P.i(M+I+1)<<32-S:P.i(M+I);return new l(R,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,I0=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=y,Mr=l}).apply(typeof Zy<"u"?Zy:typeof self<"u"?self:typeof window<"u"?window:{});var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S0,cl,P0,bc,Cp,A0,C0,k0;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hc=="object"&&hc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var z=u[E];if(!(z in _))break e;_=_[z]}u=u[u.length-1],E=_[u],p=p(E),p!=E&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var _=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&_.push([E,p[E]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,_){return u.call.apply(u.bind,arguments)}function m(u,p,_){return m=d,m.apply(null,arguments)}function y(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function w(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(E,z,j){for(var ee=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];return p.prototype[z].apply(E,ee)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function D(u){const p=u.length;if(p>0){const _=Array(p);for(let E=0;E<p;E++)_[E]=u[E];return _}return[]}function O(u,p){for(let E=1;E<arguments.length;E++){const z=arguments[E];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const j=z.length||0;u.length=_+j;for(let ee=0;ee<j;ee++)u[_+ee]=z[ee]}else u.push(z)}}class U{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(u){l.setTimeout(()=>{throw u},0)}function N(){var u=P;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class A{constructor(){this.h=this.g=null}add(p,_){const E=b.get();E.set(p,_),this.h?this.h.next=E:this.g=E,this.h=E}}var b=new U(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,X=!1,P=new A,S=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(I)}};function I(){for(var u;u=N();){try{u.h.call(u.g)}catch(_){Z(_)}var p=b;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}X=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,p),l.removeEventListener("test",_,p)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function Ve(u,p){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}w(Ve,R),Ve.prototype.init=function(u,p){const _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var an="closure_listenable_"+(Math.random()*1e6|0),nt=0;function Gt(u,p,_,E,z){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!E,this.ha=z,this.key=++nt,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oe(u,p,_){for(const E in u)p.call(_,u[E],E,u)}function J(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function ce(u){const p={};for(const _ in u)p[_]=u[_];return p}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(u,p){let _,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(_ in E)u[_]=E[_];for(let j=0;j<ve.length;j++)_=ve[j],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,p,_,E,z){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const ee=fe(u,p,E,z);return ee>-1?(p=u[ee],_||(p.fa=!1)):(p=new Gt(p,this.src,j,!!E,z),p.fa=_,u.push(p)),p};function Ee(u,p){const _=p.type;if(_ in u.g){var E=u.g[_],z=Array.prototype.indexOf.call(E,p,void 0),j;(j=z>=0)&&Array.prototype.splice.call(E,z,1),j&&(W(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function fe(u,p,_,E){for(let z=0;z<u.length;++z){const j=u[z];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==E)return z}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),kt={};function ir(u,p,_,E,z){if(Array.isArray(p)){for(let j=0;j<p.length;j++)ir(u,p[j],_,E,z);return null}return _=Ai(_),u&&u[an]?u.J(p,_,h(E)?!!E.capture:!1,z):Jr(u,p,_,!1,E,z)}function Jr(u,p,_,E,z,j){if(!p)throw Error("Invalid event type");const ee=h(z)?!!z.capture:!!z;let ge=rr(u);if(ge||(u[Je]=ge=new Te(u)),_=ge.add(p,_,E,ee,j),_.proxy)return _;if(E=Xr(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)M||(z=ee),z===void 0&&(z=!1),u.addEventListener(p.toString(),E,z);else if(u.attachEvent)u.attachEvent(Gs(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Xr(){function u(_){return p.call(u.src,u.listener,_)}const p=Zs;return u}function ei(u,p,_,E,z){if(Array.isArray(p))for(var j=0;j<p.length;j++)ei(u,p[j],_,E,z);else E=h(E)?!!E.capture:!!E,_=Ai(_),u&&u[an]?(u=u.i,j=String(p).toString(),j in u.g&&(p=u.g[j],_=fe(p,_,E,z),_>-1&&(W(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[j],u.h--)))):u&&(u=rr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=fe(p,_,E,z)),(_=u>-1?p[u]:null)&&Si(_))}function Si(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[an])Ee(p.i,u);else{var _=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(_,E,u.capture):p.detachEvent?p.detachEvent(Gs(_),E):p.addListener&&p.removeListener&&p.removeListener(E),(_=rr(p))?(Ee(_,u),_.h==0&&(_.src=null,p[Je]=null)):W(u)}}}function Gs(u){return u in kt?kt[u]:kt[u]="on"+u}function Zs(u,p){if(u.da)u=!0;else{p=new Ve(p,this);const _=u.listener,E=u.ha||u.src;u.fa&&Si(u),u=_.call(E,p)}return u}function rr(u){return u=u[Je],u instanceof Te?u:null}var Pi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ai(u){return typeof u=="function"?u:(u[Pi]||(u[Pi]=function(p){return u.handleEvent(p)}),u[Pi])}function it(){x.call(this),this.i=new Te(this),this.M=this,this.G=null}w(it,x),it.prototype[an]=!0,it.prototype.removeEventListener=function(u,p,_,E){ei(this,u,p,_,E)};function V(u,p){var _,E=u.G;if(E)for(_=[];E;E=E.G)_.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new R(p,u);else if(p instanceof R)p.target=p.target||u;else{var z=p;p=new R(E,u),He(p,z)}z=!0;let j,ee;if(_)for(ee=_.length-1;ee>=0;ee--)j=p.g=_[ee],z=we(j,E,!0,p)&&z;if(j=p.g=u,z=we(j,E,!0,p)&&z,z=we(j,E,!1,p)&&z,_)for(ee=0;ee<_.length;ee++)j=p.g=_[ee],z=we(j,E,!1,p)&&z}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const _=u.g[p];for(let E=0;E<_.length;E++)W(_[E]);delete u.g[p],u.h--}}this.G=null},it.prototype.J=function(u,p,_,E){return this.i.add(String(u),p,!1,_,E)},it.prototype.K=function(u,p,_,E){return this.i.add(String(u),p,!0,_,E)};function we(u,p,_,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let z=!0;for(let j=0;j<p.length;++j){const ee=p[j];if(ee&&!ee.da&&ee.capture==_){const ge=ee.listener,be=ee.ha||ee.src;ee.fa&&Ee(u.i,ee),z=ge.call(be,E)!==!1&&z}}return z&&!E.defaultPrevented}function Ft(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:l.setTimeout(u,p||0)}function yn(u){u.g=Ft(()=>{u.g=null,u.i&&(u.i=!1,yn(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ks extends x{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:yn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(u){x.call(this),this.h=u,this.g={}}w(es,x);var Qs=[];function Pa(u){oe(u.g,function(p,_){this.g.hasOwnProperty(_)&&Si(p)},u),u.g={}}es.prototype.N=function(){es.Z.N.call(this),Pa(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ys=l.JSON.stringify,Td=l.JSON.parse,gu=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Aa(){}function _u(){}var sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ts(){R.call(this,"d")}w(ts,R);function Js(){R.call(this,"c")}w(Js,R);var Ci={},or=null;function Xs(){return or=or||new it}Ci.Ia="serverreachability";function yu(u){R.call(this,Ci.Ia,u)}w(yu,R);function ar(u){const p=Xs();V(p,new yu(p))}Ci.STAT_EVENT="statevent";function Ca(u,p){R.call(this,Ci.STAT_EVENT,u),this.stat=p}w(Ca,R);function _t(u){const p=Xs();V(p,new Ca(p,u))}Ci.Ja="timingevent";function vu(u,p){R.call(this,Ci.Ja,u),this.size=p}w(vu,R);function ns(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function Ed(u,p,_,E,z,j){u.info(function(){if(u.g)if(j){var ee="",ge=j.split("&");for(let Oe=0;Oe<ge.length;Oe++){var be=ge[Oe].split("=");if(be.length>1){const rt=be[0];be=be[1];const In=rt.split("_");ee=In.length>=2&&In[1]=="type"?ee+(rt+"="+be+"&"):ee+(rt+"=redacted&")}}}else ee=null;else ee=j;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+p+`
`+_+`
`+ee})}function Id(u,p,_,E,z,j,ee){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+p+`
`+_+`
`+j+" "+ee})}function lr(u,p,_,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Sd(u,_)+(E?" "+E:"")})}function ka(u,p){u.info(function(){return"TIMEOUT: "+p})}is.prototype.info=function(){};function Sd(u,p){if(!u.g)return p;if(!p)return null;try{const j=JSON.parse(p);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var _=j[u];if(!(_.length<2)){var E=_[1];if(Array.isArray(E)&&!(E.length<1)){var z=E[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ee=1;ee<E.length;ee++)E[ee]=""}}}}return Ys(j)}catch{return p}}var eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tu;function Zt(){}w(Zt,Aa),Zt.prototype.g=function(){return new XMLHttpRequest},Tu=new Zt;function ae(u){return encodeURIComponent(String(u))}function Eu(u){var p=1;u=u.split(":");const _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function Mn(u,p,_,E){this.j=u,this.i=p,this.l=_,this.S=E||1,this.V=new es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ra}function Ra(){this.i=null,this.g="",this.h=!1}var xa={},rs={};function to(u,p,_){u.M=1,u.A=Ue(zt(p)),u.u=_,u.R=!0,ki(u,null)}function ki(u,p){u.F=Date.now(),no(u),u.B=zt(u.A);var _=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),ao(_.i,"t",E),u.C=0,_=u.j.L,u.h=new Ra,u.g=Wa(u.j,_?p:null,!u.u),u.P>0&&(u.O=new Ks(m(u.Y,u,u.g),u.P)),p=u.V,_=u.g,E=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Qs[0]=z.toString()),z=Qs);for(let j=0;j<z.length;j++){const ee=ir(_,z[j],E||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.J?ce(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),ar(),Ed(u.i,u.v,u.B,u.l,u.S,u.u)}Mn.prototype.ba=function(u){u=u.target;const p=this.O;p&&ri(u)==3?p.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const ge=ri(this.g),be=this.g.ya(),Oe=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Va(this.g)))){this.K||ge!=4||be==7||(be==8||Oe<=0?ar(3):ar(2)),io(this);var p=this.g.ca();this.X=p;var _=Iu(this);if(this.o=p==200,Id(this.i,this.v,this.B,this.l,this.S,ge,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,z=this.g;if((E=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var j=E;break t}}j=null}if(u=j)lr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,La(this,u);else{this.o=!1,this.m=3,_t(12),vn(this),ss(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<_.length;)if(rt=Pd(this,_),rt==rs){ge==4&&(this.m=4,_t(14),u=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==xa){this.m=4,_t(15),lr(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else lr(this.i,this.l,rt,null),La(this,rt);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||_.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)lr(this.i,this.l,_,"[Invalid Chunked Response]"),vn(this),ss(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ja(ee),ee.P=!0,_t(11))}}else lr(this.i,this.l,_,null),La(this,_);ge==4&&vn(this),this.o&&!this.K&&(ge==4?un(this.j,this):(this.o=!1,no(this)))}else Fa(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),vn(this),ss(this)}}}catch{}finally{}};function Iu(u){if(!Su(u))return u.g.la();const p=Va(u.g);if(p==="")return"";let _="";const E=p.length,z=ri(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vn(u),ss(u),"";u.h.i=new l.TextDecoder}for(let j=0;j<E;j++)u.h.h=!0,_+=u.h.i.decode(p[j],{stream:!(z&&j==E-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function Su(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Pd(u,p){var _=u.C,E=p.indexOf(`
`,_);return E==-1?rs:(_=Number(p.substring(_,E)),isNaN(_)?xa:(E+=1,E+_>p.length?rs:(p=p.slice(E,E+_),u.C=E+_,p)))}Mn.prototype.cancel=function(){this.K=!0,vn(this)};function no(u){u.T=Date.now()+u.H,Pu(u,u.H)}function Pu(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ns(m(u.aa,u),p)}function io(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ka(this.i,this.B),this.M!=2&&(ar(),_t(17)),vn(this),this.m=2,ss(this)):Pu(this,this.T-u)};function ss(u){u.j.I==0||u.K||un(u.j,u)}function vn(u){io(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Pa(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function La(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||os(_.h,u))){if(!u.L&&os(_.h,u)&&_.I==3){try{var E=_.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)fo(_),co(_);else break e;Ba(_),_t(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ns(m(_.Va,_),6e3));ku(_.h)<=1&&_.ta&&(_.ta=void 0)}else oi(_,11)}else if((u.L||_.g==u)&&fo(_),!C(p))for(z=_.Ba.g.parse(p),p=0;p<z.length;p++){let Oe=z[p];const rt=Oe[0];if(!(rt<=_.K))if(_.K=rt,Oe=Oe[1],_.I==2)if(Oe[0]=="c"){_.M=Oe[1],_.ba=Oe[2];const In=Oe[3];In!=null&&(_.ka=In,_.j.info("VER="+_.ka));const zn=Oe[4];zn!=null&&(_.za=zn,_.j.info("SVER="+_.za));const Sn=Oe[5];Sn!=null&&typeof Sn=="number"&&Sn>0&&(E=1.5*Sn,_.O=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const ai=u.g;if(ai){const go=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var j=E.h;j.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ri(j,j.h),j.h=null))}if(E.G){const _o=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(E.wa=_o,re(E.J,E.G,_o))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),E=_;var ee=u;if(E.na=Ha(E,E.L?E.ba:null,E.W),ee.L){Na(E.h,ee);var ge=ee,be=E.O;be&&(ge.H=be),ge.D&&(io(ge),no(ge)),E.g=ee}else Ua(E);_.i.length>0&&si(_)}else Oe[0]!="stop"&&Oe[0]!="close"||oi(_,7);else _.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?oi(_,7):Ie(_):Oe[0]!="noop"&&_.l&&_.l.qa(Oe),_.A=0)}}ar(4)}catch{}}var Ad=class{constructor(u,p){this.g=u,this.map=p}};function Au(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ku(u){return u.h?1:u.g?u.g.size:0}function os(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ri(u,p){u.g?u.g.add(p):u.h=p}function Na(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Au.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ba(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.G);return p}return D(u.i)}var ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Re(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const E=u[_].indexOf("=");let z,j=null;E>=0?(z=u[_].substring(0,E),j=u[_].substring(E+1)):z=u[_],p(z,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ne(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Ne?(this.l=u.l,wn(this,u.j),this.o=u.o,this.g=u.g,Tn(this,u.u),this.h=u.h,as(this,ls(u.i)),this.m=u.m):u&&(p=String(u).match(ur))?(this.l=!1,wn(this,p[1]||"",!0),this.o=xi(p[2]||""),this.g=xi(p[3]||"",!0),Tn(this,p[4]),this.h=xi(p[5]||"",!0),as(this,p[6]||"",!0),this.m=xi(p[7]||"")):(this.l=!1,this.i=new Vn(null,this.l))}Ne.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(ti(p,Ru,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ti(p,Ru,!0),"@"),u.push(ae(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ti(_,_.charAt(0)=="/"?Li:ro,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ti(_,Ni)),u.join("")},Ne.prototype.resolve=function(u){const p=zt(this);let _=!!u.j;_?wn(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var E=u.h;if(_)Tn(p,u.u);else if(_=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var z=p.h.lastIndexOf("/");z!=-1&&(E=p.h.slice(0,z+1)+E)}if(z=E,z==".."||z==".")E="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){E=z.lastIndexOf("/",0)==0,z=z.split("/");const j=[];for(let ee=0;ee<z.length;){const ge=z[ee++];ge=="."?E&&ee==z.length&&j.push(""):ge==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),E&&ee==z.length&&j.push("")):(j.push(ge),E=!0)}E=j.join("/")}else E=z}return _?p.h=E:_=u.i.toString()!=="",_?as(p,ls(u.i)):_=!!u.m,_&&(p.m=u.m),p};function zt(u){return new Ne(u)}function wn(u,p,_){u.j=_?xi(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Tn(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function as(u,p,_){p instanceof Vn?(u.i=p,Da(u.i,u.l)):(_||(p=ti(p,Xe)),u.i=new Vn(p,u.l))}function re(u,p,_){u.i.set(p,_)}function Ue(u){return re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function xi(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ti(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Kt),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ru=/[#\/\?@]/g,ro=/[#\?:]/g,Li=/[#\?]/g,Xe=/[#\?@]/g,Ni=/#/g;function Vn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ln(u){u.g||(u.g=new Map,u.h=0,u.i&&Re(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Vn.prototype,t.add=function(u,p){ln(this),this.i=null,u=ni(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function so(u,p){ln(u),p=ni(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function cr(u,p){return ln(u),p=ni(u,p),u.g.has(p)}t.forEach=function(u,p){ln(this),this.g.forEach(function(_,E){_.forEach(function(z){u.call(p,z,E,this)},this)},this)};function oo(u,p){ln(u);let _=[];if(typeof p=="string")cr(u,p)&&(_=_.concat(u.g.get(ni(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}t.set=function(u,p){return ln(this),this.i=null,u=ni(this,u),cr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=oo(this,u),u.length>0?String(u[0]):p):p};function ao(u,p,_){so(u,p),_.length>0&&(u.i=null,u.g.set(ni(u,p),D(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var _=p[E];const z=ae(_);_=oo(this,_);for(let j=0;j<_.length;j++){let ee=z;_[j]!==""&&(ee+="="+ae(_[j])),u.push(ee)}}return this.i=u.join("&")};function ls(u){const p=new Vn;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function ni(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Da(u,p){p&&!u.j&&(ln(u),u.i=null,u.g.forEach(function(_,E){const z=E.toLowerCase();E!=z&&(so(this,E),ao(this,z,_))},u)),u.j=p}function lo(u,p){const _=new is;if(l.Image){const E=new Image;E.onload=y(En,_,"TestLoadImage: loaded",!0,p,E),E.onerror=y(En,_,"TestLoadImage: error",!1,p,E),E.onabort=y(En,_,"TestLoadImage: abort",!1,p,E),E.ontimeout=y(En,_,"TestLoadImage: timeout",!1,p,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function xu(u,p){const _=new is,E=new AbortController,z=setTimeout(()=>{E.abort(),En(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(z),j.ok?En(_,"TestPingServer: ok",!0,p):En(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),En(_,"TestPingServer: error",!1,p)})}function En(u,p,_,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(_)}catch{}}function Cd(){this.g=new gu}function me(u){this.i=u.Sb||null,this.h=u.ab||!1}w(me,Aa),me.prototype.g=function(){return new Ut(this.i,this.h)};function Ut(u,p){it.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ut,it),t=Ut.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,bi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||l).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fe(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fe(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?hr(this):bi(this),this.readyState==3&&Fe(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,hr(this))},t.Na=function(u){this.g&&(this.response=u,hr(this))},t.ga=function(){this.g&&hr(this)};function hr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,bi(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function bi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uo(u){let p="";return oe(u,function(_,E){p+=E,p+=":",p+=_,p+=`\r
`}),p}function us(u,p,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=uo(_),typeof u=="string"?_!=null&&ae(_):re(u,p,_))}function De(u){it.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(De,it);var Oa=/^https?$/i,cs=["POST","PUT"];t=De.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tu.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){at(this,j);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)_.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())_.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(cs,p,void 0)>=0)||E||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ee]of _)this.g.setRequestHeader(j,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){at(this,j)}};function at(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,ii(u),hs(u)}function ii(u){u.A||(u.A=!0,V(u,"complete"),V(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,V(this,"complete"),V(this,"abort"),hs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ma(this):this.Xa())},t.Xa=function(){Ma(this)};function Ma(u){if(u.h&&typeof o<"u"){if(u.v&&ri(u)==4)setTimeout(u.Ca.bind(u),0);else if(V(u,"readystatechange"),ri(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var E;if(E=j===0){let ee=String(u.D).match(ur)[1]||null;!ee&&l.self&&l.self.location&&(ee=l.self.location.protocol.slice(0,-1)),E=!Oa.test(ee?ee.toLowerCase():"")}_=E}if(_)V(u,"complete"),V(u,"success");else{u.o=6;try{var z=ri(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",ii(u)}}finally{hs(u)}}}}function hs(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,p||V(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ri(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Td(p)}};function Va(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fa(u){const p={};u=(u.g&&ri(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(C(u[E]))continue;var _=Eu(u[E]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[z]||[];p[z]=j,j.push(_)}J(p,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function za(u){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ds("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ds("baseRetryDelayMs",5e3,u),this.Za=ds("retryDelaySeedMs",1e4,u),this.Ta=ds("forwardChannelMaxRetries",2,u),this.va=ds("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Au(u&&u.concurrentRequestLimit),this.Ba=new Cd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=za.prototype,t.ka=8,t.I=1,t.connect=function(u,p,_,E){_t(0),this.W=u,this.H=p||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.J=Ha(this,null,this.W),si(this)};function Ie(u){if(Qt(u),u.I==3){var p=u.V++,_=zt(u.J);if(re(_,"SID",u.M),re(_,"RID",p),re(_,"TYPE","terminate"),Di(u,_),p=new Mn(u,u.j,p),p.M=2,p.A=Ue(zt(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=p.A,_=!0),_||(p.g=Wa(p.j,null),p.g.ea(p.A)),p.F=Date.now(),no(p)}Fn(u)}function co(u){u.g&&(ja(u),u.g.cancel(),u.g=null)}function Qt(u){co(u),u.v&&(l.clearTimeout(u.v),u.v=null),fo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function si(u){if(!Cu(u.h)&&!u.m){u.m=!0;var p=u.Ea;Q||S(),X||(Q(),X=!0),P.add(p,u),u.D=0}}function Lu(u,p){return ku(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ns(m(u.Ea,u,p),Du(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Mn(this,this.j,u);let j=this.o;if(this.U&&(j?(j=ce(j),He(j,this.U)):j=this.U),this.u!==null||this.R||(z.J=j,j=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=bu(this,z,p),_=zt(this.J),re(_,"RID",u),re(_,"CVER",22),this.G&&re(_,"X-HTTP-Session-Id",this.G),Di(this,_),j&&(this.R?p="headers="+ae(uo(j))+"&"+p:this.u&&us(_,this.u,j)),Ri(this.h,z),this.Ra&&re(_,"TYPE","init"),this.S?(re(_,"$req",p),re(_,"SID","null"),z.U=!0,to(z,_,null)):to(z,_,p),this.I=2}}else this.I==3&&(u?Nu(this,u):this.i.length==0||Cu(this.h)||Nu(this))};function Nu(u,p){var _;p?_=p.l:_=u.V++;const E=zt(u.J);re(E,"SID",u.M),re(E,"RID",_),re(E,"AID",u.K),Di(u,E),u.u&&u.o&&us(E,u.u,u.o),_=new Mn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=bu(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ri(u.h,_),to(_,E,p)}function Di(u,p){u.H&&oe(u.H,function(_,E){re(p,E,_)}),u.l&&oe({},function(_,E){re(p,E,_)})}function bu(u,p,_){_=Math.min(u.i.length,_);const E=u.l?m(u.l.Ka,u.l,u):null;e:{var z=u.i;let ge=-1;for(;;){const be=["count="+_];ge==-1?_>0?(ge=z[0].g,be.push("ofs="+ge)):ge=0:be.push("ofs="+ge);let Oe=!0;for(let rt=0;rt<_;rt++){var j=z[rt].g;const In=z[rt].map;if(j-=ge,j<0)ge=Math.max(0,z[rt].g-100),Oe=!1;else try{j="req"+j+"_"||"";try{var ee=In instanceof Map?In:Object.entries(In);for(const[zn,Sn]of ee){let ai=Sn;h(Sn)&&(ai=Ys(Sn)),be.push(j+zn+"="+encodeURIComponent(ai))}}catch(zn){throw be.push(j+"type="+encodeURIComponent("_badmap")),zn}}catch{E&&E(In)}}if(Oe){ee=be.join("&");break e}}ee=void 0}return u=u.i.splice(0,_),p.G=u,ee}function Ua(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;Q||S(),X||(Q(),X=!0),P.add(p,u),u.A=0}}function Ba(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ns(m(u.Da,u),Du(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,ho(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ns(m(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),co(this),ho(this))};function ja(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function ho(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=zt(u.na);re(p,"RID","rpc"),re(p,"SID",u.M),re(p,"AID",u.K),re(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&re(p,"TO",u.ia),re(p,"TYPE","xmlhttp"),Di(u,p),u.u&&u.o&&us(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ue(zt(p)),_.u=null,_.R=!0,ki(_,u)}t.Va=function(){this.C!=null&&(this.C=null,co(this),Ba(this),_t(19))};function fo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function un(u,p){var _=null;if(u.g==p){fo(u),ja(u),u.g=null;var E=2}else if(os(u.h,p))_=p.G,Na(u.h,p),E=1;else return;if(u.I!=0){if(p.o)if(E==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var z=u.D;E=Xs(),V(E,new vu(E,_)),si(u)}else Ua(u);else if(z=p.m,z==3||z==0&&p.X>0||!(E==1&&Lu(u,p)||E==2&&Ba(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),z){case 1:oi(u,5);break;case 4:oi(u,10);break;case 3:oi(u,6);break;default:oi(u,2)}}}function Du(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function oi(u,p){if(u.j.info("Error code "+p),p==2){var _=m(u.bb,u),E=u.Ua;const z=!E;E=new Ne(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wn(E,"https"),Ue(E),z?lo(E.toString(),_):xu(E.toString(),_)}else _t(2);u.I=0,u.l&&u.l.pa(p),Fn(u),Qt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Fn(u){if(u.I=0,u.ja=[],u.l){const p=ba(u.h);(p.length!=0||u.i.length!=0)&&(O(u.ja,p),O(u.ja,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.oa()}}function Ha(u,p,_){var E=_ instanceof Ne?zt(_):new Ne(_);if(E.g!="")p&&(E.g=p+"."+E.g),Tn(E,E.u);else{var z=l.location;E=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;const j=new Ne(null);E&&wn(j,E),p&&(j.g=p),z&&Tn(j,z),_&&(j.h=_),E=j}return _=u.G,p=u.wa,_&&p&&re(E,_,p),re(E,"VER",u.ka),Di(u,E),E}function Wa(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new De(new me({ab:_})):new De(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function po(){}t=po.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function mo(){}mo.prototype.g=function(u,p){return new Rt(u,p)};function Rt(u,p){it.call(this),this.g=new za(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!C(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new dr(this)}w(Rt,it),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Ie(this.g)},Rt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Ys(u),u=_);p.i.push(new Ad(p.Ya++,u)),p.I==3&&si(p)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Ie(this.g),delete this.g,Rt.Z.N.call(this)};function qa(u){ts.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(qa,ts);function Ou(){Js.call(this),this.status=1}w(Ou,Js);function dr(u){this.g=u}w(dr,po),dr.prototype.ra=function(){V(this.g,"a")},dr.prototype.qa=function(u){V(this.g,new qa(u))},dr.prototype.pa=function(u){V(this.g,new Ou)},dr.prototype.oa=function(){V(this.g,"b")},mo.prototype.createWebChannel=mo.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,k0=function(){return new mo},C0=function(){return Xs()},A0=Ci,Cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eo.NO_ERROR=0,eo.TIMEOUT=8,eo.HTTP_ERROR=6,bc=eo,wu.COMPLETE="complete",P0=wu,_u.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",it.prototype.listen=it.prototype.J,cl=_u,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,S0=De}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="12.9.0";function xx(t){va=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Yh("@firebase/firestore");function Po(){return Ds.logLevel}function ie(t,...e){if(Ds.logLevel<=Ae.DEBUG){const n=e.map(ng);Ds.debug(`Firestore (${va}): ${t}`,...n)}}function er(t,...e){if(Ds.logLevel<=Ae.ERROR){const n=e.map(ng);Ds.error(`Firestore (${va}): ${t}`,...n)}}function Os(t,...e){if(Ds.logLevel<=Ae.WARN){const n=e.map(ng);Ds.warn(`Firestore (${va}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,R0(t,i,n)}function R0(t,e,n){let i=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw er(i),new Error(i)}function Me(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||R0(e,s,i)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class Nx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bx{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ps,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ps)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string",31837,{l:i}),new x0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class Dx{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ox{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Dx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ky(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Vx(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ce(t,e){return t<e?-1:t>e?1:0}function kp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return ff(s)===ff(o)?Ce(s,o):ff(s)?1:-1}return Ce(t.length,e.length)}const Fx=55296,zx=57343;function ff(t){const e=t.charCodeAt(0);return e>=Fx&&e<=zx}function la(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="__name__";class hi{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&de(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=hi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ce(e.length,n.length)}static compareSegments(e,n){const i=hi.isNumericId(e),s=hi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?hi.extractNumericId(e).compare(hi.extractNumericId(n)):kp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class Be extends hi{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const Ux=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends hi{construct(e,n,i){return new St(e,n,i)}static isValidIdentifier(e){return Ux.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new St([Qy])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ne($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Be.fromString(e))}static fromName(e){return new ue(Be.fromString(e).popFirst(5))}static empty(){return new ue(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t,e,n){if(!n)throw new ne($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bx(t,e,n,i){if(e===!0&&i===!0)throw new ne($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yy(t){if(!ue.isDocumentKey(t))throw new ne($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jy(t){if(ue.isDocumentKey(t))throw new ne($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function N0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function As(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nd(t);throw new ne($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function hu(t,e){if(!N0(t))throw new ne($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ne($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-62135596800,ev=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*ev);return new qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Xy)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ev}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:dt("string",qe._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new qe(0,0))}static max(){return new _e(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function jx(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Ur(s,ue.empty(),e)}function Hx(t){return new Ur(t.readTime,t.key,Zl)}class Ur{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ur(_e.min(),ue.empty(),Zl)}static max(){return new Ur(_e.max(),ue.empty(),Zl)}}function Wx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $x{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==qx)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(s=>s?G.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(y=>{l[m]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new G((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function Gx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function rd(t){return t==null}function vh(t){return t===0&&1/t==-1/0}function Zx(t){return typeof t=="number"&&Number.isInteger(t)&&!vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="";function Kx(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tv(e)),e=Qx(t.get(n),e);return tv(e)}function Qx(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case b0:n+="";break;default:n+=o}}return n}function tv(t){return t+b0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}}class dc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??It.RED,this.left=s??It.EMPTY,this.right=o??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new It(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new dn([])}unionWith(e){let n=new gt(St.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new O0("Invalid base64 string: "+o):o}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const Yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=Yx.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="server_timestamp",V0="__type__",F0="__previous_value__",z0="__local_write_time__";function sg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[V0])==null?void 0:i.stringValue)===M0}function sd(t){const e=t.mapValue.fields[F0];return sg(e)?sd(e):e}function Kl(t){const e=Br(t.mapValue.fields[z0].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,i,s,o,l,h,d,m,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=y,this.apiKey=w}}const wh="(default)";class Ql{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}function Xx(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ne($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__type__",eL="__max__",fc={mapValue:{}},B0="__vector__",Th="value";function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:nL(t)?9007199254740991:tL(t)?10:11:de(28295,{value:t})}function Ti(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Br(s.timestampValue),h=Br(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return jr(s.bytesValue).isEqual(jr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return st(s.geoPointValue.latitude)===st(o.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return st(s.integerValue)===st(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=st(s.doubleValue),h=st(o.doubleValue);return l===h?vh(l)===vh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return la(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(nv(l)!==nv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Ti(l[d],h[d])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function Yl(t,e){return(t.values||[]).find(n=>Ti(n,e))!==void 0}function ua(t,e){if(t===e)return 0;const n=Hr(t),i=Hr(e);if(n!==i)return Ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=st(o.integerValue||o.doubleValue),d=st(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return rv(t.timestampValue,e.timestampValue);case 4:return rv(Kl(t),Kl(e));case 5:return kp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=jr(o),d=jr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const y=Ce(h[m],d[m]);if(y!==0)return y}return Ce(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ce(st(o.latitude),st(l.latitude));return h!==0?h:Ce(st(o.longitude),st(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var T,D,O,U;const h=o.fields||{},d=l.fields||{},m=(T=h[Th])==null?void 0:T.arrayValue,y=(D=d[Th])==null?void 0:D.arrayValue,w=Ce(((O=m==null?void 0:m.values)==null?void 0:O.length)||0,((U=y==null?void 0:y.values)==null?void 0:U.length)||0);return w!==0?w:sv(m,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===fc.mapValue&&l===fc.mapValue)return 0;if(o===fc.mapValue)return 1;if(l===fc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const T=kp(d[w],y[w]);if(T!==0)return T;const D=ua(h[d[w]],m[y[w]]);if(D!==0)return D}return Ce(d.length,y.length)}(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function rv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Br(t),i=Br(e),s=Ce(n.seconds,i.seconds);return s!==0?s:Ce(n.nanos,i.nanos)}function sv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=ua(n[s],i[s]);if(o)return o}return Ce(n.length,i.length)}function ca(t){return Rp(t)}function Rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Br(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Rp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Rp(n.fields[l])}`;return s+"}"}(t.mapValue):de(61005,{value:t})}function Dc(t){switch(Hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sd(t);return e?16+Dc(e):16;case 5:return 2*t.stringValue.length;case 6:return jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Dc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Qr(i.fields,(o,l)=>{s+=o.length+Dc(l)}),s}(t.mapValue);default:throw de(13486,{value:t})}}function ov(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xp(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function av(t){return!!t&&"nullValue"in t}function lv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oc(t){return!!t&&"mapValue"in t}function tL(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[U0])==null?void 0:i.stringValue)===B0}function Pl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Pl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(t.arrayValue.values[n]);return e}return{...t}}function nL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===eL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=St.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=Pl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Qr(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new en(Pl(this.value))}}function j0(t){const e=[];return Qr(t.fields,(n,i)=>{const s=new St([n]);if(Oc(i)){const o=j0(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ot(e,0,_e.min(),_e.min(),_e.min(),en.empty(),0)}static newFoundDocument(e,n,i,s){return new Ot(e,1,n,_e.min(),i,s,0)}static newNoDocument(e,n){return new Ot(e,2,n,_e.min(),_e.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,_e.min(),_e.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.position=e,this.inclusive=n}}function uv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ue.comparator(ue.fromName(l.referenceValue),n.key):i=ua(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function cv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function iL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{}class ht extends H0{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sL(e,n,i):n==="array-contains"?new lL(e,i):n==="in"?new uL(e,i):n==="not-in"?new cL(e,i):n==="array-contains-any"?new hL(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oL(e,i):new aL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ua(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends H0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xn(e,n)}matches(e){return W0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function W0(t){return t.op==="and"}function q0(t){return rL(t)&&W0(t)}function rL(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function Lp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(q0(t))return t.filters.map(e=>Lp(e)).join(",");{const e=t.filters.map(n=>Lp(n)).join(",");return`${t.op}(${e})`}}function $0(t,e){return t instanceof ht?function(i,s){return s instanceof ht&&i.op===s.op&&i.field.isEqual(s.field)&&Ti(i.value,s.value)}(t,e):t instanceof Xn?function(i,s){return s instanceof Xn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&$0(l,s.filters[h]),!0):!1}(t,e):void de(19439)}function G0(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(G0).join(" ,")+"}"}(t):"Filter"}class sL extends ht{constructor(e,n,i){super(e,n,i),this.key=ue.fromName(i.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class oL extends ht{constructor(e,n){super(e,"in",n),this.keys=Z0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aL extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Z0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Z0(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ue.fromName(i.referenceValue))}class lL extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&Yl(n.arrayValue,this.value)}}class uL extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yl(this.value.arrayValue,n)}}class cL extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yl(this.value.arrayValue,n)}}class hL extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function hv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new dL(t,e,n,i,s,o,l)}function ag(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Lp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ca(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ca(i)).join(",")),e.Te=n}return e.Te}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cv(t.startAt,e.startAt)&&cv(t.endAt,e.endAt)}function Np(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function fL(t,e,n,i,s,o,l,h){return new Ea(t,e,n,i,s,o,l,h)}function ug(t){return new Ea(t)}function dv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pL(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function K0(t){return t.collectionGroup!==null}function Al(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new gt(St.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Jl(o,i))}),n.has(St.keyField().canonicalString())||e.Ie.push(new Jl(St.keyField(),i))}return e.Ie}function gi(t){const e=ye(t);return e.Ee||(e.Ee=mL(e,Al(t))),e.Ee}function mL(t,e){if(t.limitType==="F")return hv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Jl(s.field,o)});const n=t.endAt?new Eh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Eh(t.startAt.position,t.startAt.inclusive):null;return hv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function bp(t,e){const n=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gL(t,e){const n=t.explicitOrderBy.concat([e]);return new Ea(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Dp(t,e,n){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return lg(gi(t),gi(e))&&t.limitType===e.limitType}function Q0(t){return`${ag(gi(t))}|lt:${t.limitType}`}function Ao(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>G0(s)).join(", ")}]`),rd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ca(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ca(s)).join(",")),`Target(${i})`}(gi(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ue.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Al(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=uv(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,Al(i),s)||i.endAt&&!function(l,h,d){const m=uv(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,Al(i),s))}(t,e)}function _L(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y0(t){return(e,n)=>{let i=!1;for(const s of Al(t)){const o=yL(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function yL(t,e,n){const i=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?ua(d,m):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return D0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new Ye(ue.comparator);function tr(){return vL}const J0=new Ye(ue.comparator);function hl(...t){let e=J0;for(const n of t)e=e.insert(n.key,n);return e}function X0(t){let e=J0;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ws(){return Cl()}function eI(){return Cl()}function Cl(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const wL=new Ye(ue.comparator),TL=new gt(ue.comparator);function ke(...t){let e=TL;for(const n of t)e=e.add(n);return e}const EL=new gt(Ce);function IL(){return EL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function tI(t){return{integerValue:""+t}}function SL(t,e){return Zx(e)?tI(e):cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function PL(t,e,n){return t instanceof Ih?function(s,o){const l={fields:{[V0]:{stringValue:M0},[z0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&sg(o)&&(o=sd(o)),o&&(l.fields[F0]=o),{mapValue:l}}(n,e):t instanceof ha?iI(t,e):t instanceof Xl?rI(t,e):function(s,o){const l=nI(s,o),h=fv(l)+fv(s.Ae);return xp(l)&&xp(s.Ae)?tI(h):cg(s.serializer,h)}(t,e)}function AL(t,e,n){return t instanceof ha?iI(t,e):t instanceof Xl?rI(t,e):n}function nI(t,e){return t instanceof Sh?function(i){return xp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ih extends ld{}class ha extends ld{constructor(e){super(),this.elements=e}}function iI(t,e){const n=sI(e);for(const i of t.elements)n.some(s=>Ti(s,i))||n.push(i);return{arrayValue:{values:n}}}class Xl extends ld{constructor(e){super(),this.elements=e}}function rI(t,e){let n=sI(e);for(const i of t.elements)n=n.filter(s=>!Ti(s,i));return{arrayValue:{values:n}}}class Sh extends ld{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fv(t){return st(t.integerValue||t.doubleValue)}function sI(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n){this.field=e,this.transform=n}}function kL(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof ha&&s instanceof ha||i instanceof Xl&&s instanceof Xl?la(i.elements,s.elements,Ti):i instanceof Sh&&s instanceof Sh?Ti(i.Ae,s.Ae):i instanceof Ih&&s instanceof Ih}(t.transform,e.transform)}class RL{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function oI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lI(t.key,_i.none()):new du(t.key,t.data,_i.none());{const n=t.data,i=en.empty();let s=new gt(St.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Yr(t.key,i,new dn(s.toArray()),_i.none())}}function xL(t,e,n){t instanceof du?function(s,o,l){const h=s.value.clone(),d=mv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,o,l){if(!Mc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=mv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(aI(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function kl(t,e,n,i){return t instanceof du?function(o,l,h,d){if(!Mc(o.precondition,l))return h;const m=o.value.clone(),y=gv(o.fieldTransforms,d,l);return m.setAll(y),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Yr?function(o,l,h,d){if(!Mc(o.precondition,l))return h;const m=gv(o.fieldTransforms,d,l),y=l.data;return y.setAll(aI(o)),y.setAll(m),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return Mc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function LL(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=nI(i.transform,s||null);o!=null&&(n===null&&(n=en.empty()),n.set(i.field,o))}return n||null}function pv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&la(i,s,(o,l)=>kL(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class du extends ud{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends ud{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function aI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function mv(t,e,n){const i=new Map;Me(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,AL(l,h,n[s]))}return i}function gv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,PL(o,l,e))}return i}class lI extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NL extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&xL(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=kl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=kl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=eI();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=oI(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(n,i)=>pv(n,i))&&la(this.baseMutations,e.baseMutations,(n,i)=>pv(n,i))}}class hg{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Me(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return wL}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new hg(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,xe;function ML(t){switch(t){case $.OK:return de(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function uI(t){if(t===void 0)return er("GRPC error has no .code"),$.UNKNOWN;switch(t){case ut.OK:return $.OK;case ut.CANCELLED:return $.CANCELLED;case ut.UNKNOWN:return $.UNKNOWN;case ut.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ut.INTERNAL:return $.INTERNAL;case ut.UNAVAILABLE:return $.UNAVAILABLE;case ut.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ut.NOT_FOUND:return $.NOT_FOUND;case ut.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ut.ABORTED:return $.ABORTED;case ut.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ut.DATA_LOSS:return $.DATA_LOSS;default:return de(39323,{code:t})}}(xe=ut||(ut={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Mr([4294967295,4294967295],0);function _v(t){const e=VL().encode(t),n=new I0;return n.update(e),new Uint8Array(n.digest())}function yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mr([n,i],0),new Mr([s,o],0)]}class dg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(i<0)throw new dl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Mr.fromNumber(i)));return s.compare(FL)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_v(e),[i,s]=yv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new dg(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=_v(e),[i,s]=yv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.be(l)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new cd(_e.min(),s,new Ye(Ce),tr(),ke())}}class fu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new fu(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=s}}class cI{constructor(e,n){this.targetId=e,this.Ce=n}}class hI{constructor(e,n,i=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class vv{constructor(){this.ve=0,this.Fe=wv(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),i=ke();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:de(38017,{changeType:o})}}),new fu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=wv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class zL{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.He=pc(),this.Je=pc(),this.Ze=new Ye(Ce)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Np(o))if(i===0){const l=new ue(o.path);this.et(n,l,Ot.newNoDocument(l,_e.min()))}else Me(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=jr(i).toUint8Array()}catch(d){if(d instanceof O0)return Os("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new dg(l,s,o)}catch(d){return Os(d instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Np(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ot.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.Ke())}});let i=ke();this.Je.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new cd(e,n,this.Ze,this.je,i);return this.je=tr(),this.He=pc(),this.Je=pc(),this.Ze=new Ye(Ce),s}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new vv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new gt(Ce),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new gt(Ce),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function pc(){return new Ye(ue.comparator)}function wv(){return new Ye(ue.comparator)}const UL={asc:"ASCENDING",desc:"DESCENDING"},BL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jL={and:"AND",or:"OR"};class HL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Op(t,e){return t.useProto3Json||rd(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WL(t,e){return Ph(t,e.toTimestamp())}function yi(t){return Me(!!t,49232),_e.fromTimestamp(function(n){const i=Br(n);return new qe(i.seconds,i.nanos)}(t))}function fg(t,e){return Mp(t,e).canonicalString()}function Mp(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fI(t){const e=Be.fromString(t);return Me(yI(e),10190,{key:e.toString()}),e}function Vp(t,e){return fg(t.databaseId,e.path)}function pf(t,e){const n=fI(e);if(n.get(1)!==t.databaseId.projectId)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(mI(n))}function pI(t,e){return fg(t.databaseId,e)}function qL(t){const e=fI(t);return e.length===4?Be.emptyPath():mI(e)}function Fp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mI(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tv(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function $L(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:de(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(Me(y===void 0||typeof y=="string",58123),Ct.fromBase64String(y||"")):(Me(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ct.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const y=m.code===void 0?$.UNKNOWN:uI(m.code);return new ne(y,m.message||"")}(l);n=new hI(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=pf(t,i.document.name),o=yi(i.document.updateTime),l=i.document.createTime?yi(i.document.createTime):_e.min(),h=new en({mapValue:{fields:i.document.fields}}),d=Ot.newFoundDocument(s,o,l,h),m=i.targetIds||[],y=i.removedTargetIds||[];n=new Vc(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=pf(t,i.document),o=i.readTime?yi(i.readTime):_e.min(),l=Ot.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Vc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=pf(t,i.document),o=i.removedTargetIds||[];n=new Vc([],o,s,null)}else{if(!("filter"in e))return de(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new OL(s,o),h=i.targetId;n=new cI(h,l)}}return n}function GL(t,e){let n;if(e instanceof du)n={update:Tv(t,e.key,e.value)};else if(e instanceof lI)n={delete:Vp(t,e.key)};else if(e instanceof Yr)n={update:Tv(t,e.key,e.data),updateMask:nN(e.fieldMask)};else{if(!(e instanceof NL))return de(16599,{dt:e.type});n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Ih)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ha)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Sh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw de(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:WL(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de(27497)}(t,e.precondition)),n}function ZL(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?yi(s.updateTime):yi(o);return l.isEqual(_e.min())&&(l=yi(o)),new RL(l,s.transformResults||[])}(n,e))):[]}function KL(t,e){return{documents:[pI(t,e.path)]}}function QL(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=pI(t,s);const o=function(m){if(m.length!==0)return _I(Xn.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(y=>function(T){return{field:Co(T.field),direction:XL(T.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Op(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:n,parent:s}}function YL(t){let e=qL(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Me(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(w){const T=gI(w);return T instanceof Xn&&q0(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(T=>function(O){return new Jl(ko(O.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(w){let T;return T=typeof w=="object"?w.value:w,rd(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(w){const T=!!w.before,D=w.values||[];return new Eh(D,T)}(n.startAt));let m=null;return n.endAt&&(m=function(w){const T=!w.before,D=w.values||[];return new Eh(D,T)}(n.endAt)),fL(e,s,l,o,h,"F",d,m)}function JL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ko(n.unaryFilter.field);return ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ko(n.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ko(n.unaryFilter.field);return ht.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return ht.create(ko(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(i=>gI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function XL(t){return UL[t]}function eN(t){return BL[t]}function tN(t){return jL[t]}function Co(t){return{fieldPath:t.canonicalString()}}function ko(t){return St.fromServerFormat(t.fieldPath)}function _I(t){return t instanceof ht?function(n){if(n.op==="=="){if(lv(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(av(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lv(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(av(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:eN(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const i=n.getFilters().map(s=>_I(s));return i.length===1?i[0]:{compositeFilter:{op:tN(n.op),filters:i}}}(t):de(54877,{filter:t})}function nN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function vI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,i,s,o=_e.min(),l=_e.min(),h=Ct.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.yt=e}}function rN(t){const e=YL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.Sn=new oN}addToCollectionParentIndex(e,n){return this.Sn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ur.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class oN{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new gt(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new gt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wI=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(wI,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new da(0)}static ar(){return new da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LruGarbageCollector",aN=1048576;function Sv([t,e],[n,i]){const s=Ce(t,n);return s===0?Ce(e,i):s}class lN{constructor(e){this.Pr=e,this.buffer=new gt(Sv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Sv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uN{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ie(Iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ta(n)?ie(Iv,"Ignoring IndexedDB error during garbage collection: ",n):await wa(n)}await this.Ar(3e5)})}}class cN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return G.resolve(id.ce);const i=new lN(n);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Ev)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,s,o,l,h,d,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(i=w,h=Date.now(),this.removeTargets(e,i,n))).next(w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(m=Date.now(),Po()<=Ae.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(m-d)+`ms
Total Duration: ${m-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function hN(t,e){return new cN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&kl(i.mutation,s,dn.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const s=ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=hl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ws();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=tr();const l=Cl(),h=function(){return Cl()}();return n.forEach((d,m)=>{const y=i.get(m.key);s.has(m.key)&&(y===void 0||y.mutation instanceof Yr)?o=o.insert(m.key,m):y!==void 0?(l.set(m.key,y.mutation.getFieldMask()),kl(y.mutation,m,y.mutation.getFieldMask(),qe.now())):l.set(m.key,dn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,y)=>l.set(m,y)),n.forEach((m,y)=>h.set(m,new fN(y,l.get(m)??null))),h))}recalculateAndSaveOverlays(e,n){const i=Cl();let s=new Ye((l,h)=>l-h),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let y=i.get(d)||dn.empty();y=h.applyToLocalView(m,y),i.set(d,y);const w=(s.get(h.batchId)||ke()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,y=d.value,w=eI();y.forEach(T=>{if(!o.has(T)){const D=oI(n.get(T),i.get(T));D!==null&&w.set(T,D),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return G.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return pL(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):G.resolve(ws());let h=Zl,d=o;return l.next(m=>G.forEach(m,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{d=d.insert(y,T)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,ke())).next(y=>({batchId:h,changes:X0(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(i=>{let s=hl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=hl();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const m=function(w,T){return new Ea(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(y=>{y.forEach((w,T)=>{l=l.insert(w,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const y=m.getKey();l.get(y)===null&&(l=l.insert(y,Ot.newInvalidDocument(y)))});let h=hl();return l.forEach((d,m)=>{const y=o.get(d);y!==void 0&&kl(y.mutation,m,dn.empty(),qe.now()),ad(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return G.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yi(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:rN(s.bundledQuery),readTime:yi(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.overlays=new Ye(ue.comparator),this.Lr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ws();return G.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.bt(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const s=ws(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Ye((m,y)=>m-y);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let y=o.get(m.largestBatchId);y===null&&(y=ws(),o=o.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=ws(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=s)););return G.resolve(h)}bt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new DL(n,i));let o=this.Lr.get(n);o===void 0&&(o=ke(),this.Lr.set(n,o)),this.Lr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.kr=new gt(vt.Kr),this.qr=new gt(vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new vt(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new vt(e,n))}Qr(e,n){e.forEach(i=>this.removeReference(i,n))}Gr(e){const n=new ue(new Be([])),i=new vt(n,e),s=new vt(n,e+1),o=[];return this.qr.forEachInRange([i,s],l=>{this.Wr(l),o.push(l.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ue(new Be([])),i=new vt(n,e),s=new vt(n,e+1);let o=ke();return this.qr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new vt(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class vt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ue.comparator(e.key,n.key)||Ce(e.Hr,n.Hr)}static Ur(e,n){return Ce(e.Hr,n.Hr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new gt(vt.Kr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new bL(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Jr=this.Jr.add(new vt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?rg:this.Yn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new vt(n,0),s=new vt(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],l=>{const h=this.Zr(l.Hr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(Ce);return n.forEach(s=>{const o=new vt(s,0),l=new vt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],h=>{i=i.add(h.Hr)})}),G.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ue.isDocumentKey(o)||(o=o.child(""));const l=new vt(new ue(o),0);let h=new gt(Ce);return this.Jr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)},l),G.resolve(this.Yr(h))}Yr(e){const n=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return G.forEach(n.mutations,s=>{const o=new vt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,n){const i=new vt(n,0),s=this.Jr.firstAfterOrEqual(i);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.ti=e,this.docs=function(){return new Ye(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let i=tr();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ot.newInvalidDocument(s))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=tr();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Wx(Hx(y),i)<=0||(s.has(y.key)||ad(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,s){de(9500)}ni(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new wN(this)}getSize(e){return G.resolve(this.size)}}class wN extends dN{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.persistence=e,this.ri=new Ws(n=>ag(n),lg),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.ii=0,this.si=new pg,this.targetCount=0,this.oi=da._r()}forEachTarget(e,n){return this.ri.forEach((i,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),G.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new da(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.lr(n),G.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.ri.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this._i={},this.overlays={},this.ai=new id(0),this.ui=!1,this.ui=!0,this.ci=new _N,this.referenceDelegate=e(this),this.li=new TN(this),this.indexManager=new sN,this.remoteDocumentCache=function(s){return new vN(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new iN(n),this.Pi=new mN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new yN(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const s=new EN(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,n){return G.or(Object.values(this._i).map(i=>()=>i.containsKey(e,n)))}}class EN extends $x{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Ri=new pg,this.Ai=null}static Vi(e){return new mg(e)}get di(){if(this.Ai)return this.Ai;throw de(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,i=>{const s=ue.fromPath(i);return this.mi(e,s).next(o=>{o||n.removeEntry(s,_e.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ah{constructor(e,n){this.persistence=e,this.fi=new Ws(i=>Kx(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=hN(this,n)}static Vi(e,n){return new Ah(e,n)}Ti(){}Ii(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}pr(e){let n=0;return this.mr(e,i=>{n++}).next(()=>n)}mr(e,n){return G.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?G.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,l=>this.wr(e,l,n).next(h=>{h||(i++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dc(e.data.value)),n}wr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return G.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=s}static Es(e,n){let i=ke(),s=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new gg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return a1()?8:Gx(Vt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.gs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ps(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new IN;return this.ys(e,n,l).next(h=>{if(o.result=h,this.As)return this.ws(e,n,l,h.size)})}).next(()=>o.result)}ws(e,n,i,s){return i.documentReadCount<this.Vs?(Po()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(Po()<=Ae.DEBUG&&ie("QueryEngine","Query:",Ao(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(Po()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):G.resolve())}gs(e,n){if(dv(n))return G.resolve(null);let i=gi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dp(n,null,"F"),i=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=ke(...o);return this.fs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.bs(n,h);return this.Ss(n,m,l,d.readTime)?this.gs(e,Dp(n,null,"F")):this.Ds(e,m,n,d)}))})))}ps(e,n,i,s){return dv(n)||s.isEqual(_e.min())?G.resolve(null):this.fs.getDocuments(e,i).next(o=>{const l=this.bs(n,o);return this.Ss(n,l,i,s)?G.resolve(null):(Po()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ao(n)),this.Ds(e,l,n,jx(s,Zl)).next(h=>h))})}bs(e,n){let i=new gt(Y0(e));return n.forEach((s,o)=>{ad(e,o)&&(i=i.add(o))}),i}Ss(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,n,i){return Po()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.fs.getDocumentsMatchingQuery(e,n,Ur.min(),i)}Ds(e,n,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",PN=3e8;class AN{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ye(Ce),this.Fs=new Ws(o=>ag(o),lg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function CN(t,e,n,i){return new AN(t,e,n,i)}async function EI(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=ke();for(const m of s){l.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of o){h.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(m=>({Ns:m,removedBatchIds:l,addedBatchIds:h}))})})}function kN(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,y){const w=m.batch,T=w.keys();let D=G.resolve();return T.forEach(O=>{D=D.next(()=>y.getEntry(d,O)).next(U=>{const Z=m.docVersions.get(O);Me(Z!==null,48541),U.version.compareTo(Z)<0&&(w.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),y.addEntry(U)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=ke();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function II(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function RN(t,e){const n=ye(t),i=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const h=[];e.targetChanges.forEach((y,w)=>{const T=s.get(w);if(!T)return;h.push(n.li.removeMatchingKeys(o,y.removedDocuments,w).next(()=>n.li.addMatchingKeys(o,y.addedDocuments,w)));let D=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(Ct.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,i)),s=s.insert(w,D),function(U,Z,N){return U.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=PN?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(T,D,y)&&h.push(n.li.updateTargetData(o,D))});let d=tr(),m=ke();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(xN(o,l,e.documentUpdates).next(y=>{d=y.Bs,m=y.Ls})),!i.isEqual(_e.min())){const y=n.li.getLastRemoteSnapshotVersion(o).next(w=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return G.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.vs=s,o))}function xN(t,e,n){let i=ke(),s=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=tr();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(_e.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie(_g,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Bs:l,Ls:s}})}function LN(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=rg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function NN(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.li.getTargetData(i,e).next(o=>o?(s=o,G.resolve(s)):n.li.allocateTargetId(i).next(l=>(s=new Pr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i})}async function zp(t,e,n){const i=ye(t),s=i.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ta(l))throw l;ie(_g,`Failed to update sequence numbers for target ${e}: ${l}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Pv(t,e,n){const i=ye(t);let s=_e.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,y){const w=ye(d),T=w.Fs.get(y);return T!==void 0?G.resolve(w.vs.get(T)):w.li.getTargetData(m,y)}(i,l,gi(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:_e.min(),n?o:ke())).next(h=>(bN(i,_L(e),h),{documents:h,ks:o})))}function bN(t,e,n){let i=t.Ms.get(e)||_e.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ms.set(e,i)}class Av{constructor(){this.activeTargetIds=IL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DN{constructor(){this.vo=new Av,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Av,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class kv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ie(Cv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ie(Cv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Up(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="RestConnection",MN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class VN{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===wh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,o){const l=Up(),h=this.Qo(e,n.toUriEncodedString());ie(mf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,o);const{host:m}=new URL(h),y=Bs(m);return this.zo(e,h,d,i,y).then(w=>(ie(mf,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Os(mf,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",i),w})}jo(e,n,i,s,o,l){return this.Wo(e,n,i,s,o)}Go(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,n){const i=MN[e];let s=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection",rl=(t,e,n)=>{t.listen(e,i=>{try{n(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Qo extends VN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Qo.c_){const e=C0();rl(e,A0.STAT_EVENT,n=>{n.stat===Cp.PROXY?ie(Nt,"STAT_EVENT: detected buffering proxy"):n.stat===Cp.NOPROXY&&ie(Nt,"STAT_EVENT: detected no buffering proxy")}),Qo.c_=!0}}zo(e,n,i,s,o){const l=Up();return new Promise((h,d)=>{const m=new S0;m.setWithCredentials(!0),m.listenOnce(P0.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case bc.NO_ERROR:const w=m.getResponseJson();ie(Nt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case bc.TIMEOUT:ie(Nt,`RPC '${e}' ${l} timed out`),d(new ne($.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const T=m.getStatus();if(ie(Nt,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let D=m.getResponseJson();Array.isArray(D)&&(D=D[0]);const O=D==null?void 0:D.error;if(O&&O.status&&O.message){const U=function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(A)>=0?A:$.UNKNOWN}(O.status);d(new ne(U,O.message))}else d(new ne($.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ne($.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ie(Nt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);ie(Nt,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",y,i,15)})}T_(e,n,i){const s=Up(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Nt,`Creating RPC '${e}' stream ${s}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let w=!1,T=!1;const D=new FN({Ho:O=>{T?ie(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(w||(ie(Nt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),ie(Nt,`RPC '${e}' stream ${s} sending:`,O),y.send(O))},Jo:()=>y.close()});return rl(y,cl.EventType.OPEN,()=>{T||(ie(Nt,`RPC '${e}' stream ${s} transport opened.`),D.i_())}),rl(y,cl.EventType.CLOSE,()=>{T||(T=!0,ie(Nt,`RPC '${e}' stream ${s} transport closed`),D.o_(),this.E_(y))}),rl(y,cl.EventType.ERROR,O=>{T||(T=!0,Os(Nt,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),D.o_(new ne($.UNAVAILABLE,"The operation could not be completed")))}),rl(y,cl.EventType.MESSAGE,O=>{var U;if(!T){const Z=O.data[0];Me(!!Z,16349);const N=Z,A=(N==null?void 0:N.error)||((U=N[0])==null?void 0:U.error);if(A){ie(Nt,`RPC '${e}' stream ${s} received error:`,A);const b=A.status;let q=function(P){const S=ut[P];if(S!==void 0)return uI(S)}(b),Q=A.message;b==="NOT_FOUND"&&Q.includes("database")&&Q.includes("does not exist")&&Q.includes(this.databaseId.database)&&Os(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),q===void 0&&(q=$.INTERNAL,Q="Unknown error status: "+b+" with message "+A.message),T=!0,D.o_(new ne(q,Q)),y.close()}else ie(Nt,`RPC '${e}' stream ${s} received:`,Z),D.__(Z)}}),Qo.u_(),setTimeout(()=>{D.s_()},0),D}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return k0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){return new Qo(t)}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return new HL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo.c_=!1;class SI{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class PI{constructor(e,n,i,s,o,l,h,d){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ne($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(ie(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UN extends PI{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$L(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?yi(l.readTime):_e.min()}(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=Fp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Np(d)?{documents:KL(o,d)}:{query:QL(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=dI(o,l.resumeToken);const m=Op(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(_e.min())>0){h.readTime=Ph(o,l.snapshotVersion.toTimestamp());const m=Op(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=JL(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=Fp(this.serializer),n.removeTarget=e,this.K_(n)}}class BN extends PI{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ZL(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>GL(this.serializer,i))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{}class HN extends jN{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,Mp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne($.UNKNOWN,o.toString())})}jo(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.jo(e,Mp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne($.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function WN(t,e,n,i){return new HN(t,e,n,i)}class qN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class $N{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(l=>{i.enqueueAndForget(async()=>{qs(this)&&(ie(Ms,"Restarting streams for network reachability change."),await async function(d){const m=ye(d);m.Ea.add(4),await pu(m),m.Va.set("Unknown"),m.Ea.delete(4),await dd(m)}(this))})}),this.Va=new qN(i,s)}}async function dd(t){if(qs(t))for(const e of t.Ra)await e(!0)}async function pu(t){for(const e of t.Ra)await e(!1)}function AI(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Tg(n)?wg(n):Ia(n).O_()&&vg(n,e))}function yg(t,e){const n=ye(t),i=Ia(n);n.Ia.delete(e),i.O_()&&CI(n,e),n.Ia.size===0&&(i.O_()?i.L_():qs(n)&&n.Va.set("Unknown"))}function vg(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).Z_(e)}function CI(t,e){t.da.$e(e),Ia(t).X_(e)}function wg(t){t.da=new zL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.Va.ua()}function Tg(t){return qs(t)&&!Ia(t).x_()&&t.Ia.size>0}function qs(t){return ye(t).Ea.size===0}function kI(t){t.da=void 0}async function GN(t){t.Va.set("Online")}async function ZN(t){t.Ia.forEach((e,n)=>{vg(t,e)})}async function KN(t,e){kI(t),Tg(t)?(t.Va.ha(e),wg(t)):t.Va.set("Unknown")}async function QN(t,e,n){if(t.Va.set("Online"),e instanceof hI&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.da.removeTarget(h))}(t,e)}catch(i){ie(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ch(t,i)}else if(e instanceof Vc?t.da.Xe(e):e instanceof cI?t.da.st(e):t.da.tt(e),!n.isEqual(_e.min()))try{const i=await II(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.da.Tt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(m);y&&o.Ia.set(m,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(Ct.EMPTY_BYTE_STRING,y.snapshotVersion)),CI(o,d);const w=new Pr(y.target,d,m,y.sequenceNumber);vg(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ie(Ms,"Failed to raise snapshot:",i),await Ch(t,i)}}async function Ch(t,e,n){if(!Ta(e))throw e;t.Ea.add(1),await pu(t),t.Va.set("Offline"),n||(n=()=>II(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(Ms,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dd(t)})}function RI(t,e){return e().catch(n=>Ch(t,n,e))}async function fd(t){const e=ye(t),n=Wr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rg;for(;YN(e);)try{const s=await LN(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,JN(e,s)}catch(s){await Ch(e,s)}xI(e)&&LI(e)}function YN(t){return qs(t)&&t.Ta.length<10}function JN(t,e){t.Ta.push(e);const n=Wr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function xI(t){return qs(t)&&!Wr(t).x_()&&t.Ta.length>0}function LI(t){Wr(t).start()}async function XN(t){Wr(t).ra()}async function eb(t){const e=Wr(t);for(const n of t.Ta)e.ea(n.mutations)}async function tb(t,e,n){const i=t.Ta.shift(),s=hg.from(i,e,n);await RI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fd(t)}async function nb(t,e){e&&Wr(t).Y_&&await async function(i,s){if(function(l){return ML(l)&&l!==$.ABORTED}(s.code)){const o=i.Ta.shift();Wr(i).B_(),await RI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await fd(i)}}(t,e),xI(t)&&LI(t)}async function xv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(Ms,"RemoteStore received new credentials");const i=qs(n);n.Ea.add(3),await pu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dd(n)}async function ib(t,e){const n=ye(t);e?(n.Ea.delete(2),await dd(n)):e||(n.Ea.add(2),await pu(n),n.Va.set("Unknown"))}function Ia(t){return t.ma||(t.ma=function(n,i,s){const o=ye(n);return o.sa(),new UN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:GN.bind(null,t),Yo:ZN.bind(null,t),t_:KN.bind(null,t),J_:QN.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Tg(t)?wg(t):t.Va.set("Unknown")):(await t.ma.stop(),kI(t))})),t.ma}function Wr(t){return t.fa||(t.fa=function(n,i,s){const o=ye(n);return o.sa(),new BN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:XN.bind(null,t),t_:nb.bind(null,t),ta:eb.bind(null,t),na:tb.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await fd(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(Ms,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Eg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(t,e){if(er("AsyncQueue",`${e}: ${t}`),Ta(t))return new ne($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ue.comparator(n.key,i.key):(n,i)=>ue.comparator(n.key,i.key),this.keyedMap=hl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.ga=new Ye(ue.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class fa{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new fa(e,n,Yo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class sb{constructor(){this.queries=Nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ye(n),o=s.queries;s.queries=Nv(),o.forEach((l,h)=>{for(const d of h.ba)d.onError(i)})})(this,new ne($.ABORTED,"Firestore shutting down"))}}function Nv(){return new Ws(t=>Q0(t),od)}async function ob(t,e){const n=ye(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new rb,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Ig(l,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Sg(n)}async function ab(t,e){const n=ye(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lb(t,e){const n=ye(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.ba)h.Fa(s)&&(i=!0);l.wa=s}}i&&Sg(n)}function ub(t,e,n){const i=ye(t),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(n);i.queries.delete(e)}function Sg(t){t.Ca.forEach(e=>{e.next()})}var Bp,bv;(bv=Bp||(Bp={})).Ma="default",bv.Cache="cache";class cb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class bI{constructor(e){this.key=e}}class hb{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ke(),this.mutatedKeys=ke(),this.eu=Y0(e),this.tu=new Yo(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Lv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,w)=>{const T=s.get(y),D=ad(this.query,w)?w:null,O=!!T&&this.mutatedKeys.has(T.key),U=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let Z=!1;T&&D?T.data.isEqual(D.data)?O!==U&&(i.track({type:3,doc:D}),Z=!0):this.su(T,D)||(i.track({type:2,doc:D}),Z=!0,(d&&this.eu(D,d)>0||m&&this.eu(D,m)<0)&&(h=!0)):!T&&D?(i.track({type:0,doc:D}),Z=!0):T&&!D&&(i.track({type:1,doc:T}),Z=!0,(d||m)&&(h=!0)),Z&&(D?(l=l.add(D),o=U?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Ss:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,w)=>function(D,O){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Vt:Z})}};return U(D)-U(O)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,m=d!==this.Xa;return this.Xa=d,l.length!==0||m?{snapshot:new fa(this.query,e.tu,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Lv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ke(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new bI(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new NI(i))}),n}cu(e){this.Za=e.ks,this.Ya=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pg="SyncEngine";class db{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class fb{constructor(e){this.key=e,this.hu=!1}}class pb{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ws(h=>Q0(h),od),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ye(ue.comparator),this.Au=new Map,this.Vu=new pg,this.du={},this.mu=new Map,this.fu=da.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mb(t,e,n=!0){const i=zI(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await DI(i,e,n,!0),s}async function gb(t,e){const n=zI(t);await DI(n,e,!0,!1)}async function DI(t,e,n,i){const s=await NN(t.localStore,gi(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await _b(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&AI(t.remoteStore,s),h}async function _b(t,e,n,i,s){t.pu=(w,T,D)=>async function(U,Z,N,A){let b=Z.view.ru(N);b.Ss&&(b=await Pv(U.localStore,Z.query,!1).then(({documents:P})=>Z.view.ru(P,b)));const q=A&&A.targetChanges.get(Z.targetId),Q=A&&A.targetMismatches.get(Z.targetId)!=null,X=Z.view.applyChanges(b,U.isPrimaryClient,q,Q);return Ov(U,Z.targetId,X.au),X.snapshot}(t,w,T,D);const o=await Pv(t.localStore,e,!0),l=new hb(e,o.ks),h=l.ru(o.documents),d=fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);Ov(t,n,m.au);const y=new db(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function yb(t,e,n){const i=ye(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!od(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await zp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&yg(i.remoteStore,s.targetId),jp(i,s.targetId)}).catch(wa)):(jp(i,s.targetId),await zp(i.localStore,s.targetId,!0))}async function vb(t,e){const n=ye(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),yg(n.remoteStore,i.targetId))}async function wb(t,e,n){const i=Cb(t);try{const s=await function(l,h){const d=ye(l),m=qe.now(),y=h.reduce((D,O)=>D.add(O.key),ke());let w,T;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>{let O=tr(),U=ke();return d.xs.getEntries(D,y).next(Z=>{O=Z,O.forEach((N,A)=>{A.isValidDocument()||(U=U.add(N))})}).next(()=>d.localDocuments.getOverlayedDocuments(D,O)).next(Z=>{w=Z;const N=[];for(const A of h){const b=LL(A,w.get(A.key).overlayedDocument);b!=null&&N.push(new Yr(A.key,b,j0(b.value.mapValue),_i.exists(!0)))}return d.mutationQueue.addMutationBatch(D,m,N,h)}).next(Z=>{T=Z;const N=Z.applyToLocalDocumentSet(w,U);return d.documentOverlayCache.saveOverlays(D,Z.batchId,N)})}).then(()=>({batchId:T.batchId,changes:X0(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.du[l.currentUser.toKey()];m||(m=new Ye(Ce)),m=m.insert(h,d),l.du[l.currentUser.toKey()]=m}(i,s.batchId,n),await mu(i,s.changes),await fd(i.remoteStore)}catch(s){const o=Ig(s,"Failed to persist write");n.reject(o)}}async function OI(t,e){const n=ye(t);try{const i=await RN(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Me(l.hu,14607):s.removedDocuments.size>0&&(Me(l.hu,42227),l.hu=!1))}),await mu(n,i,e)}catch(i){await wa(i)}}function Dv(t,e,n){const i=ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ye(l);d.onlineState=h;let m=!1;d.queries.forEach((y,w)=>{for(const T of w.ba)T.va(h)&&(m=!0)}),m&&Sg(d)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Tb(t,e,n){const i=ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new Ye(ue.comparator);l=l.insert(o,Ot.newNoDocument(o,_e.min()));const h=ke().add(o),d=new cd(_e.min(),new Map,new Ye(Ce),l,h);await OI(i,d),i.Ru=i.Ru.remove(o),i.Au.delete(e),Ag(i)}else await zp(i.localStore,e,!1).then(()=>jp(i,e,n)).catch(wa)}async function Eb(t,e){const n=ye(t),i=e.batch.batchId;try{const s=await kN(n.localStore,e);VI(n,i,null),MI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mu(n,s)}catch(s){await wa(s)}}async function Ib(t,e,n){const i=ye(t);try{const s=await function(l,h){const d=ye(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return d.mutationQueue.lookupMutationBatch(m,h).next(w=>(Me(w!==null,37113),y=w.keys(),d.mutationQueue.removeMutationBatch(m,w))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>d.localDocuments.getDocuments(m,y))})}(i.localStore,e);VI(i,e,n),MI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mu(i,s)}catch(s){await wa(s)}}function MI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function VI(t,e,n){const i=ye(t);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(i=>{t.Vu.containsKey(i)||FI(t,i)})}function FI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(yg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Ag(t))}function Ov(t,e,n){for(const i of n)i instanceof NI?(t.Vu.addReference(i.key,e),Sb(t,i)):i instanceof bI?(ie(Pg,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||FI(t,i.key)):de(19791,{wu:i})}function Sb(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(ie(Pg,"New document in limbo: "+n),t.Eu.add(i),Ag(t))}function Ag(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(Be.fromString(e)),i=t.fu.next();t.Au.set(i,new fb(n)),t.Ru=t.Ru.insert(n,i),AI(t.remoteStore,new Pr(gi(ug(n.path)),i,"TargetPurposeLimboResolution",id.ce))}}async function mu(t,e,n){const i=ye(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(m=>{var y;if((m||n)&&i.isPrimaryClient){const w=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(m){s.push(m);const w=gg.Es(d.targetId,m);o.push(w)}}))}),await Promise.all(l),i.Pu.J_(s),await async function(d,m){const y=ye(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>G.forEach(m,T=>G.forEach(T.Ts,D=>y.persistence.referenceDelegate.addReference(w,T.targetId,D)).next(()=>G.forEach(T.Is,D=>y.persistence.referenceDelegate.removeReference(w,T.targetId,D)))))}catch(w){if(!Ta(w))throw w;ie(_g,"Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const D=y.vs.get(T),O=D.snapshotVersion,U=D.withLastLimboFreeSnapshotVersion(O);y.vs=y.vs.insert(T,U)}}}(i.localStore,o))}async function Pb(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(Pg,"User change. New user:",e.toKey());const i=await EI(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ne($.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mu(n,i.Ns)}}function Ab(t,e){const n=ye(t),i=n.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let s=ke();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function zI(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ab.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tb.bind(null,e),e.Pu.J_=lb.bind(null,e.eventManager),e.Pu.yu=ub.bind(null,e.eventManager),e}function Cb(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Eb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ib.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CN(this.persistence,new SN,e.initialUser,this.serializer)}Cu(e){return new TI(mg.Vi,this.serializer)}Du(e){return new DN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class kb extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Ah,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new uN(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new TI(i=>Ah.Vi(i,n),this.serializer)}}class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pb.bind(null,this.syncEngine),await ib(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sb}()}createDatastore(e){const n=hd(e.databaseInfo.databaseId),i=zN(e.databaseInfo);return WN(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new $N(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Dv(this.syncEngine,n,0),function(){return kv.v()?new kv:new ON}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,y){const w=new pb(s,o,l,h,d,m);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ye(s);ie(Ms,"RemoteStore shutting down."),o.Ea.add(5),await pu(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hp.provider={build:()=>new Hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class xb{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie(qr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie(qr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ig(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),ie(qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await EI(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Lb(t);ie(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>xv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>xv(e.remoteStore,s)),t._onlineComponents=e}async function Lb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(qr,"Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new kh)}}else ie(qr,"Using default OfflineComponentProvider"),await _f(t,new kb(void 0));return t._offlineComponents}async function UI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(qr,"Using user provided OnlineComponentProvider"),await Mv(t,t._uninitializedComponentsProvider._online)):(ie(qr,"Using default OnlineComponentProvider"),await Mv(t,new Hp))),t._onlineComponents}function Nb(t){return UI(t).then(e=>e.syncEngine)}async function Vv(t){const e=await UI(t),n=e.eventManager;return n.onListen=mb.bind(null,e.syncEngine),n.onUnlisten=yb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vb.bind(null,e.syncEngine),n}function bb(t,e,n,i){const s=new Rb(i),o=new cb(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>ob(await Vv(t),o)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>ab(await Vv(t),o))}}function Db(t,e){const n=new Ps;return t.asyncQueue.enqueueAndForget(async()=>wb(await Nb(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="ComponentProvider",Fv=new Map;function Mb(t,e,n,i,s){return new Jx(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,BI(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firestore.googleapis.com",zv=!0;class Uv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jI,this.ssl=zv}else this.host=e.host,this.ssl=e.ssl??zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aN)throw new ne($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Lx;switch(i.type){case"firstParty":return new Ox(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Fv.get(n);i&&(ie(Ob,"Removing Datastore"),Fv.delete(n),i.terminate())}(this),Promise.resolve()}}function Vb(t,e,n,i={}){var m;t=As(t,pd);const s=Bs(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(Hm(`https://${h}`),Wm("Firestore",!0)),o.host!==jI&&o.host!==h&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!Yi(d,l)&&(t._setSettings(d),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=bt.MOCK_USER;else{y=VE(i.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ne($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new bt(T)}t._authCredentials=new Nx(new x0(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class ft{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(hu(n,ft._jsonSchema))return new ft(e,i||null,new ue(Be.fromString(n.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:dt("string",ft._jsonSchemaVersion),referencePath:dt("string")};class Vr extends $s{constructor(e,n,i){super(e,n,ug(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ue(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function Bv(t,e,...n){if(t=tt(t),L0("collection","path",e),t instanceof pd){const i=Be.fromString(e,...n);return Jy(i),new Vr(t,null,i)}{if(!(t instanceof ft||t instanceof Vr))throw new ne($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Jy(i),new Vr(t.firestore,null,i)}}function Fc(t,e,...n){if(t=tt(t),arguments.length===1&&(e=ig.newId()),L0("doc","path",e),t instanceof pd){const i=Be.fromString(e,...n);return Yy(i),new ft(t,null,new ue(i))}{if(!(t instanceof ft||t instanceof Vr))throw new ne($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return Yy(i),new ft(t.firestore,t instanceof Vr?t.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="AsyncQueue";class Hv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SI(this,"async_queue_retry"),this._c=()=>{const i=gf();i&&ie(jv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ps;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ta(e))throw e;ie(jv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",Wv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Eg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&de(47125,{Pc:Wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class eu extends pd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Hv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hv(e),this._firestoreClient=void 0,await e}}}function Fb(t,e){const n=typeof t=="object"?t:Jh(),i=typeof t=="string"?t:wh,s=Kr(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=DE("firestore");o&&Vb(s,...o)}return s}function HI(t){if(t._terminated)throw new ne($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zb(t),t._firestoreClient}function zb(t){var i,s,o,l;const e=t._freezeSettings(),n=Mb(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xb(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Ct.fromBase64String(e))}catch(n){throw new ne($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:dt("string",Rn._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(e){if(hu(e,vi._jsonSchema))return new vi(e.latitude,e.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:dt("string",vi._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Qn(e.vectorValues);throw new ne($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qn._jsonSchemaVersion="firestore/vectorValue/1.0",Qn._jsonSchema={type:dt("string",Qn._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=/^__.*__$/;class Bb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class WI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{dataSource:t})}}class gd{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(qI(this.dataSource)&&Ub.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jb{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hd(e)}createContext(e,n,i,s=!1){return new gd({dataSource:e,methodName:n,targetDoc:i,path:St.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kg(t){const e=t._freezeSettings(),n=hd(t._databaseId);return new jb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hb(t,e,n,i,s,o={}){const l=t.createContext(o.merge||o.mergeFields?2:0,e,n,s);xg("Data must be an object, but it was:",l,i);const h=$I(i,l);let d,m;if(o.merge)d=new dn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const T=pa(e,w,n);if(!l.contains(T))throw new ne($.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KI(y,T)||y.push(T)}d=new dn(y),m=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,m=l.fieldTransforms;return new Bb(new en(h),d,m)}class _d extends md{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}function Wb(t,e,n){return new gd({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rg extends md{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Wb(this,e,!0),i=this.Ac.map(o=>Sa(o,n)),s=new ha(i);return new CL(e.path,s)}isEqual(e){return e instanceof Rg&&Yi(this.Ac,e.Ac)}}function qb(t,e,n,i){const s=t.createContext(1,e,n);xg("Data must be an object, but it was:",s,i);const o=[],l=en.empty();Qr(i,(d,m)=>{const y=ZI(e,d,n);m=tt(m);const w=s.childContextForFieldPath(y);if(m instanceof _d)o.push(y);else{const T=Sa(m,w);T!=null&&(o.push(y),l.set(y,T))}});const h=new dn(o);return new WI(l,h,s.fieldTransforms)}function $b(t,e,n,i,s,o){const l=t.createContext(1,e,n),h=[pa(e,i,n)],d=[s];if(o.length%2!=0)throw new ne($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(pa(e,o[T])),d.push(o[T+1]);const m=[],y=en.empty();for(let T=h.length-1;T>=0;--T)if(!KI(m,h[T])){const D=h[T];let O=d[T];O=tt(O);const U=l.childContextForFieldPath(D);if(O instanceof _d)m.push(D);else{const Z=Sa(O,U);Z!=null&&(m.push(D),y.set(D,Z))}}const w=new dn(m);return new WI(y,w,l.fieldTransforms)}function Gb(t,e,n,i=!1){return Sa(n,t.createContext(i?4:3,e))}function Sa(t,e){if(GI(t=tt(t)))return xg("Unsupported field value:",e,t),$I(t,e);if(t instanceof md)return function(i,s){if(!qI(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=Sa(h,s.childContextForArray(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SL(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=qe.fromDate(i);return{timestampValue:Ph(s.serializer,o)}}if(i instanceof qe){const o=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,o)}}if(i instanceof vi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rn)return{bytesValue:dI(s.serializer,i._byteString)};if(i instanceof ft){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Qn)return function(l,h){const d=l instanceof Qn?l.toArray():l;return{mapValue:{fields:{[U0]:{stringValue:B0},[Th]:{arrayValue:{values:d.map(y=>{if(typeof y!="number")throw h.createError("VectorValues must only contain numeric values.");return cg(h.serializer,y)})}}}}}}(i,s);if(vI(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${nd(i)}`)}(t,e)}function $I(t,e){const n={};return D0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,(i,s)=>{const o=Sa(s,e.childContextForField(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function GI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof vi||t instanceof Rn||t instanceof ft||t instanceof md||t instanceof Qn||vI(t))}function xg(t,e,n){if(!GI(n)||!N0(n)){const i=nd(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function pa(t,e,n){if((e=tt(e))instanceof Cg)return e._internalPath;if(typeof e=="string")return ZI(t,e);throw Rh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Zb=new RegExp("[~\\*/\\[\\]]");function ZI(t,e,n){if(e.search(Zb)>=0)throw Rh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cg(...e.split("."))._internalPath}catch{throw Rh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ne($.INVALID_ARGUMENT,h+t+d)}function KI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Qr(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[Th].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>st(l.doubleValue));return new Qn(n)}convertGeoPoint(e){return new vi(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Br(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Me(yI(i),9688,{name:e});const s=new Ql(i.get(1),i.get(3)),o=new ue(i.popFirst(5));return s.isEqual(n)||er(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI extends Kb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function qv(...t){return new Rg("arrayUnion",t)}const $v="@firebase/firestore",Gv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Qb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(pa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Qb extends YI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class JI extends Lg{}function Jb(t,e,...n){let i=[];e instanceof Lg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof bg).length,h=o.filter(d=>d instanceof Ng).length;if(l>1||l>0&&h>0)throw new ne($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Ng extends JI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ng(e,n,i)}_apply(e){const n=this._parse(e);return XI(e._query,n),new $s(e.firestore,e.converter,bp(e._query,n))}_parse(e){const n=kg(e.firestore);return function(o,l,h,d,m,y,w){let T;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ne($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Qv(w,y);const O=[];for(const U of w)O.push(Kv(d,o,U));T={arrayValue:{values:O}}}else T=Kv(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Qv(w,y),T=Gb(h,l,w,y==="in"||y==="not-in");return ht.create(m,y,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class bg extends Lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)XI(l,d),l=bp(l,d)}(e._query,n),new $s(e.firestore,e.converter,bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dg extends JI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(o,l)}(e._query,this._field,this._direction);return new $s(e.firestore,e.converter,gL(e._query,n))}}function Xb(t,e="asc"){const n=e,i=pa("orderBy",t);return Dg._create(i,n)}function Kv(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new ne($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K0(e)&&n.indexOf("/")!==-1)throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ue.isDocumentKey(i))throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ov(t,new ue(i))}if(n instanceof ft)return ov(t,n._key);throw new ne($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(n)}.`)}function Qv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XI(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function eD(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cs extends YI{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(pa("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:dt("string",Cs._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class zc extends Cs{data(e={}){return super.data(e)}}class Jo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new zc(this._firestore,this._userDataWriter,i.key,i,new fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new fl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new fl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,y=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:tD(h.type),doc:d,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:dt("string",Jo._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};function yf(t,e,n,...i){t=As(t,ft);const s=As(t.firestore,eu),o=kg(s);let l;return l=typeof(e=tt(e))=="string"||e instanceof Cg?$b(o,"updateDoc",t._key,e,n,i):qb(o,"updateDoc",t._key,e),eS(s,[l.toMutation(t._key,_i.exists(!0))])}function nD(t,e){const n=As(t.firestore,eu),i=Fc(t),s=eD(t.converter,e),o=kg(t.firestore);return eS(n,[Hb(o,"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,_i.exists(!1))]).then(()=>i)}function iD(t,...e){var m,y,w;t=tt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Zv(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Zv(e[i])){const T=e[i];e[i]=(m=T.next)==null?void 0:m.bind(T),e[i+1]=(y=T.error)==null?void 0:y.bind(T),e[i+2]=(w=T.complete)==null?void 0:w.bind(T)}let o,l,h;if(t instanceof ft)l=As(t.firestore,eu),h=ug(t._key.path),o={next:T=>{e[i]&&e[i](rD(l,t,T))},error:e[i+1],complete:e[i+2]};else{const T=As(t,$s);l=As(T.firestore,eu),h=T._query;const D=new QI(l);o={next:O=>{e[i]&&e[i](new Jo(l,D,T,O))},error:e[i+1],complete:e[i+2]},Yb(t._query)}const d=HI(l);return bb(d,h,s,o)}function eS(t,e){const n=HI(t);return Db(n,e)}function rD(t,e,n){const i=n.docs.get(e._key),s=new QI(t);return new Cs(t,s,e._key,i,new fl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){xx(Hs),Jn(new Dn("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new eu(new bx(i.getProvider("auth-internal")),new Mx(l,i.getProvider("app-check-internal")),Xx(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),on($v,Gv,e),on($v,Gv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firebasestorage.googleapis.com",sD="storageBucket",oD=2*60*1e3,aD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends On{constructor(e,n,i=0){super(vf(e),`Firebase Storage: ${n} (${vf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ei;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ei||(Ei={}));function vf(t){return"storage/"+t}function lD(){const t="An unknown error occurred, please check the error payload for server response.";return new Ii(Ei.UNKNOWN,t)}function uD(){return new Ii(Ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cD(){return new Ii(Ei.CANCELED,"User canceled the upload/download.")}function hD(t){return new Ii(Ei.INVALID_URL,"Invalid URL '"+t+"'.")}function dD(t){return new Ii(Ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Yv(t){return new Ii(Ei.INVALID_ARGUMENT,t)}function nS(){return new Ii(Ei.APP_DELETED,"The Firebase app was deleted.")}function fD(t){return new Ii(Ei.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=$n.makeFromUrl(e,n)}catch{return new $n(e,"")}if(i.path==="")return i;throw dD(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function m(q){q.path_=decodeURIComponent(q.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",D=new RegExp(`^https?://${w}/${y}/b/${s}/o${T}`,"i"),O={bucket:1,path:3},U=n===tS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Z="([^?#]*)",N=new RegExp(`^https?://${U}/${s}/${Z}`,"i"),b=[{regex:h,indices:d,postModify:o},{regex:D,indices:O,postModify:m},{regex:N,indices:{bucket:1,path:2},postModify:m}];for(let q=0;q<b.length;q++){const Q=b[q],X=Q.regex.exec(e);if(X){const P=X[Q.indices.bucket];let S=X[Q.indices.path];S||(S=""),i=new $n(P,S),Q.postModify(i);break}}if(i==null)throw hD(e);return i}}class pD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t,e,n){let i=1,s=null,o=null,l=!1,h=0;function d(){return h===2}let m=!1;function y(...Z){m||(m=!0,e.apply(null,Z))}function w(Z){s=setTimeout(()=>{s=null,t(D,d())},Z)}function T(){o&&clearTimeout(o)}function D(Z,...N){if(m){T();return}if(Z){T(),y.call(null,Z,...N);return}if(d()||l){T(),y.call(null,Z,...N);return}i<64&&(i*=2);let b;h===1?(h=2,b=0):b=(i+Math.random())*1e3,w(b)}let O=!1;function U(Z){O||(O=!0,T(),!m&&(s!==null?(Z||(h=2),clearTimeout(s),w(0)):Z||(h=1)))}return w(0),o=setTimeout(()=>{l=!0,U(!0)},n),U}function gD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){return t!==void 0}function Jv(t,e,n,i){if(i<e)throw Yv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Yv(`Invalid value for '${t}'. Expected ${n} or less.`)}function yD(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var xh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xh||(xh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,i,s,o,l,h,d,m,y,w,T=!0,D=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,U)=>{this.resolve_=O,this.reject_=U,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new gc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===xh.NO_ERROR,d=o.getStatus();if(!h||vD(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===xh.ABORT;i(!1,new gc(!1,null,y));return}const m=this.successCodes_.indexOf(d)!==-1;i(!0,new gc(m,o))})},n=(i,s)=>{const o=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());_D(d)?o(d):o()}catch(d){l(d)}else if(h!==null){const d=lD();d.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,d)):l(d)}else if(s.canceled){const d=this.appDelete_?nS():cD();l(d)}else{const d=uD();l(d)}};this.canceled_?n(!1,new gc(!1,null,!0)):this.backoffId_=mD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function TD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ED(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ID(t,e){e&&(t["X-Firebase-GMPID"]=e)}function SD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PD(t,e,n,i,s,o,l=!0,h=!1){const d=yD(t.urlParams),m=t.url+d,y=Object.assign({},t.headers);return ID(y,e),TD(y,n),ED(y,o),SD(y,i),new wD(m,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this._service=e,n instanceof $n?this._location=n:this._location=$n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Lh(e,n)}get root(){const e=new $n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CD(this._location.path)}get storage(){return this._service}get parent(){const e=AD(this._location.path);if(e===null)return null;const n=new $n(this._location.bucket,e);return new Lh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fD(e)}}function Xv(t,e){const n=e==null?void 0:e[sD];return n==null?null:$n.makeFromBucketSpec(n,t)}function kD(t,e,n,i={}){t.host=`${e}:${n}`;const s=Bs(e);s&&(Hm(`https://${t.host}/b`),Wm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:VE(o,t.app.options.projectId))}class RD{constructor(e,n,i,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=tS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oD,this._maxUploadRetryTime=aD,this._requests=new Set,s!=null?this._bucket=$n.makeFromBucketSpec(s,this._host):this._bucket=Xv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$n.makeFromBucketSpec(this._url,e):this._bucket=Xv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lh(this,e)}_makeRequest(e,n,i,s,o=!0){if(this._deleted)return new pD(nS());{const l=PD(e,this._appId,i,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const ew="@firebase/storage",tw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="storage";function xD(t=Jh(),e){t=tt(t);const i=Kr(t,iS).getImmediate({identifier:e}),s=DE("storage");return s&&LD(i,...s),i}function LD(t,e,n,i={}){kD(t,e,n,i)}function ND(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new RD(n,i,s,e,Hs)}function bD(){Jn(new Dn(iS,ND,"PUBLIC").setMultipleInstances(!0)),on(ew,tw,""),on(ew,tw,"esm2020")}bD();const rS="@firebase/installations",Og="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=1e4,oS=`w:${Og}`,aS="FIS_v2",DD="https://firebaseinstallations.googleapis.com/v1",OD=60*60*1e3,MD="installations",VD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new js(MD,VD,FD);function lS(t){return t instanceof On&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS({projectId:t}){return`${DD}/projects/${t}/installations`}function cS(t){return{token:t.token,requestStatus:2,expiresIn:UD(t.expiresIn),creationTime:Date.now()}}async function hS(t,e){const i=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function dS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function zD(t,{refreshToken:e}){const n=dS(t);return n.append("Authorization",BD(e)),n}async function fS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UD(t){return Number(t.replace("s","000"))}function BD(t){return`${aS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=uS(t),s=dS(t),o=e.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const l={fid:n,authVersion:aS,appId:t.appId,sdkVersion:oS},h={method:"POST",headers:s,body:JSON.stringify(l)},d=await fS(()=>fetch(i,h));if(d.ok){const m=await d.json();return{fid:m.fid||n,registrationStatus:2,refreshToken:m.refreshToken,authToken:cS(m.authToken)}}else throw await hS("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^[cdef][\w-]{21}$/,Wp="";function qD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$D(t);return WD.test(n)?n:Wp}catch{return Wp}}function $D(t){return HD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new Map;function gS(t,e){const n=yd(t);_S(n,e),GD(n,e)}function _S(t,e){const n=mS.get(t);if(n)for(const i of n)i(e)}function GD(t,e){const n=ZD();n&&n.postMessage({key:t,fid:e}),KD()}let Ts=null;function ZD(){return!Ts&&"BroadcastChannel"in self&&(Ts=new BroadcastChannel("[Firebase] FID Change"),Ts.onmessage=t=>{_S(t.data.key,t.data.fid)}),Ts}function KD(){mS.size===0&&Ts&&(Ts.close(),Ts=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="firebase-installations-database",YD=1,Fs="firebase-installations-store";let wf=null;function Mg(){return wf||(wf=HE(QD,YD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fs)}}})),wf}async function Nh(t,e){const n=yd(t),s=(await Mg()).transaction(Fs,"readwrite"),o=s.objectStore(Fs),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&gS(t,e.fid),e}async function yS(t){const e=yd(t),i=(await Mg()).transaction(Fs,"readwrite");await i.objectStore(Fs).delete(e),await i.done}async function vd(t,e){const n=yd(t),s=(await Mg()).transaction(Fs,"readwrite"),o=s.objectStore(Fs),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await s.done,h&&(!l||l.fid!==h.fid)&&gS(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vg(t){let e;const n=await vd(t.appConfig,i=>{const s=JD(i),o=XD(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Wp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function JD(t){const e=t||{fid:qD(),registrationStatus:0};return vS(e)}function XD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=eO(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tO(t)}:{installationEntry:e}}async function eO(t,e){try{const n=await jD(t,e);return Nh(t.appConfig,n)}catch(n){throw lS(n)&&n.customData.serverCode===409?await yS(t.appConfig):await Nh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tO(t){let e=await nw(t.appConfig);for(;e.registrationStatus===1;)await pS(100),e=await nw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Vg(t);return i||n}return e}function nw(t){return vd(t,e=>{if(!e)throw Vs.create("installation-not-found");return vS(e)})}function vS(t){return nO(t)?{fid:t.fid,registrationStatus:0}:t}function nO(t){return t.registrationStatus===1&&t.registrationTime+sS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO({appConfig:t,heartbeatServiceProvider:e},n){const i=rO(t,n),s=zD(t,n),o=e.getImmediate({optional:!0});if(o){const m=await o.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const l={installation:{sdkVersion:oS,appId:t.appId}},h={method:"POST",headers:s,body:JSON.stringify(l)},d=await fS(()=>fetch(i,h));if(d.ok){const m=await d.json();return cS(m)}else throw await hS("Generate Auth Token",d)}function rO(t,{fid:e}){return`${uS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(t,e=!1){let n;const i=await vd(t.appConfig,o=>{if(!wS(o))throw Vs.create("not-registered");const l=o.authToken;if(!e&&aO(l))return o;if(l.requestStatus===1)return n=sO(t,e),o;{if(!navigator.onLine)throw Vs.create("app-offline");const h=uO(o);return n=oO(t,h),h}});return n?await n:i.authToken}async function sO(t,e){let n=await iw(t.appConfig);for(;n.authToken.requestStatus===1;)await pS(100),n=await iw(t.appConfig);const i=n.authToken;return i.requestStatus===0?Fg(t,e):i}function iw(t){return vd(t,e=>{if(!wS(e))throw Vs.create("not-registered");const n=e.authToken;return cO(n)?{...e,authToken:{requestStatus:0}}:e})}async function oO(t,e){try{const n=await iO(t,e),i={...e,authToken:n};return await Nh(t.appConfig,i),n}catch(n){if(lS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yS(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Nh(t.appConfig,i)}throw n}}function wS(t){return t!==void 0&&t.registrationStatus===2}function aO(t){return t.requestStatus===2&&!lO(t)}function lO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+OD}function uO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function cO(t){return t.requestStatus===1&&t.requestTime+sS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(t){const e=t,{installationEntry:n,registrationPromise:i}=await Vg(e);return i?i.catch(console.error):Fg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e=!1){const n=t;return await fO(n),(await Fg(n,e)).token}async function fO(t){const{registrationPromise:e}=await Vg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){if(!t||!t.options)throw Tf("App Configuration");if(!t.name)throw Tf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Tf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Tf(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="installations",mO="installations-internal",gO=t=>{const e=t.getProvider("app").getImmediate(),n=pO(e),i=Kr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},_O=t=>{const e=t.getProvider("app").getImmediate(),n=Kr(e,TS).getImmediate();return{getId:()=>hO(n),getToken:s=>dO(n,s)}};function yO(){Jn(new Dn(TS,gO,"PUBLIC")),Jn(new Dn(mO,_O,"PRIVATE"))}yO();on(rS,Og);on(rS,Og,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh="analytics",vO="firebase_id",wO="origin",TO=60*1e3,EO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new Yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},pn=new js("analytics","Analytics",IO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){if(!t.startsWith(zg)){const e=pn.create("invalid-gtag-resource",{gtagURL:t});return Wt.warn(e.message),""}return t}function ES(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function PO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AO(t,e){const n=PO("firebase-js-sdk-policy",{createScriptURL:SO}),i=document.createElement("script"),s=`${zg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function CO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kO(t,e,n,i,s,o){const l=i[s];try{if(l)await e[l];else{const d=(await ES(n)).find(m=>m.measurementId===s);d&&await e[d.appId]}}catch(h){Wt.error(h)}t("config",s,o)}async function RO(t,e,n,i,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const h=await ES(n);for(const d of l){const m=h.find(w=>w.measurementId===d),y=m&&e[m.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,s||{})}catch(o){Wt.error(o)}}function xO(t,e,n,i){async function s(o,...l){try{if(o==="event"){const[h,d]=l;await RO(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await kO(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,m]=l;t("get",h,d,m)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){Wt.error(h)}}return s}function LO(t,e,n,i,s){let o=function(...l){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=xO(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function NO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(zg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=30,DO=1e3;class OO{constructor(e={},n=DO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IS=new OO;function MO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function VO(t){var l;const{appId:e,apiKey:n}=t,i={method:"GET",headers:MO(n)},s=EO.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let h="";try{const d=await o.json();(l=d.error)!=null&&l.message&&(h=d.error.message)}catch{}throw pn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:h})}return o.json()}async function FO(t,e=IS,n){const{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw pn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw pn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new BO;return setTimeout(async()=>{h.abort()},TO),SS({appId:i,apiKey:s,measurementId:o},l,h,e)}async function SS(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=IS){var h;const{appId:o,measurementId:l}=t;try{await zO(i,e)}catch(d){if(l)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw d}try{const d=await VO(t);return s.deleteThrottleMetadata(o),d}catch(d){const m=d;if(!UO(m)){if(s.deleteThrottleMetadata(o),l)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:l};throw d}const y=Number((h=m==null?void 0:m.customData)==null?void 0:h.httpStatus)===503?Ey(n,s.intervalMillis,bO):Ey(n,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return s.setThrottleMetadata(o,w),Wt.debug(`Calling attemptFetch again in ${y} millis`),SS(t,w,i,s)}}function zO(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),i(pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UO(t){if(!(t instanceof On)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class BO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jO(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const o=await e,l={...i,send_to:o};t("event",n,l)}}async function HO(t,e,n,i){if(i&&i.global){const s={};for(const o of Object.keys(n))s[`user_properties.${o}`]=n[o];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(){if(zE())try{await UE()}catch(t){return Wt.warn(pn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Wt.warn(pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qO(t,e,n,i,s,o,l){const h=FO(t);h.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Wt.error(T)),e.push(h);const d=WO().then(T=>{if(T)return i.getId()}),[m,y]=await Promise.all([h,d]);NO(o)||AO(o,m.measurementId),s("js",new Date);const w=(l==null?void 0:l.config)??{};return w[wO]="firebase",w.update=!0,y!=null&&(w[vO]=y),s("config",m.measurementId,w),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.app=e}_delete(){return delete Xo[this.app.options.appId],Promise.resolve()}}let Xo={},rw=[];const sw={};let Ef="dataLayer",GO="gtag",ow,Ug,aw=!1;function ZO(){const t=[];if(FE()&&t.push("This is a browser extension environment."),l1()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=pn.create("invalid-analytics-context",{errorInfo:e});Wt.warn(n.message)}}function KO(t,e,n){ZO();const i=t.options.appId;if(!i)throw pn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw pn.create("no-api-key");if(Xo[i]!=null)throw pn.create("already-exists",{id:i});if(!aw){CO(Ef);const{wrappedGtag:o,gtagCore:l}=LO(Xo,rw,sw,Ef,GO);Ug=o,ow=l,aw=!0}return Xo[i]=qO(t,rw,sw,e,ow,Ef,n),new $O(t)}function QO(t=Jh()){t=tt(t);const e=Kr(t,bh);return e.isInitialized()?e.getImmediate():YO(t)}function YO(t,e={}){const n=Kr(t,bh);if(n.isInitialized()){const s=n.getImmediate();if(Yi(e,n.getOptions()))return s;throw pn.create("already-initialized")}return n.initialize({options:e})}function JO(t,e,n){t=tt(t),HO(Ug,Xo[t.app.options.appId],e,n).catch(i=>Wt.error(i))}function XO(t,e,n,i){t=tt(t),jO(Ug,Xo[t.app.options.appId],e,n,i).catch(s=>Wt.error(s))}const lw="@firebase/analytics",uw="0.10.19";function eM(){Jn(new Dn(bh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return KO(i,s,n)},"PUBLIC")),Jn(new Dn("analytics-internal",t,"PRIVATE")),on(lw,uw),on(lw,uw,"esm2020");function t(e){try{const n=e.getProvider(bh).getImmediate();return{logEvent:(i,s,o)=>XO(n,i,s,o),setUserProperties:(i,s)=>JO(n,i,s)}}catch(n){throw pn.create("interop-component-reg-failed",{reason:n})}}}eM();const tM={apiKey:"AIzaSyBKVCTgGiEwdDb4jUUlGmowv9oUex6VNwo",authDomain:"straycat-fc643.firebaseapp.com",projectId:"straycat-fc643",storageBucket:"straycat-fc643.firebasestorage.app",messagingSenderId:"425334696866",appId:"1:425334696866:web:710c1db1aff1807e8160fb",measurementId:"G-C28QQTJ2HH"},wd=WE(tM),sl=Fb(wd);xD(wd);QO(wd);const If=Ax(wd),nM=new Bi,iM={ko:{appTitle:"  ",headerDescAdding:"      ",headerDescDefault:"     '  '     ",addBtn:"   ",editTitle:"   ",addTitle:"  ",labelName:"",labelDesc:"",placeholderDesc:"ex) ,   ",labelNeeds:"",labelCustomNeeds:"   ",labelFoundDate:" ",labelFirstFound:" ",labelFoundTime:" ",labelCondition:" ",labelStatusSidebar:"",labelNeutered:"",labelPhoto:" URL ()",labelPhone:"  ()",placeholderPhone:"(         )",submitUpdate:" ",submitAdd:" ",submitAdd:" ",toastSubmitted:" !",catSearchPlaceholder:"  ...",optNone:"(  )",optNeuter:" ",optTreat:"  ",optCare:"   ",optCustom:" ",optGood:"",optAvg:"",optThin:"",optVerified:"(TNR )",optNotDone:"",optUnknown:"",foundAt:" (  )",status:"Status",tnr:"TNR",helpReq:"   ",helpers:"  ",helpersList:"   :",btnHelp:"  ",careReq:"   ",careCount:" ",lastMeal:"  :",btnRecordCare:" /  ()",otherNeeds:" :",btnEdit:"  ",careTitle:"   ",careDesc:"     ?  !",labelDate:"",labelTime:"",btnComplete:" ",helpTitle:"  ",helpDesc:"   ?       .",labelContact:"",placeholderContact:"010-0000-0000",btnRegisterHelp:" ",alertThanks:"  !   .",alertCare:"  ! ",alertError:" .",alertSaveError:" .  .",historyTitle:"   ",historyEmpty:"  .",noticeNeuter:"        !"},en:{appTitle:" Stray Cat Map",headerDescAdding:" Click a location on the map to register",headerDescDefault:"Click 'Register New Cat' below, then click on the map to add a cat",addBtn:" Register New Cat",editTitle:" Edit Cat Info",addTitle:" Report a Cat",labelName:"Name",labelDesc:"Description",placeholderDesc:"ex) Mackerel tabby, right eye injured",labelNeeds:"Needs",labelCustomNeeds:"Enter specific needs",labelFoundDate:"Found Date",labelFirstFound:"First Found",labelFoundTime:"Found Time",labelCondition:"Condition",labelStatusSidebar:"Status",labelNeutered:"Neutered",labelPhoto:"Photo URL (Optional)",labelPhone:"Contact (Optional)",placeholderPhone:"(Enter if immediate joint vet visit is needed)",submitUpdate:"Update",submitAdd:"Submit",submitAdd:"Submit",toastSubmitted:"Report submitted!",catSearchPlaceholder:"Search cat by name...",optNone:"None",optNeuter:"Needs Neuter",optTreat:"Needs Treatment",optCare:"Needs Regular Caretaker",optCustom:"Custom Input",optGood:"Good",optAvg:"Average",optThin:"Thin",optVerified:"Verified (TNR Done)",optNotDone:"Not Done",optUnknown:"Unknown",foundAt:" Found:",status:"Status",tnr:"TNR",helpReq:" Help Needed",helpers:"helping",helpersList:" Helpers:",btnHelp:" Offer Help",careReq:" Caretakers Wanted",careCount:"cares",lastMeal:" Last Meal:",btnRecordCare:" Fed/Watered (Record)",otherNeeds:"Other Needs:",btnEdit:" Edit Info",careTitle:" Record Care",careDesc:"Did you feed or water the cat today? Please record the time!",labelDate:"Date",labelTime:"Time",btnComplete:"Complete",helpTitle:" Offer Help",helpDesc:"Can you help? Leave your contact to coordinate with others.",labelContact:"Contact",placeholderContact:"Phone Number",btnRegisterHelp:"Register Help",alertThanks:"Thank you for helping!  Contact registered.",alertCare:"Care record added! ",alertError:"An error occurred.",alertSaveError:"Failed to save. Check console.",historyTitle:" Care History",historyEmpty:"No records yet.",noticeNeuter:" Contact your local district office for neutering support!"}},rM=new DC.DivIcon({className:"custom-cat-icon",html:'<div style="background: white; border: 2px solid #FFD700; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div>',iconSize:[30,30],iconAnchor:[15,15]});function sM({selectedCat:t,markersRef:e,searchResult:n}){const i=RE();return le.useEffect(()=>{if(t&&e.current[t.id]){i.flyTo([t.lat,t.lng],16,{duration:1.5});const s=e.current[t.id];s&&window.innerWidth>=768&&setTimeout(()=>s.openPopup(),1500)}},[t,i,e]),le.useEffect(()=>{n&&i.flyTo([n.lat,n.lng],15,{duration:1.5})},[n,i]),null}function oM({onMapClick:t,isAdding:e,setIsAdding:n}){return UC({click(i){e&&t(i.latlng)},keydown(i){i.originalEvent.key==="Escape"&&n(!1)}}),null}function aM(){const[t,e]=le.useState([]),[n,i]=le.useState(!1),[s,o]=le.useState(!1),[l,h]=le.useState(!1),[d,m]=le.useState(null),[y,w]=le.useState(null),[T,D]=le.useState("ko"),[O,U]=le.useState(null);le.useEffect(()=>{const V=pR(If,we=>{U(we)});return()=>V()},[]);const Z=async()=>{try{await OR(If,nM)}catch(V){console.error("Login failed:",V),alert("   .")}},N=async()=>{try{await mR(If),Q(null)}catch(V){console.error("Logout failed:",V)}},[A,b]=le.useState(!1),[q,Q]=le.useState(null),[X,P]=le.useState(window.innerWidth<768),S=le.useRef({}),I=iM[T],x=()=>{D(V=>V==="ko"?"en":"ko")},[R,M]=le.useState(""),[C,Ve]=le.useState(""),[an,nt]=le.useState(null),Gt=async()=>{if(C.trim())try{const we=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(C)}`)).json();if(we&&we.length>0){const{lat:Ft,lon:yn}=we[0];nt({lat:parseFloat(Ft),lng:parseFloat(yn),timestamp:Date.now()})}else alert(I.searchNoResult||"   .")}catch(V){console.error("Search failed:",V),alert("   .")}};le.useEffect(()=>{const V=()=>P(window.innerWidth<768);return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const[W,oe]=le.useState({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),[J,ce]=le.useState(!1),[ve,He]=le.useState(null),[Te,Ee]=le.useState({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].slice(0,5)}),[fe,Je]=le.useState(!1),[kt,ir]=le.useState({phone:""});le.useEffect(()=>{const V=Jb(Bv(sl,"cats"),Xb("id","desc")),we=iD(V,Ft=>{const yn=[];Ft.forEach(Ks=>{yn.push({...Ks.data(),firestoreId:Ks.id})}),e(yn)});return()=>we()},[]);const Jr=()=>{if(!O){alert("  .");return}i(!0),w(null),oe({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""})},Xr=V=>{m(V),w(null),oe({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),o(!0),i(!1)},ei=V=>{w(V.id),oe({name:V.name,desc:V.desc,condition:V.condition,neutered:V.neutered,photo:V.photo,foundDate:V.foundDate||new Date().toISOString().split("T")[0],foundTime:V.foundTime||"12:00",needs:V.needs||"",customNeeds:V.customNeeds||"",helpers:V.helpers||0,caretakers:V.caretakers||0,phone:V.phone||""}),m({lat:V.lat,lng:V.lng}),o(!0)},Si=V=>{Q(V)},Gs=V=>{He(V),ir({phone:""}),Je(!0)},Zs=async V=>{if(V.preventDefault(),!!ve)try{const we=Fc(sl,"cats",ve.firestoreId);await yf(we,{helpers:(ve.helpers||0)+1,helpersList:qv({phone:kt.phone,createdAt:new Date})}),Je(!1),alert(I.alertThanks)}catch(we){console.error("Error updating helpers:",we),alert(I.alertError)}},rr=V=>{He(V),Ee({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].slice(0,5)}),ce(!0)},Pi=async V=>{if(V.preventDefault(),!!ve)try{const we=Fc(sl,"cats",ve.firestoreId);await yf(we,{caretakers:(ve.caretakers||0)+1,careHistory:qv({date:Te.date,time:Te.time,createdAt:new Date})}),ce(!1),alert(I.alertCare)}catch(we){console.error("Error updating care history:",we),alert(I.alertError)}},Ai=async V=>{V.preventDefault();try{if(y){const we=Fc(sl,"cats",t.find(Ft=>Ft.id===y).firestoreId);await yf(we,W)}else await nD(Bv(sl,"cats"),{...W,id:Date.now(),lat:d.lat,lng:d.lng,createdAt:new Date,userId:O.uid,userEmail:O.email});o(!1),h(!0),oe({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),w(null),setTimeout(()=>h(!1),3e3)}catch(we){console.error("Error saving document: ",we),alert(I.alertSaveError)}},it=V=>{const we=!O;return F.jsxs("div",{className:`cat-details-content ${we?"blur-container":""}`,children:[V.photo&&F.jsx("img",{src:V.photo,alt:V.name,className:`cat-detail-img ${we?"blur-content":""}`}),F.jsx("h3",{children:we?"   ":V.name}),F.jsxs("div",{className:we?"blur-content":"",children:[F.jsxs("p",{className:"cat-detail-meta",children:[I.foundAt," ",V.foundDate," ",V.foundTime]}),F.jsx("p",{className:"cat-detail-desc",children:V.desc}),F.jsxs("div",{className:"cat-badges",children:[F.jsxs("span",{className:"badge",children:[I.status,": ",V.condition]}),F.jsxs("span",{className:"badge",children:[I.tnr,": ",V.neutered]})]})]}),F.jsx("div",{className:`cat-needs-section ${we?"blur-content":""}`,children:V.needs&&V.needs!==""&&F.jsx("div",{className:"needs-box",children:V.needs===" "||V.needs==="  "?F.jsxs(F.Fragment,{children:[F.jsx("span",{className:"needs-urgent",children:I.helpReq}),F.jsxs("div",{className:"needs-text",children:[V.needs," (",V.helpers||0,I.helpers,")"]}),V.helpersList&&V.helpersList.length>0&&F.jsxs("div",{className:"helpers-list",children:[F.jsx("strong",{children:I.helpersList}),F.jsx("ul",{children:V.helpersList.map((Ft,yn)=>F.jsx("li",{children:Ft.phone},yn))})]}),F.jsx("button",{onClick:()=>Gs(V),className:"action-btn help-btn",disabled:!O,children:I.btnHelp})]}):V.needs==="   "?F.jsxs(F.Fragment,{children:[F.jsx("span",{className:"care-req-title",children:I.careReq}),F.jsxs("div",{className:"needs-text",children:[V.needs," (",V.caretakers||0,I.careCount,")"]}),V.careHistory&&V.careHistory.length>0&&F.jsxs("div",{className:"care-history",onClick:()=>O&&b(!0),style:{cursor:O?"pointer":"default",textDecoration:O?"underline":"none"},children:[I.lastMeal," ",V.careHistory[V.careHistory.length-1].date," ",V.careHistory[V.careHistory.length-1].time]}),F.jsx("button",{onClick:()=>rr(V),className:"action-btn care-btn",disabled:!O,children:I.btnRecordCare})]}):V.needs===" "?F.jsxs(F.Fragment,{children:[F.jsx("strong",{children:I.otherNeeds})," ",V.customNeeds]}):F.jsx("span",{children:V.needs})})}),V.phone&&F.jsxs("div",{className:`contact-box ${we?"blur-content":""}`,children:[" ",V.phone]}),O&&F.jsx("button",{onClick:()=>ei(V),className:"edit-btn",children:I.btnEdit}),!O&&F.jsx("div",{className:"login-overlay-message",style:{textAlign:"center",marginTop:"10px",color:"#666",fontSize:"0.9rem"},children:F.jsx("p",{children:"    ."})})]})};return F.jsxs("div",{className:"app-container",children:[F.jsx("button",{className:"lang-toggle",onClick:x,children:T==="ko"?"English":""}),F.jsxs("aside",{className:"sidebar",children:[F.jsxs("div",{className:"sidebar-header",children:[F.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[F.jsx("h1",{style:{margin:0},children:I.appTitle}),O?F.jsxs("div",{className:"user-profile",children:[O.photoURL&&F.jsx("img",{src:O.photoURL,alt:"Profile",className:"user-avatar"}),F.jsx("button",{className:"login-btn",onClick:N,style:{padding:"4px 10px",fontSize:"0.75rem"},children:""})]}):F.jsxs("button",{className:"login-btn",onClick:Z,children:[F.jsx("span",{children:"G"}),"  "]})]}),F.jsx("p",{children:I.headerDescDefault}),O&&F.jsx("div",{style:{marginTop:"10px"},children:F.jsx("button",{className:"filter-my-btn",onClick:()=>M(V=>V==="MY_CATS"?"":"MY_CATS"),children:R==="MY_CATS"?" ":"  "})}),F.jsx("div",{className:"sidebar-search",children:F.jsx("input",{type:"text",placeholder:I.catSearchPlaceholder,value:R,onChange:V=>M(V.target.value)})})]}),F.jsxs("div",{className:"cat-list",children:[t.filter(V=>R==="MY_CATS"?O&&V.userId===O.uid:V.name.toLowerCase().includes(R.toLowerCase())).map(V=>F.jsxs("div",{className:"cat-card",onClick:()=>Q(V),children:[F.jsxs("div",{className:"cat-info-row",children:[F.jsxs("span",{className:"cat-label",children:[I.labelName,":"]}),F.jsx("span",{className:"cat-value",children:F.jsx("strong",{children:V.name})})]}),F.jsxs("div",{className:"cat-info-row",children:[F.jsxs("span",{className:"cat-label",children:[I.labelFirstFound,":"]}),F.jsx("span",{className:"cat-value",children:V.foundDate})]}),F.jsxs("div",{className:"cat-info-row",children:[F.jsxs("span",{className:"cat-label",children:[I.labelDesc,":"]}),F.jsx("span",{className:"cat-value desc-text",children:V.desc})]}),F.jsxs("div",{className:"cat-info-row",children:[F.jsxs("span",{className:"cat-label",children:[I.labelStatusSidebar,":"]}),F.jsxs("span",{className:"cat-value",children:[F.jsx("span",{className:`status-dot ${V.condition===""?"good":"bad"}`}),V.condition]})]}),V.needs&&V.needs!==""&&V.needs!=="None"&&F.jsxs("div",{className:"cat-info-row needs-row",children:[F.jsxs("span",{className:"cat-label",children:[I.labelNeeds,":"]}),F.jsx("span",{className:"cat-value needs-text",children:V.needs===" "||V.needs==="Custom Input"?V.customNeeds:V.needs})]})]},V.id)),t.filter(V=>R==="MY_CATS"?O&&V.userId===O.uid:V.name.toLowerCase().includes(R.toLowerCase())).length===0&&F.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:T==="en"?"No cats found.":"  ."})]})]}),F.jsxs("div",{className:"map-wrapper",children:[F.jsxs(jC,{center:[37.5708,126.9801],zoom:17,minZoom:7,maxBounds:[[33,124],[43,132]],id:"map-container",className:n?"cursor-crosshair":"",zoomControl:!1,children:[F.jsx(yy,{url:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",attribution:" OpenStreetMap",className:"map-base-layer",zIndex:1}),F.jsx(yy,{url:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",className:"map-label-layer",zIndex:100}),F.jsx(oM,{onMapClick:Xr,isAdding:n,setIsAdding:i}),F.jsx(sM,{selectedCat:q,markersRef:S,searchResult:an}),t.map(V=>F.jsx(HC,{position:[V.lat,V.lng],icon:rM,ref:we=>S.current[V.id]=we,eventHandlers:{click:()=>Si(V)},children:!X&&F.jsx(WC,{children:F.jsx("div",{className:"cat-popup",children:it(V)})})},V.id))]}),F.jsxs("div",{className:"search-container",children:[F.jsx("input",{type:"text",className:"search-input",placeholder:I.searchPlaceholder||"Search location...",value:C,onChange:V=>Ve(V.target.value),onKeyPress:V=>V.key==="Enter"&&Gt()}),F.jsx("button",{className:"search-btn",onClick:Gt,children:""})]}),F.jsxs("div",{className:"fab-container",children:[F.jsx("button",{className:"add-fab",onClick:Jr,children:F.jsx("span",{children:"+"})}),n&&F.jsx("div",{className:"fab-tooltip",children:I.headerDescAdding})]}),X&&q&&F.jsx("div",{className:"bottom-sheet-overlay",onClick:()=>Q(null),children:F.jsxs("div",{className:"bottom-sheet",onClick:V=>V.stopPropagation(),children:[F.jsx("div",{className:"sheet-handle"}),F.jsx("div",{className:"sheet-content",children:it(q)})]})})]}),s&&F.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:F.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[F.jsx("button",{className:"modal-close-btn",onClick:()=>o(!1),children:""}),F.jsx("h2",{children:y?I.editTitle:I.addTitle}),F.jsxs("form",{onSubmit:Ai,children:[F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelName}),F.jsx("input",{type:"text",required:!0,value:W.name,onChange:V=>oe({...W,name:V.target.value})})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelDesc}),F.jsx("textarea",{required:!0,placeholder:I.placeholderDesc,value:W.desc,onChange:V=>oe({...W,desc:V.target.value})})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelNeeds}),F.jsxs("select",{value:W.needs,onChange:V=>oe({...W,needs:V.target.value}),children:[F.jsx("option",{value:"",children:I.optNone}),F.jsx("option",{value:" ",children:I.optNeuter}),F.jsx("option",{value:"  ",children:I.optTreat}),F.jsx("option",{value:"   ",children:I.optCare}),F.jsx("option",{value:" ",children:I.optCustom})]}),W.needs===" "&&F.jsx("p",{style:{marginTop:"5px",fontSize:"0.8rem",color:"#e17055"},children:I.noticeNeuter}),W.needs===" "&&F.jsx("input",{type:"text",style:{marginTop:"5px"},placeholder:I.labelCustomNeeds,required:!0,value:W.customNeeds,onChange:V=>oe({...W,customNeeds:V.target.value})})]}),F.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelFoundDate}),F.jsx("input",{type:"date",required:!0,value:W.foundDate,onChange:V=>oe({...W,foundDate:V.target.value})})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelFoundTime}),F.jsx("select",{required:!0,value:W.foundTime,onChange:V=>oe({...W,foundTime:V.target.value}),children:Array.from({length:24}).map((V,we)=>{const Ft=we.toString().padStart(2,"0");return F.jsx("option",{value:`${Ft}:00`,children:`${Ft}:00`},we)})})]})]}),F.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelCondition}),F.jsxs("select",{required:!0,value:W.condition,onChange:V=>oe({...W,condition:V.target.value}),children:[F.jsx("option",{value:"",children:I.optGood}),F.jsx("option",{value:"",children:I.optAvg}),F.jsx("option",{value:"",children:I.optThin})]})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelNeutered}),F.jsxs("select",{required:!0,value:W.neutered,onChange:V=>oe({...W,neutered:V.target.value}),children:[F.jsx("option",{value:"(TNR )",children:I.optVerified}),F.jsx("option",{value:"",children:I.optNotDone}),F.jsx("option",{value:"",children:I.optUnknown})]})]})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelPhoto}),F.jsx("input",{type:"url",value:W.photo,onChange:V=>oe({...W,photo:V.target.value})})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelPhone}),F.jsx("input",{type:"tel",placeholder:I.placeholderPhone,value:W.phone,onChange:V=>oe({...W,phone:V.target.value})})]}),F.jsx("button",{type:"submit",className:"submit-btn",children:y?I.submitUpdate:I.submitAdd})]})]})}),J&&F.jsx("div",{className:"modal-overlay",onClick:()=>ce(!1),children:F.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"300px"},children:[F.jsx("h3",{children:I.careTitle}),F.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"15px"},children:I.careDesc}),F.jsxs("form",{onSubmit:Pi,children:[F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelDate}),F.jsx("input",{type:"date",required:!0,value:Te.date,onChange:V=>Ee({...Te,date:V.target.value})})]}),F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelTime}),F.jsx("input",{type:"time",required:!0,value:Te.time,onChange:V=>Ee({...Te,time:V.target.value})})]}),F.jsx("button",{type:"submit",className:"submit-btn",style:{background:"#55efc4",color:"#2d3436"},children:I.btnComplete})]})]})}),fe&&F.jsx("div",{className:"modal-overlay",onClick:()=>Je(!1),children:F.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"300px"},children:[F.jsx("h3",{children:I.helpTitle}),F.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"15px"},children:I.helpDesc}),F.jsxs("form",{onSubmit:Zs,children:[F.jsxs("div",{className:"form-group",children:[F.jsx("label",{children:I.labelContact}),F.jsx("input",{type:"tel",required:!0,placeholder:I.placeholderContact,value:kt.phone,onChange:V=>ir({...kt,phone:V.target.value})})]}),F.jsx("button",{type:"submit",className:"submit-btn",style:{background:"#ff7675",color:"white"},children:I.btnRegisterHelp})]})]})}),A&&q&&F.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:F.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),style:{maxWidth:"350px",maxHeight:"60vh",overflowY:"auto"},children:[F.jsx("button",{className:"modal-close-btn",onClick:()=>b(!1),children:""}),F.jsx("h3",{children:I.historyTitle}),q.careHistory&&q.careHistory.length>0?F.jsx("ul",{className:"history-list",children:[...q.careHistory].reverse().map((V,we)=>F.jsxs("li",{className:"history-item",children:[" ",V.date," ",V.time]},we))}):F.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:I.historyEmpty})]})}),l&&F.jsxs("div",{className:"toast",children:[F.jsx("span",{className:"v-mark",children:"V"}),F.jsx("span",{children:I.toastSubmitted})]})]})}Sf.createRoot(document.getElementById("root")).render(F.jsx(Uc.StrictMode,{children:F.jsx(aM,{})}));
