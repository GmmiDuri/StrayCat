(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var mP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ew={exports:{}},jh={},Iw={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=Symbol.for("react.element"),gP=Symbol.for("react.portal"),_P=Symbol.for("react.fragment"),yP=Symbol.for("react.strict_mode"),vP=Symbol.for("react.profiler"),wP=Symbol.for("react.provider"),TP=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),IP=Symbol.for("react.suspense"),SP=Symbol.for("react.memo"),PP=Symbol.for("react.lazy"),__=Symbol.iterator;function CP(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var Sw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pw=Object.assign,Cw={};function wa(t,e,n){this.props=t,this.context=e,this.refs=Cw,this.updater=n||Sw}wa.prototype.isReactComponent={};wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Aw(){}Aw.prototype=wa.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=Cw,this.updater=n||Sw}var em=Xp.prototype=new Aw;em.constructor=Xp;Pw(em,wa.prototype);em.isPureReactComponent=!0;var y_=Array.isArray,kw=Object.prototype.hasOwnProperty,tm={current:null},Rw={key:!0,ref:!0,__self:!0,__source:!0};function xw(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)kw.call(e,i)&&!Rw.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:lu,type:t,key:o,ref:l,props:s,_owner:tm.current}}function AP(t,e){return{$$typeof:lu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===lu}function kP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v_=/\/+/g;function Bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kP(""+t.key):e.toString(36)}function Pc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case lu:case gP:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Bd(l,0):i,y_(s)?(n="",t!=null&&(n=t.replace(v_,"$&/")+"/"),Pc(s,e,n,"",function(p){return p})):s!=null&&(nm(s)&&(s=AP(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(v_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",y_(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Bd(o,h);l+=Pc(o,e,n,d,s)}else if(d=CP(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Bd(o,h++),l+=Pc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function tc(t,e,n){if(t==null)return t;var i=[],s=0;return Pc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function RP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},Cc={transition:null},xP={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:tm};function Nw(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:tc,forEach:function(t,e,n){tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tc(t,function(){e++}),e},toArray:function(t){return tc(t,function(e){return e})||[]},only:function(t){if(!nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=wa;Pe.Fragment=_P;Pe.Profiler=vP;Pe.PureComponent=Xp;Pe.StrictMode=yP;Pe.Suspense=IP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xP;Pe.act=Nw;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Pw({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=tm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)kw.call(e,d)&&!Rw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:lu,type:t.type,key:s,ref:o,props:i,_owner:l}};Pe.createContext=function(t){return t={$$typeof:TP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wP,_context:t},t.Consumer=t};Pe.createElement=xw;Pe.createFactory=function(t){var e=xw.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:EP,render:t}};Pe.isValidElement=nm;Pe.lazy=function(t){return{$$typeof:PP,_payload:{_status:-1,_result:t},_init:RP}};Pe.memo=function(t,e){return{$$typeof:SP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};Pe.unstable_act=Nw;Pe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};Pe.useContext=function(t){return Gt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};Pe.useId=function(){return Gt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Gt.current.useRef(t)};Pe.useState=function(t){return Gt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Gt.current.useTransition()};Pe.version="18.3.1";Iw.exports=Pe;var le=Iw.exports;const Zc=Tw(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP=le,LP=Symbol.for("react.element"),bP=Symbol.for("react.fragment"),OP=Object.prototype.hasOwnProperty,DP=NP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MP={key:!0,ref:!0,__self:!0,__source:!0};function Lw(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)OP.call(e,i)&&!MP.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:LP,type:t,key:o,ref:l,props:s,_owner:DP.current}}jh.Fragment=bP;jh.jsx=Lw;jh.jsxs=Lw;Ew.exports=jh;var O=Ew.exports,Nf={},bw={exports:{}},wn={},Ow={exports:{}},Dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ce){var J=q.length;q.push(ce);e:for(;0<J;){var te=J-1>>>1,he=q[te];if(0<s(he,ce))q[te]=ce,q[J]=he,J=te;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ce=q[0],J=q.pop();if(J!==ce){q[0]=J;e:for(var te=0,he=q.length,Ge=he>>>1;te<Ge;){var Se=2*(te+1)-1,we=q[Se],de=Se+1,He=q[de];if(0>s(we,J))de<he&&0>s(He,we)?(q[te]=He,q[de]=J,te=de):(q[te]=we,q[Se]=J,te=Se);else if(de<he&&0>s(He,J))q[te]=He,q[de]=J,te=de;else break e}}return ce}function s(q,ce){var J=q.sortIndex-ce.sortIndex;return J!==0?J:q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],p=[],y=1,w=null,T=3,M=!1,V=!1,U=!1,Z=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(q){for(var ce=n(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=q)i(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function W(q){if(U=!1,D(q),!V)if(n(d)!==null)V=!0,Qe(Q);else{var ce=n(p);ce!==null&&hn(W,ce.startTime-q)}}function Q(q,ce){V=!1,U&&(U=!1,x(I),I=-1),M=!0;var J=T;try{for(D(ce),w=n(d);w!==null&&(!(w.expirationTime>ce)||q&&!N());){var te=w.callback;if(typeof te=="function"){w.callback=null,T=w.priorityLevel;var he=te(w.expirationTime<=ce);ce=t.unstable_now(),typeof he=="function"?w.callback=he:w===n(d)&&i(d),D(ce)}else i(d);w=n(d)}if(w!==null)var Ge=!0;else{var Se=n(p);Se!==null&&hn(W,Se.startTime-ce),Ge=!1}return Ge}finally{w=null,T=J,M=!1}}var X=!1,S=null,I=-1,A=5,b=-1;function N(){return!(t.unstable_now()-b<A)}function P(){if(S!==null){var q=t.unstable_now();b=q;var ce=!0;try{ce=S(!0,q)}finally{ce?k():(X=!1,S=null)}}else X=!1}var k;if(typeof C=="function")k=function(){C(P)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Kt=Re.port2;Re.port1.onmessage=P,k=function(){Kt.postMessage(null)}}else k=function(){Z(P,0)};function Qe(q){S=q,X||(X=!0,k())}function hn(q,ce){I=Z(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){V||M||(V=!0,Qe(Q))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var J=T;T=ce;try{return q()}finally{T=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=T;T=q;try{return ce()}finally{T=J}},t.unstable_scheduleCallback=function(q,ce,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,q){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=J+he,q={id:y++,callback:ce,priorityLevel:q,startTime:J,expirationTime:he,sortIndex:-1},J>te?(q.sortIndex=J,e(p,q),n(d)===null&&q===n(p)&&(U?(x(I),I=-1):U=!0,hn(W,J-te))):(q.sortIndex=he,e(d,q),V||M||(V=!0,Qe(Q))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var ce=T;return function(){var J=T;T=ce;try{return q.apply(this,arguments)}finally{T=J}}}})(Dw);Ow.exports=Dw;var VP=Ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FP=le,vn=VP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mw=new Set,Dl={};function Gs(t,e){oa(t,e),oa(t+"Capture",e)}function oa(t,e){for(Dl[t]=e,t=0;t<e.length;t++)Mw.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=Object.prototype.hasOwnProperty,zP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},T_={};function UP(t){return Lf.call(T_,t)?!0:Lf.call(w_,t)?!1:zP.test(t)?T_[t]=!0:(w_[t]=!0,!1)}function BP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jP(t,e,n,i){if(e===null||typeof e>"u"||BP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var im=/[\-:]([a-z])/g;function rm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(im,rm);Rt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(im,rm);Rt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(im,rm);Rt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sm(t,e,n,i){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jP(e,n,s,i)&&(n=null),i||s===null?UP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ur=FP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nc=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),om=Symbol.for("react.strict_mode"),bf=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Fw=Symbol.for("react.context"),am=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),lm=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),zw=Symbol.for("react.offscreen"),E_=Symbol.iterator;function el(t){return t===null||typeof t!="object"?null:(t=E_&&t[E_]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,jd;function cl(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Hd=!1;function Wd(t,e){if(!t||Hd)return"";Hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function HP(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=Wd(t.type,!1),t;case 11:return t=Wd(t.type.render,!1),t;case 1:return t=Wd(t.type,!0),t;default:return""}}function Mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Do:return"Portal";case bf:return"Profiler";case om:return"StrictMode";case Of:return"Suspense";case Df:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fw:return(t.displayName||"Context")+".Consumer";case Vw:return(t._context.displayName||"Context")+".Provider";case am:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lm:return e=t.displayName||null,e!==null?e:Mf(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Mf(t(e))}catch{}}return null}function WP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mf(e);case 8:return e===om?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qP(t){var e=Uw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=qP(t))}function Bw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Uw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vf(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jw(t,e){e=e.checked,e!=null&&sm(t,"checked",e,!1)}function Ff(t,e){jw(t,e);var n=$r(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&zf(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zf(t,e,n){(e!=="number"||Kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hl=Array.isArray;function Go(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function P_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(hl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function Hw(t,e){var n=$r(e.value),i=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function C_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ww(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ww(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,qw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$P=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(t){$P.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wl[e]=wl[t]})});function $w(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wl.hasOwnProperty(t)&&wl[t]?(""+e).trim():e+"px"}function Gw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=$w(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var GP=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(t,e){if(e){if(GP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=null;function um(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qf=null,Zo=null,Ko=null;function A_(t){if(t=hu(t)){if(typeof qf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Gh(e),qf(t.stateNode,t.type,e))}}function Zw(t){Zo?Ko?Ko.push(t):Ko=[t]:Zo=t}function Kw(){if(Zo){var t=Zo,e=Ko;if(Ko=Zo=null,A_(t),e)for(t=0;t<e.length;t++)A_(e[t])}}function Qw(t,e){return t(e)}function Yw(){}var qd=!1;function Jw(t,e,n){if(qd)return t(e,n);qd=!0;try{return Qw(t,e,n)}finally{qd=!1,(Zo!==null||Ko!==null)&&(Yw(),Kw())}}function Vl(t,e){var n=t.stateNode;if(n===null)return null;var i=Gh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var $f=!1;if(er)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){$f=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{$f=!1}function ZP(t,e,n,i,s,o,l,h,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var Tl=!1,Qc=null,Yc=!1,Gf=null,KP={onError:function(t){Tl=!0,Qc=t}};function QP(t,e,n,i,s,o,l,h,d){Tl=!1,Qc=null,ZP.apply(KP,arguments)}function YP(t,e,n,i,s,o,l,h,d){if(QP.apply(this,arguments),Tl){if(Tl){var p=Qc;Tl=!1,Qc=null}else throw Error(Y(198));Yc||(Yc=!0,Gf=p)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k_(t){if(Zs(t)!==t)throw Error(Y(188))}function JP(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return k_(s),t;if(o===i)return k_(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function eT(t){return t=JP(t),t!==null?tT(t):null}function tT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tT(t);if(e!==null)return e;t=t.sibling}return null}var nT=vn.unstable_scheduleCallback,R_=vn.unstable_cancelCallback,XP=vn.unstable_shouldYield,eC=vn.unstable_requestPaint,ot=vn.unstable_now,tC=vn.unstable_getCurrentPriorityLevel,cm=vn.unstable_ImmediatePriority,iT=vn.unstable_UserBlockingPriority,Jc=vn.unstable_NormalPriority,nC=vn.unstable_LowPriority,rT=vn.unstable_IdlePriority,Hh=null,yi=null;function iC(t){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(Hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:oC,rC=Math.log,sC=Math.LN2;function oC(t){return t>>>=0,t===0?32:31-(rC(t)/sC|0)|0}var sc=64,oc=4194304;function dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=dl(h):(o&=l,o!==0&&(i=dl(o)))}else l=n&~s,l!==0?i=dl(l):o!==0&&(i=dl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Jn(e),s=1<<n,i|=t[n],e&=~s;return i}function aC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Jn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=aC(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Zf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sT(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function $d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function uC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function hm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Jn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ze=0;function oT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aT,dm,lT,uT,cT,Kf=!1,ac=[],Or=null,Dr=null,Mr=null,Fl=new Map,zl=new Map,Cr=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x_(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(e.pointerId)}}function nl(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=hu(e),e!==null&&dm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hC(t,e,n,i,s){switch(e){case"focusin":return Or=nl(Or,t,e,n,i,s),!0;case"dragenter":return Dr=nl(Dr,t,e,n,i,s),!0;case"mouseover":return Mr=nl(Mr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Fl.set(o,nl(Fl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,zl.set(o,nl(zl.get(o)||null,t,e,n,i,s)),!0}return!1}function hT(t){var e=Ss(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=Xw(n),e!==null){t.blockedOn=e,cT(t.priority,function(){lT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Wf=i,n.target.dispatchEvent(i),Wf=null}else return e=hu(n),e!==null&&dm(e),t.blockedOn=n,!1;e.shift()}return!0}function N_(t,e,n){Ac(t)&&n.delete(e)}function dC(){Kf=!1,Or!==null&&Ac(Or)&&(Or=null),Dr!==null&&Ac(Dr)&&(Dr=null),Mr!==null&&Ac(Mr)&&(Mr=null),Fl.forEach(N_),zl.forEach(N_)}function il(t,e){t.blockedOn===e&&(t.blockedOn=null,Kf||(Kf=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,dC)))}function Ul(t){function e(s){return il(s,t)}if(0<ac.length){il(ac[0],t);for(var n=1;n<ac.length;n++){var i=ac[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Or!==null&&il(Or,t),Dr!==null&&il(Dr,t),Mr!==null&&il(Mr,t),Fl.forEach(e),zl.forEach(e),n=0;n<Cr.length;n++)i=Cr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)hT(n),n.blockedOn===null&&Cr.shift()}var Qo=ur.ReactCurrentBatchConfig,eh=!0;function fC(t,e,n,i){var s=ze,o=Qo.transition;Qo.transition=null;try{ze=1,fm(t,e,n,i)}finally{ze=s,Qo.transition=o}}function pC(t,e,n,i){var s=ze,o=Qo.transition;Qo.transition=null;try{ze=4,fm(t,e,n,i)}finally{ze=s,Qo.transition=o}}function fm(t,e,n,i){if(eh){var s=Qf(t,e,n,i);if(s===null)nf(t,e,i,th,n),x_(t,i);else if(hC(s,t,e,n,i))i.stopPropagation();else if(x_(t,i),e&4&&-1<cC.indexOf(t)){for(;s!==null;){var o=hu(s);if(o!==null&&aT(o),o=Qf(t,e,n,i),o===null&&nf(t,e,i,th,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else nf(t,e,i,null,n)}}var th=null;function Qf(t,e,n,i){if(th=null,t=um(i),t=Ss(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return th=t,null}function dT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tC()){case cm:return 1;case iT:return 4;case Jc:case nC:return 16;case rT:return 536870912;default:return 16}default:return 16}}var Nr=null,pm=null,kc=null;function fT(){if(kc)return kc;var t,e=pm,n=e.length,i,s="value"in Nr?Nr.value:Nr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return kc=s.slice(t,1<i?1-i:void 0)}function Rc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lc(){return!0}function L_(){return!1}function Tn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lc:L_,this.isPropagationStopped=L_,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),e}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mm=Tn(Ta),cu=Xe({},Ta,{view:0,detail:0}),mC=Tn(cu),Gd,Zd,rl,Wh=Xe({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rl&&(rl&&t.type==="mousemove"?(Gd=t.screenX-rl.screenX,Zd=t.screenY-rl.screenY):Zd=Gd=0,rl=t),Gd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),b_=Tn(Wh),gC=Xe({},Wh,{dataTransfer:0}),_C=Tn(gC),yC=Xe({},cu,{relatedTarget:0}),Kd=Tn(yC),vC=Xe({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),wC=Tn(vC),TC=Xe({},Ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EC=Tn(TC),IC=Xe({},Ta,{data:0}),O_=Tn(IC),SC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CC[t])?!!e[t]:!1}function gm(){return AC}var kC=Xe({},cu,{key:function(t){if(t.key){var e=SC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gm,charCode:function(t){return t.type==="keypress"?Rc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RC=Tn(kC),xC=Xe({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D_=Tn(xC),NC=Xe({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gm}),LC=Tn(NC),bC=Xe({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),OC=Tn(bC),DC=Xe({},Wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MC=Tn(DC),VC=[9,13,27,32],_m=er&&"CompositionEvent"in window,El=null;er&&"documentMode"in document&&(El=document.documentMode);var FC=er&&"TextEvent"in window&&!El,pT=er&&(!_m||El&&8<El&&11>=El),M_=" ",V_=!1;function mT(t,e){switch(t){case"keyup":return VC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function zC(t,e){switch(t){case"compositionend":return gT(e);case"keypress":return e.which!==32?null:(V_=!0,M_);case"textInput":return t=e.data,t===M_&&V_?null:t;default:return null}}function UC(t,e){if(Vo)return t==="compositionend"||!_m&&mT(t,e)?(t=fT(),kc=pm=Nr=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pT&&e.locale!=="ko"?null:e.data;default:return null}}var BC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BC[t.type]:e==="textarea"}function _T(t,e,n,i){Zw(i),e=nh(e,"onChange"),0<e.length&&(n=new mm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Il=null,Bl=null;function jC(t){kT(t,0)}function qh(t){var e=Uo(t);if(Bw(e))return t}function HC(t,e){if(t==="change")return e}var yT=!1;if(er){var Qd;if(er){var Yd="oninput"in document;if(!Yd){var z_=document.createElement("div");z_.setAttribute("oninput","return;"),Yd=typeof z_.oninput=="function"}Qd=Yd}else Qd=!1;yT=Qd&&(!document.documentMode||9<document.documentMode)}function U_(){Il&&(Il.detachEvent("onpropertychange",vT),Bl=Il=null)}function vT(t){if(t.propertyName==="value"&&qh(Bl)){var e=[];_T(e,Bl,t,um(t)),Jw(jC,e)}}function WC(t,e,n){t==="focusin"?(U_(),Il=e,Bl=n,Il.attachEvent("onpropertychange",vT)):t==="focusout"&&U_()}function qC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qh(Bl)}function $C(t,e){if(t==="click")return qh(e)}function GC(t,e){if(t==="input"||t==="change")return qh(e)}function ZC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ni=typeof Object.is=="function"?Object.is:ZC;function jl(t,e){if(ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Lf.call(e,s)||!ni(t[s],e[s]))return!1}return!0}function B_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j_(t,e){var n=B_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B_(n)}}function wT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TT(){for(var t=window,e=Kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kc(t.document)}return e}function ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KC(t){var e=TT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wT(n.ownerDocument.documentElement,n)){if(i!==null&&ym(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=j_(n,o);var l=j_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QC=er&&"documentMode"in document&&11>=document.documentMode,Fo=null,Yf=null,Sl=null,Jf=!1;function H_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jf||Fo==null||Fo!==Kc(i)||(i=Fo,"selectionStart"in i&&ym(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sl&&jl(Sl,i)||(Sl=i,i=nh(Yf,"onSelect"),0<i.length&&(e=new mm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Fo)))}function uc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zo={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},Jd={},ET={};er&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function $h(t){if(Jd[t])return Jd[t];if(!zo[t])return t;var e=zo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ET)return Jd[t]=e[n];return t}var IT=$h("animationend"),ST=$h("animationiteration"),PT=$h("animationstart"),CT=$h("transitionend"),AT=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(t,e){AT.set(t,e),Gs(e,[t])}for(var Xd=0;Xd<W_.length;Xd++){var ef=W_[Xd],YC=ef.toLowerCase(),JC=ef[0].toUpperCase()+ef.slice(1);es(YC,"on"+JC)}es(IT,"onAnimationEnd");es(ST,"onAnimationIteration");es(PT,"onAnimationStart");es("dblclick","onDoubleClick");es("focusin","onFocus");es("focusout","onBlur");es(CT,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XC=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function q_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,YP(i,e,void 0,t),t.currentTarget=null}function kT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,p=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;q_(s,h,p),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,p=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;q_(s,h,p),o=d}}}if(Yc)throw t=Gf,Yc=!1,Gf=null,t}function We(t,e){var n=e[ip];n===void 0&&(n=e[ip]=new Set);var i=t+"__bubble";n.has(i)||(RT(e,t,2,!1),n.add(i))}function tf(t,e,n){var i=0;e&&(i|=4),RT(n,t,i,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function Hl(t){if(!t[cc]){t[cc]=!0,Mw.forEach(function(n){n!=="selectionchange"&&(XC.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,tf("selectionchange",!1,e))}}function RT(t,e,n,i){switch(dT(e)){case 1:var s=fC;break;case 4:s=pC;break;default:s=fm}n=s.bind(null,e,n,t),s=void 0,!$f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nf(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Ss(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Jw(function(){var p=o,y=um(n),w=[];e:{var T=AT.get(t);if(T!==void 0){var M=mm,V=t;switch(t){case"keypress":if(Rc(n)===0)break e;case"keydown":case"keyup":M=RC;break;case"focusin":V="focus",M=Kd;break;case"focusout":V="blur",M=Kd;break;case"beforeblur":case"afterblur":M=Kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=b_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=_C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=LC;break;case IT:case ST:case PT:M=wC;break;case CT:M=OC;break;case"scroll":M=mC;break;case"wheel":M=MC;break;case"copy":case"cut":case"paste":M=EC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=D_}var U=(e&4)!==0,Z=!U&&t==="scroll",x=U?T!==null?T+"Capture":null:T;U=[];for(var C=p,D;C!==null;){D=C;var W=D.stateNode;if(D.tag===5&&W!==null&&(D=W,x!==null&&(W=Vl(C,x),W!=null&&U.push(Wl(C,W,D)))),Z)break;C=C.return}0<U.length&&(T=new M(T,V,null,n,y),w.push({event:T,listeners:U}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",T&&n!==Wf&&(V=n.relatedTarget||n.fromElement)&&(Ss(V)||V[tr]))break e;if((M||T)&&(T=y.window===y?y:(T=y.ownerDocument)?T.defaultView||T.parentWindow:window,M?(V=n.relatedTarget||n.toElement,M=p,V=V?Ss(V):null,V!==null&&(Z=Zs(V),V!==Z||V.tag!==5&&V.tag!==6)&&(V=null)):(M=null,V=p),M!==V)){if(U=b_,W="onMouseLeave",x="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(U=D_,W="onPointerLeave",x="onPointerEnter",C="pointer"),Z=M==null?T:Uo(M),D=V==null?T:Uo(V),T=new U(W,C+"leave",M,n,y),T.target=Z,T.relatedTarget=D,W=null,Ss(y)===p&&(U=new U(x,C+"enter",V,n,y),U.target=D,U.relatedTarget=Z,W=U),Z=W,M&&V)t:{for(U=M,x=V,C=0,D=U;D;D=Ro(D))C++;for(D=0,W=x;W;W=Ro(W))D++;for(;0<C-D;)U=Ro(U),C--;for(;0<D-C;)x=Ro(x),D--;for(;C--;){if(U===x||x!==null&&U===x.alternate)break t;U=Ro(U),x=Ro(x)}U=null}else U=null;M!==null&&$_(w,T,M,U,!1),V!==null&&Z!==null&&$_(w,Z,V,U,!0)}}e:{if(T=p?Uo(p):window,M=T.nodeName&&T.nodeName.toLowerCase(),M==="select"||M==="input"&&T.type==="file")var Q=HC;else if(F_(T))if(yT)Q=GC;else{Q=qC;var X=WC}else(M=T.nodeName)&&M.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(Q=$C);if(Q&&(Q=Q(t,p))){_T(w,Q,n,y);break e}X&&X(t,T,p),t==="focusout"&&(X=T._wrapperState)&&X.controlled&&T.type==="number"&&zf(T,"number",T.value)}switch(X=p?Uo(p):window,t){case"focusin":(F_(X)||X.contentEditable==="true")&&(Fo=X,Yf=p,Sl=null);break;case"focusout":Sl=Yf=Fo=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,H_(w,n,y);break;case"selectionchange":if(QC)break;case"keydown":case"keyup":H_(w,n,y)}var S;if(_m)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Vo?mT(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(pT&&n.locale!=="ko"&&(Vo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Vo&&(S=fT()):(Nr=y,pm="value"in Nr?Nr.value:Nr.textContent,Vo=!0)),X=nh(p,I),0<X.length&&(I=new O_(I,t,null,n,y),w.push({event:I,listeners:X}),S?I.data=S:(S=gT(n),S!==null&&(I.data=S)))),(S=FC?zC(t,n):UC(t,n))&&(p=nh(p,"onBeforeInput"),0<p.length&&(y=new O_("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:p}),y.data=S))}kT(w,e)})}function Wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nh(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Vl(t,n),o!=null&&i.unshift(Wl(t,o,s)),o=Vl(t,e),o!=null&&i.push(Wl(t,o,s))),t=t.return}return i}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,p=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&p!==null&&(h=p,s?(d=Vl(n,o),d!=null&&l.unshift(Wl(n,d,h))):s||(d=Vl(n,o),d!=null&&l.push(Wl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function G_(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function hc(t,e,n){if(e=G_(e),G_(t)!==e&&n)throw Error(Y(425))}function ih(){}var Xf=null,ep=null;function tp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(t){return Z_.resolve(null).then(t).catch(rA)}:np;function rA(t){setTimeout(function(){throw t})}function rf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ul(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ul(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),_i="__reactFiber$"+Ea,ql="__reactProps$"+Ea,tr="__reactContainer$"+Ea,ip="__reactEvents$"+Ea,sA="__reactListeners$"+Ea,oA="__reactHandles$"+Ea;function Ss(t){var e=t[_i];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[_i]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K_(t);t!==null;){if(n=t[_i])return n;t=K_(t)}return e}t=n,n=t.parentNode}return null}function hu(t){return t=t[_i]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Gh(t){return t[ql]||null}var rp=[],Bo=-1;function ts(t){return{current:t}}function $e(t){0>Bo||(t.current=rp[Bo],rp[Bo]=null,Bo--)}function je(t,e){Bo++,rp[Bo]=t.current,t.current=e}var Gr={},zt=ts(Gr),an=ts(!1),Ds=Gr;function aa(t,e){var n=t.type.contextTypes;if(!n)return Gr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ln(t){return t=t.childContextTypes,t!=null}function rh(){$e(an),$e(zt)}function Q_(t,e,n){if(zt.current!==Gr)throw Error(Y(168));je(zt,e),je(an,n)}function xT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Y(108,WP(t)||"Unknown",s));return Xe({},n,i)}function sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Ds=zt.current,je(zt,t),je(an,an.current),!0}function Y_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=xT(t,e,Ds),i.__reactInternalMemoizedMergedChildContext=t,$e(an),$e(zt),je(zt,t)):$e(an),je(an,n)}var $i=null,Zh=!1,sf=!1;function NT(t){$i===null?$i=[t]:$i.push(t)}function aA(t){Zh=!0,NT(t)}function ns(){if(!sf&&$i!==null){sf=!0;var t=0,e=ze;try{var n=$i;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}$i=null,Zh=!1}catch(s){throw $i!==null&&($i=$i.slice(t+1)),nT(cm,ns),s}finally{ze=e,sf=!1}}return null}var jo=[],Ho=0,oh=null,ah=0,xn=[],Nn=0,Ms=null,Zi=1,Ki="";function Ts(t,e){jo[Ho++]=ah,jo[Ho++]=oh,oh=t,ah=e}function LT(t,e,n){xn[Nn++]=Zi,xn[Nn++]=Ki,xn[Nn++]=Ms,Ms=t;var i=Zi;t=Ki;var s=32-Jn(i)-1;i&=~(1<<s),n+=1;var o=32-Jn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Zi=1<<32-Jn(e)+s|n<<s|i,Ki=o+t}else Zi=1<<o|n<<s|i,Ki=t}function vm(t){t.return!==null&&(Ts(t,1),LT(t,1,0))}function wm(t){for(;t===oh;)oh=jo[--Ho],jo[Ho]=null,ah=jo[--Ho],jo[Ho]=null;for(;t===Ms;)Ms=xn[--Nn],xn[Nn]=null,Ki=xn[--Nn],xn[Nn]=null,Zi=xn[--Nn],xn[Nn]=null}var _n=null,mn=null,Ze=!1,Kn=null;function bT(t,e){var n=bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,mn=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,mn=null,!0):!1;default:return!1}}function sp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function op(t){if(Ze){var e=mn;if(e){var n=e;if(!J_(t,e)){if(sp(t))throw Error(Y(418));e=Vr(n.nextSibling);var i=_n;e&&J_(t,e)?bT(i,n):(t.flags=t.flags&-4097|2,Ze=!1,_n=t)}}else{if(sp(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ze=!1,_n=t}}}function X_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function dc(t){if(t!==_n)return!1;if(!Ze)return X_(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tp(t.type,t.memoizedProps)),e&&(e=mn)){if(sp(t))throw OT(),Error(Y(418));for(;e;)bT(t,e),e=Vr(e.nextSibling)}if(X_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=_n?Vr(t.stateNode.nextSibling):null;return!0}function OT(){for(var t=mn;t;)t=Vr(t.nextSibling)}function la(){mn=_n=null,Ze=!1}function Tm(t){Kn===null?Kn=[t]:Kn.push(t)}var lA=ur.ReactCurrentBatchConfig;function sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function fc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ey(t){var e=t._init;return e(t._payload)}function DT(t){function e(x,C){if(t){var D=x.deletions;D===null?(x.deletions=[C],x.flags|=16):D.push(C)}}function n(x,C){if(!t)return null;for(;C!==null;)e(x,C),C=C.sibling;return null}function i(x,C){for(x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function s(x,C){return x=Br(x,C),x.index=0,x.sibling=null,x}function o(x,C,D){return x.index=D,t?(D=x.alternate,D!==null?(D=D.index,D<C?(x.flags|=2,C):D):(x.flags|=2,C)):(x.flags|=1048576,C)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function h(x,C,D,W){return C===null||C.tag!==6?(C=df(D,x.mode,W),C.return=x,C):(C=s(C,D),C.return=x,C)}function d(x,C,D,W){var Q=D.type;return Q===Mo?y(x,C,D.props.children,W,D.key):C!==null&&(C.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Sr&&ey(Q)===C.type)?(W=s(C,D.props),W.ref=sl(x,C,D),W.return=x,W):(W=Mc(D.type,D.key,D.props,null,x.mode,W),W.ref=sl(x,C,D),W.return=x,W)}function p(x,C,D,W){return C===null||C.tag!==4||C.stateNode.containerInfo!==D.containerInfo||C.stateNode.implementation!==D.implementation?(C=ff(D,x.mode,W),C.return=x,C):(C=s(C,D.children||[]),C.return=x,C)}function y(x,C,D,W,Q){return C===null||C.tag!==7?(C=Ns(D,x.mode,W,Q),C.return=x,C):(C=s(C,D),C.return=x,C)}function w(x,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return C=df(""+C,x.mode,D),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case nc:return D=Mc(C.type,C.key,C.props,null,x.mode,D),D.ref=sl(x,null,C),D.return=x,D;case Do:return C=ff(C,x.mode,D),C.return=x,C;case Sr:var W=C._init;return w(x,W(C._payload),D)}if(hl(C)||el(C))return C=Ns(C,x.mode,D,null),C.return=x,C;fc(x,C)}return null}function T(x,C,D,W){var Q=C!==null?C.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return Q!==null?null:h(x,C,""+D,W);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case nc:return D.key===Q?d(x,C,D,W):null;case Do:return D.key===Q?p(x,C,D,W):null;case Sr:return Q=D._init,T(x,C,Q(D._payload),W)}if(hl(D)||el(D))return Q!==null?null:y(x,C,D,W,null);fc(x,D)}return null}function M(x,C,D,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return x=x.get(D)||null,h(C,x,""+W,Q);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case nc:return x=x.get(W.key===null?D:W.key)||null,d(C,x,W,Q);case Do:return x=x.get(W.key===null?D:W.key)||null,p(C,x,W,Q);case Sr:var X=W._init;return M(x,C,D,X(W._payload),Q)}if(hl(W)||el(W))return x=x.get(D)||null,y(C,x,W,Q,null);fc(C,W)}return null}function V(x,C,D,W){for(var Q=null,X=null,S=C,I=C=0,A=null;S!==null&&I<D.length;I++){S.index>I?(A=S,S=null):A=S.sibling;var b=T(x,S,D[I],W);if(b===null){S===null&&(S=A);break}t&&S&&b.alternate===null&&e(x,S),C=o(b,C,I),X===null?Q=b:X.sibling=b,X=b,S=A}if(I===D.length)return n(x,S),Ze&&Ts(x,I),Q;if(S===null){for(;I<D.length;I++)S=w(x,D[I],W),S!==null&&(C=o(S,C,I),X===null?Q=S:X.sibling=S,X=S);return Ze&&Ts(x,I),Q}for(S=i(x,S);I<D.length;I++)A=M(S,x,I,D[I],W),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?I:A.key),C=o(A,C,I),X===null?Q=A:X.sibling=A,X=A);return t&&S.forEach(function(N){return e(x,N)}),Ze&&Ts(x,I),Q}function U(x,C,D,W){var Q=el(D);if(typeof Q!="function")throw Error(Y(150));if(D=Q.call(D),D==null)throw Error(Y(151));for(var X=Q=null,S=C,I=C=0,A=null,b=D.next();S!==null&&!b.done;I++,b=D.next()){S.index>I?(A=S,S=null):A=S.sibling;var N=T(x,S,b.value,W);if(N===null){S===null&&(S=A);break}t&&S&&N.alternate===null&&e(x,S),C=o(N,C,I),X===null?Q=N:X.sibling=N,X=N,S=A}if(b.done)return n(x,S),Ze&&Ts(x,I),Q;if(S===null){for(;!b.done;I++,b=D.next())b=w(x,b.value,W),b!==null&&(C=o(b,C,I),X===null?Q=b:X.sibling=b,X=b);return Ze&&Ts(x,I),Q}for(S=i(x,S);!b.done;I++,b=D.next())b=M(S,x,I,b.value,W),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?I:b.key),C=o(b,C,I),X===null?Q=b:X.sibling=b,X=b);return t&&S.forEach(function(P){return e(x,P)}),Ze&&Ts(x,I),Q}function Z(x,C,D,W){if(typeof D=="object"&&D!==null&&D.type===Mo&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case nc:e:{for(var Q=D.key,X=C;X!==null;){if(X.key===Q){if(Q=D.type,Q===Mo){if(X.tag===7){n(x,X.sibling),C=s(X,D.props.children),C.return=x,x=C;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Sr&&ey(Q)===X.type){n(x,X.sibling),C=s(X,D.props),C.ref=sl(x,X,D),C.return=x,x=C;break e}n(x,X);break}else e(x,X);X=X.sibling}D.type===Mo?(C=Ns(D.props.children,x.mode,W,D.key),C.return=x,x=C):(W=Mc(D.type,D.key,D.props,null,x.mode,W),W.ref=sl(x,C,D),W.return=x,x=W)}return l(x);case Do:e:{for(X=D.key;C!==null;){if(C.key===X)if(C.tag===4&&C.stateNode.containerInfo===D.containerInfo&&C.stateNode.implementation===D.implementation){n(x,C.sibling),C=s(C,D.children||[]),C.return=x,x=C;break e}else{n(x,C);break}else e(x,C);C=C.sibling}C=ff(D,x.mode,W),C.return=x,x=C}return l(x);case Sr:return X=D._init,Z(x,C,X(D._payload),W)}if(hl(D))return V(x,C,D,W);if(el(D))return U(x,C,D,W);fc(x,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,C!==null&&C.tag===6?(n(x,C.sibling),C=s(C,D),C.return=x,x=C):(n(x,C),C=df(D,x.mode,W),C.return=x,x=C),l(x)):n(x,C)}return Z}var ua=DT(!0),MT=DT(!1),lh=ts(null),uh=null,Wo=null,Em=null;function Im(){Em=Wo=uh=null}function Sm(t){var e=lh.current;$e(lh),t._currentValue=e}function ap(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Yo(t,e){uh=t,Em=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Em!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(uh===null)throw Error(Y(308));Wo=t,uh.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var Ps=null;function Pm(t){Ps===null?Ps=[t]:Ps.push(t)}function VT(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Pm(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,i)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function Cm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,nr(t,n)}return s=i.interleaved,s===null?(e.next=e,Pm(i)):(e.next=s.next,s.next=e),i.interleaved=e,nr(t,n)}function xc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hm(t,n)}}function ty(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ch(t,e,n,i){var s=t.updateQueue;Pr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var y=t.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==l&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,y=p=d=null,h=o;do{var T=h.lane,M=h.eventTime;if((i&T)===T){y!==null&&(y=y.next={eventTime:M,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var V=t,U=h;switch(T=e,M=n,U.tag){case 1:if(V=U.payload,typeof V=="function"){w=V.call(M,w,T);break e}w=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=U.payload,T=typeof V=="function"?V.call(M,w,T):V,T==null)break e;w=Xe({},w,T);break e;case 2:Pr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else M={eventTime:M,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=M,d=w):y=y.next=M,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(y===null&&(d=w),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=y,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Fs|=l,t.lanes=l,t.memoizedState=w}}function ny(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var du={},vi=ts(du),$l=ts(du),Gl=ts(du);function Cs(t){if(t===du)throw Error(Y(174));return t}function Am(t,e){switch(je(Gl,e),je($l,t),je(vi,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bf(e,t)}$e(vi),je(vi,e)}function ca(){$e(vi),$e($l),$e(Gl)}function zT(t){Cs(Gl.current);var e=Cs(vi.current),n=Bf(e,t.type);e!==n&&(je($l,t),je(vi,n))}function km(t){$l.current===t&&($e(vi),$e($l))}var Ye=ts(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function Rm(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var Nc=ur.ReactCurrentDispatcher,af=ur.ReactCurrentBatchConfig,Vs=0,Je=null,gt=null,It=null,dh=!1,Pl=!1,Zl=0,uA=0;function bt(){throw Error(Y(321))}function xm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ni(t[n],e[n]))return!1;return!0}function Nm(t,e,n,i,s,o){if(Vs=o,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nc.current=t===null||t.memoizedState===null?fA:pA,t=n(i,s),Pl){o=0;do{if(Pl=!1,Zl=0,25<=o)throw Error(Y(301));o+=1,It=gt=null,e.updateQueue=null,Nc.current=mA,t=n(i,s)}while(Pl)}if(Nc.current=fh,e=gt!==null&&gt.next!==null,Vs=0,It=gt=Je=null,dh=!1,e)throw Error(Y(300));return t}function Lm(){var t=Zl!==0;return Zl=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Je.memoizedState=It=t:It=It.next=t,It}function Mn(){if(gt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=It===null?Je.memoizedState:It.next;if(e!==null)It=e,gt=t;else{if(t===null)throw Error(Y(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},It===null?Je.memoizedState=It=t:It=It.next=t}return It}function Kl(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=gt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,p=o;do{var y=p.lane;if((Vs&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var w={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(h=d=w,l=i):d=d.next=w,Je.lanes|=y,Fs|=y}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=h,ni(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Je.lanes|=o,Fs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=Mn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);ni(o,e.memoizedState)||(on=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function UT(){}function BT(t,e){var n=Je,i=Mn(),s=e(),o=!ni(i.memoizedState,s);if(o&&(i.memoizedState=s,on=!0),i=i.queue,bm(WT.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Ql(9,HT.bind(null,n,i,s,e),void 0,null),St===null)throw Error(Y(349));Vs&30||jT(n,e,s)}return s}function jT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HT(t,e,n,i){e.value=n,e.getSnapshot=i,qT(e)&&$T(t)}function WT(t,e,n){return n(function(){qT(e)&&$T(t)})}function qT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ni(t,n)}catch{return!0}}function $T(t){var e=nr(t,1);e!==null&&Xn(e,t,1,-1)}function iy(t){var e=mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:t},e.queue=t,t=t.dispatch=dA.bind(null,Je,t),[e.memoizedState,t]}function Ql(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function GT(){return Mn().memoizedState}function Lc(t,e,n,i){var s=mi();Je.flags|=t,s.memoizedState=Ql(1|e,n,void 0,i===void 0?null:i)}function Kh(t,e,n,i){var s=Mn();i=i===void 0?null:i;var o=void 0;if(gt!==null){var l=gt.memoizedState;if(o=l.destroy,i!==null&&xm(i,l.deps)){s.memoizedState=Ql(e,n,o,i);return}}Je.flags|=t,s.memoizedState=Ql(1|e,n,o,i)}function ry(t,e){return Lc(8390656,8,t,e)}function bm(t,e){return Kh(2048,8,t,e)}function ZT(t,e){return Kh(4,2,t,e)}function KT(t,e){return Kh(4,4,t,e)}function QT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YT(t,e,n){return n=n!=null?n.concat([t]):null,Kh(4,4,QT.bind(null,e,t),n)}function Om(){}function JT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function XT(t,e){var n=Mn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&xm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function eE(t,e,n){return Vs&21?(ni(n,e)||(n=sT(),Je.lanes|=n,Fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function cA(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=af.transition;af.transition={};try{t(!1),e()}finally{ze=n,af.transition=i}}function tE(){return Mn().memoizedState}function hA(t,e,n){var i=Ur(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},nE(t))iE(e,n);else if(n=VT(t,e,n,i),n!==null){var s=qt();Xn(n,t,i,s),rE(n,e,i)}}function dA(t,e,n){var i=Ur(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(nE(t))iE(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,ni(h,l)){var d=e.interleaved;d===null?(s.next=s,Pm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=VT(t,e,s,i),n!==null&&(s=qt(),Xn(n,t,i,s),rE(n,e,i))}}function nE(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function iE(t,e){Pl=dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rE(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hm(t,n)}}var fh={readContext:Dn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},fA={readContext:Dn,useCallback:function(t,e){return mi().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:ry,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lc(4194308,4,QT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lc(4,2,t,e)},useMemo:function(t,e){var n=mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=mi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=hA.bind(null,Je,t),[i.memoizedState,t]},useRef:function(t){var e=mi();return t={current:t},e.memoizedState=t},useState:iy,useDebugValue:Om,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=iy(!1),e=t[0];return t=cA.bind(null,t[1]),mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Je,s=mi();if(Ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),St===null)throw Error(Y(349));Vs&30||jT(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,ry(WT.bind(null,i,o,t),[t]),i.flags|=2048,Ql(9,HT.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=mi(),e=St.identifierPrefix;if(Ze){var n=Ki,i=Zi;n=(i&~(1<<32-Jn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pA={readContext:Dn,useCallback:JT,useContext:Dn,useEffect:bm,useImperativeHandle:YT,useInsertionEffect:ZT,useLayoutEffect:KT,useMemo:XT,useReducer:lf,useRef:GT,useState:function(){return lf(Kl)},useDebugValue:Om,useDeferredValue:function(t){var e=Mn();return eE(e,gt.memoizedState,t)},useTransition:function(){var t=lf(Kl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:UT,useSyncExternalStore:BT,useId:tE,unstable_isNewReconciler:!1},mA={readContext:Dn,useCallback:JT,useContext:Dn,useEffect:bm,useImperativeHandle:YT,useInsertionEffect:ZT,useLayoutEffect:KT,useMemo:XT,useReducer:uf,useRef:GT,useState:function(){return uf(Kl)},useDebugValue:Om,useDeferredValue:function(t){var e=Mn();return gt===null?e.memoizedState=t:eE(e,gt.memoizedState,t)},useTransition:function(){var t=uf(Kl)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:UT,useSyncExternalStore:BT,useId:tE,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qh={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),s=Ur(t),o=Ji(i,s);o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,s),e!==null&&(Xn(e,t,s,i),xc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),s=Ur(t),o=Ji(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,s),e!==null&&(Xn(e,t,s,i),xc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=Ur(t),s=Ji(n,i);s.tag=2,e!=null&&(s.callback=e),e=Fr(t,s,i),e!==null&&(Xn(e,t,i,n),xc(e,t,i))}};function sy(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!jl(n,i)||!jl(s,o):!0}function sE(t,e,n){var i=!1,s=Gr,o=e.contextType;return typeof o=="object"&&o!==null?o=Dn(o):(s=ln(e)?Ds:zt.current,i=e.contextTypes,o=(i=i!=null)?aa(t,s):Gr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function oy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qh.enqueueReplaceState(e,e.state,null)}function up(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cm(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Dn(o):(o=ln(e)?Ds:zt.current,s.context=aa(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lp(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qh.enqueueReplaceState(s,s.state,null),ch(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ha(t,e){try{var n="",i=e;do n+=HP(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function cf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gA=typeof WeakMap=="function"?WeakMap:Map;function oE(t,e,n){n=Ji(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){mh||(mh=!0,wp=i),cp(t,e)},n}function aE(t,e,n){n=Ji(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){cp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){cp(t,e),typeof i!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function ay(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new gA;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=xA.bind(null,t,e,n),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ji(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var _A=ur.ReactCurrentOwner,on=!1;function Wt(t,e,n,i){e.child=t===null?MT(e,null,n,i):ua(e,t.child,n,i)}function cy(t,e,n,i,s){n=n.render;var o=e.ref;return Yo(e,s),i=Nm(t,e,n,i,o,s),n=Lm(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ze&&n&&vm(e),e.flags|=1,Wt(t,e,i,s),e.child)}function hy(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!jm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,lE(t,e,o,i,s)):(t=Mc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(l,i)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=Br(o,i),t.ref=e.ref,t.return=e,e.child=t}function lE(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(jl(o,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,ir(t,e,s)}return hp(t,e,n,i,s)}function uE(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je($o,pn),pn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je($o,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,je($o,pn),pn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,je($o,pn),pn|=i;return Wt(t,e,s,n),e.child}function cE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hp(t,e,n,i,s){var o=ln(n)?Ds:zt.current;return o=aa(e,o),Yo(e,s),n=Nm(t,e,n,i,o,s),i=Lm(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ze&&i&&vm(e),e.flags|=1,Wt(t,e,n,s),e.child)}function dy(t,e,n,i,s){if(ln(n)){var o=!0;sh(e)}else o=!1;if(Yo(e,s),e.stateNode===null)bc(t,e),sE(e,n,i),up(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=Dn(p):(p=ln(n)?Ds:zt.current,p=aa(e,p));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==p)&&oy(e,l,i,p),Pr=!1;var T=e.memoizedState;l.state=T,ch(e,i,l,s),d=e.memoizedState,h!==i||T!==d||an.current||Pr?(typeof y=="function"&&(lp(e,n,y,i),d=e.memoizedState),(h=Pr||sy(e,n,h,i,T,d,p))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,FT(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Gn(e.type,h),l.props=p,w=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Dn(d):(d=ln(n)?Ds:zt.current,d=aa(e,d));var M=n.getDerivedStateFromProps;(y=typeof M=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||T!==d)&&oy(e,l,i,d),Pr=!1,T=e.memoizedState,l.state=T,ch(e,i,l,s);var V=e.memoizedState;h!==w||T!==V||an.current||Pr?(typeof M=="function"&&(lp(e,n,M,i),V=e.memoizedState),(p=Pr||sy(e,n,p,i,T,V,d)||!1)?(y||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,V,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,V,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=V),l.props=i,l.state=V,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return dp(t,e,n,i,o,s)}function dp(t,e,n,i,s,o){cE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&Y_(e,n,!1),ir(t,e,o);i=e.stateNode,_A.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=ua(e,t.child,null,o),e.child=ua(e,null,h,o)):Wt(t,e,h,o),e.memoizedState=i.state,s&&Y_(e,n,!0),e.child}function hE(t){var e=t.stateNode;e.pendingContext?Q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q_(t,e.context,!1),Am(t,e.containerInfo)}function fy(t,e,n,i,s){return la(),Tm(s),e.flags|=256,Wt(t,e,n,i),e.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function pp(t){return{baseLanes:t,cachePool:null,transitions:null}}function dE(t,e,n){var i=e.pendingProps,s=Ye.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(Ye,s&1),t===null)return op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Xh(l,i,0,null),t=Ns(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=pp(n),e.memoizedState=fp,t):Dm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return yA(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Br(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Br(h,o):(o=Ns(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?pp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=fp,i}return o=t.child,t=o.sibling,i=Br(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Dm(t,e){return e=Xh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pc(t,e,n,i){return i!==null&&Tm(i),ua(e,t.child,null,n),t=Dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yA(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=cf(Error(Y(422))),pc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Xh({mode:"visible",children:i.children},s,0,null),o=Ns(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ua(e,t.child,null,l),e.child.memoizedState=pp(l),e.memoizedState=fp,o);if(!(e.mode&1))return pc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=cf(o,i,void 0),pc(t,e,l,i)}if(h=(l&t.childLanes)!==0,on||h){if(i=St,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,nr(t,s),Xn(i,t,s,-1))}return Bm(),i=cf(Error(Y(421))),pc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=NA.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,mn=Vr(s.nextSibling),_n=e,Ze=!0,Kn=null,t!==null&&(xn[Nn++]=Zi,xn[Nn++]=Ki,xn[Nn++]=Ms,Zi=t.id,Ki=t.overflow,Ms=e),e=Dm(e,i.children),e.flags|=4096,e)}function py(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ap(t.return,e,n)}function hf(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function fE(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,n),i=Ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,n,e);else if(t.tag===19)py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(je(Ye,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hf(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hf(e,!0,n,null,o);break;case"together":hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vA(t,e,n){switch(e.tag){case 3:hE(e),la();break;case 5:zT(e);break;case 1:ln(e.type)&&sh(e);break;case 4:Am(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;je(lh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?dE(t,e,n):(je(Ye,Ye.current&1),t=ir(t,e,n),t!==null?t.sibling:null);je(Ye,Ye.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return fE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ye,Ye.current),i)break;return null;case 22:case 23:return e.lanes=0,uE(t,e,n)}return ir(t,e,n)}var pE,mp,mE,gE;pE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mp=function(){};mE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Cs(vi.current);var o=null;switch(n){case"input":s=Vf(t,s),i=Vf(t,i),o=[];break;case"select":s=Xe({},s,{value:void 0}),i=Xe({},i,{value:void 0}),o=[];break;case"textarea":s=Uf(t,s),i=Uf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ih)}jf(n,i);var l;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Dl.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==h&&(d!=null||h!=null))if(p==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&We("scroll",t),o||h===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};gE=function(t,e,n,i){n!==i&&(e.flags|=4)};function ol(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wA(t,e,n){var i=e.pendingProps;switch(wm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return ln(e.type)&&rh(),Ot(e),null;case 3:return i=e.stateNode,ca(),$e(an),$e(zt),Rm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(Ip(Kn),Kn=null))),mp(t,e),Ot(e),null;case 5:km(e);var s=Cs(Gl.current);if(n=e.type,t!==null&&e.stateNode!=null)mE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Ot(e),null}if(t=Cs(vi.current),dc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[_i]=e,i[ql]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(s=0;s<fl.length;s++)We(fl[s],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":I_(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":P_(i,o),We("invalid",i)}jf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&hc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&hc(i.textContent,h,t),s=["children",""+h]):Dl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&We("scroll",i)}switch(n){case"input":ic(i),S_(i,o,!0);break;case"textarea":ic(i),C_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ih)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ww(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[_i]=e,t[ql]=i,pE(t,e,!1,!1),e.stateNode=t;e:{switch(l=Hf(n,i),n){case"dialog":We("cancel",t),We("close",t),s=i;break;case"iframe":case"object":case"embed":We("load",t),s=i;break;case"video":case"audio":for(s=0;s<fl.length;s++)We(fl[s],t);s=i;break;case"source":We("error",t),s=i;break;case"img":case"image":case"link":We("error",t),We("load",t),s=i;break;case"details":We("toggle",t),s=i;break;case"input":I_(t,i),s=Vf(t,i),We("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Xe({},i,{value:void 0}),We("invalid",t);break;case"textarea":P_(t,i),s=Uf(t,i),We("invalid",t);break;default:s=i}jf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Gw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&qw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ml(t,d):typeof d=="number"&&Ml(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Dl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&We("scroll",t):d!=null&&sm(t,o,d,l))}switch(n){case"input":ic(t),S_(t,i,!1);break;case"textarea":ic(t),C_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+$r(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Go(t,!!i.multiple,o,!1):i.defaultValue!=null&&Go(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ih)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)gE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Cs(Gl.current),Cs(vi.current),dc(e)){if(i=e.stateNode,n=e.memoizedProps,i[_i]=e,(o=i.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:hc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[_i]=e,e.stateNode=i}return Ot(e),null;case 13:if($e(Ye),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&mn!==null&&e.mode&1&&!(e.flags&128))OT(),la(),e.flags|=98560,o=!1;else if(o=dc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[_i]=e}else la(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else Kn!==null&&(Ip(Kn),Kn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?_t===0&&(_t=3):Bm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return ca(),mp(t,e),t===null&&Hl(e.stateNode.containerInfo),Ot(e),null;case 10:return Sm(e.type._context),Ot(e),null;case 17:return ln(e.type)&&rh(),Ot(e),null;case 19:if($e(Ye),o=e.memoizedState,o===null)return Ot(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ol(o,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=hh(t),l!==null){for(e.flags|=128,ol(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&ot()>da&&(e.flags|=128,i=!0,ol(o,!1),e.lanes=4194304)}else{if(!i)if(t=hh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ol(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ze)return Ot(e),null}else 2*ot()-o.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,i=!0,ol(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ot(),e.sibling=null,n=Ye.current,je(Ye,i?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Um(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function TA(t,e){switch(wm(e),e.tag){case 1:return ln(e.type)&&rh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ca(),$e(an),$e(zt),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return km(e),null;case 13:if($e(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));la()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ye),null;case 4:return ca(),null;case 10:return Sm(e.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var mc=!1,Vt=!1,EA=typeof WeakSet=="function"?WeakSet:Set,oe=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function gp(t,e,n){try{n()}catch(i){nt(t,e,i)}}var my=!1;function IA(t,e){if(Xf=eh,t=TT(),ym(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,p=0,y=0,w=t,T=null;t:for(;;){for(var M;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(d=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(M=w.firstChild)!==null;)T=w,w=M;for(;;){if(w===t)break t;if(T===n&&++p===s&&(h=l),T===o&&++y===i&&(d=l),(M=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=M}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ep={focusedElem:t,selectionRange:n},eh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var U=V.memoizedProps,Z=V.memoizedState,x=e.stateNode,C=x.getSnapshotBeforeUpdate(e.elementType===e.type?U:Gn(e.type,U),Z);x.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var D=e.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(W){nt(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return V=my,my=!1,V}function Cl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&gp(e,n,o)}s=s.next}while(s!==i)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function _p(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _E(t){var e=t.alternate;e!==null&&(t.alternate=null,_E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_i],delete e[ql],delete e[ip],delete e[sA],delete e[oA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yE(t){return t.tag===5||t.tag===3||t.tag===4}function gy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ih));else if(i!==4&&(t=t.child,t!==null))for(yp(t,e,n),t=t.sibling;t!==null;)yp(t,e,n),t=t.sibling}function vp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(vp(t,e,n),t=t.sibling;t!==null;)vp(t,e,n),t=t.sibling}var Pt=null,Zn=!1;function Er(t,e,n){for(n=n.child;n!==null;)vE(t,e,n),n=n.sibling}function vE(t,e,n){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(Hh,n)}catch{}switch(n.tag){case 5:Vt||qo(n,e);case 6:var i=Pt,s=Zn;Pt=null,Er(t,e,n),Pt=i,Zn=s,Pt!==null&&(Zn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Zn?(t=Pt,n=n.stateNode,t.nodeType===8?rf(t.parentNode,n):t.nodeType===1&&rf(t,n),Ul(t)):rf(Pt,n.stateNode));break;case 4:i=Pt,s=Zn,Pt=n.stateNode.containerInfo,Zn=!0,Er(t,e,n),Pt=i,Zn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&gp(n,e,l),s=s.next}while(s!==i)}Er(t,e,n);break;case 1:if(!Vt&&(qo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){nt(n,e,h)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(Vt=(i=Vt)||n.memoizedState!==null,Er(t,e,n),Vt=i):Er(t,e,n);break;default:Er(t,e,n)}}function _y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EA),e.forEach(function(i){var s=LA.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Pt=h.stateNode,Zn=!1;break e;case 3:Pt=h.stateNode.containerInfo,Zn=!0;break e;case 4:Pt=h.stateNode.containerInfo,Zn=!0;break e}h=h.return}if(Pt===null)throw Error(Y(160));vE(o,l,s),Pt=null,Zn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){nt(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wE(e,t),e=e.sibling}function wE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),pi(t),i&4){try{Cl(3,t,t.return),Yh(3,t)}catch(U){nt(t,t.return,U)}try{Cl(5,t,t.return)}catch(U){nt(t,t.return,U)}}break;case 1:$n(e,t),pi(t),i&512&&n!==null&&qo(n,n.return);break;case 5:if($n(e,t),pi(t),i&512&&n!==null&&qo(n,n.return),t.flags&32){var s=t.stateNode;try{Ml(s,"")}catch(U){nt(t,t.return,U)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&jw(s,o),Hf(h,l);var p=Hf(h,o);for(l=0;l<d.length;l+=2){var y=d[l],w=d[l+1];y==="style"?Gw(s,w):y==="dangerouslySetInnerHTML"?qw(s,w):y==="children"?Ml(s,w):sm(s,y,w,p)}switch(h){case"input":Ff(s,o);break;case"textarea":Hw(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var M=o.value;M!=null?Go(s,!!o.multiple,M,!1):T!==!!o.multiple&&(o.defaultValue!=null?Go(s,!!o.multiple,o.defaultValue,!0):Go(s,!!o.multiple,o.multiple?[]:"",!1))}s[ql]=o}catch(U){nt(t,t.return,U)}}break;case 6:if($n(e,t),pi(t),i&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(U){nt(t,t.return,U)}}break;case 3:if($n(e,t),pi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ul(e.containerInfo)}catch(U){nt(t,t.return,U)}break;case 4:$n(e,t),pi(t);break;case 13:$n(e,t),pi(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Fm=ot())),i&4&&_y(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(p=Vt)||y,$n(e,t),Vt=p):$n(e,t),pi(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(oe=t,y=t.child;y!==null;){for(w=oe=y;oe!==null;){switch(T=oe,M=T.child,T.tag){case 0:case 11:case 14:case 15:Cl(4,T,T.return);break;case 1:qo(T,T.return);var V=T.stateNode;if(typeof V.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(U){nt(i,n,U)}}break;case 5:qo(T,T.return);break;case 22:if(T.memoizedState!==null){vy(w);continue}}M!==null?(M.return=T,oe=M):vy(w)}y=y.sibling}e:for(y=null,w=t;;){if(w.tag===5){if(y===null){y=w;try{s=w.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=$w("display",l))}catch(U){nt(t,t.return,U)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(U){nt(t,t.return,U)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:$n(e,t),pi(t),i&4&&_y(t);break;case 21:break;default:$n(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ml(s,""),i.flags&=-33);var o=gy(t);vp(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=gy(t);yp(t,h,l);break;default:throw Error(Y(161))}}catch(d){nt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SA(t,e,n){oe=t,TE(t)}function TE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||mc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Vt;h=mc;var p=Vt;if(mc=l,(Vt=d)&&!p)for(oe=s;oe!==null;)l=oe,d=l.child,l.tag===22&&l.memoizedState!==null?wy(s):d!==null?(d.return=l,oe=d):wy(s);for(;o!==null;)oe=o,TE(o),o=o.sibling;oe=s,mc=h,Vt=p}yy(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):yy(t)}}function yy(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Yh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Vt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ny(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ny(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&Ul(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Vt||e.flags&512&&_p(e)}catch(T){nt(e,e.return,T)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function vy(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function wy(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yh(4,e)}catch(d){nt(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){nt(e,s,d)}}var o=e.return;try{_p(e)}catch(d){nt(e,o,d)}break;case 5:var l=e.return;try{_p(e)}catch(d){nt(e,l,d)}}}catch(d){nt(e,e.return,d)}if(e===t){oe=null;break}var h=e.sibling;if(h!==null){h.return=e.return,oe=h;break}oe=e.return}}var PA=Math.ceil,ph=ur.ReactCurrentDispatcher,Mm=ur.ReactCurrentOwner,On=ur.ReactCurrentBatchConfig,Le=0,St=null,dt=null,kt=0,pn=0,$o=ts(0),_t=0,Yl=null,Fs=0,Jh=0,Vm=0,Al=null,nn=null,Fm=0,da=1/0,qi=null,mh=!1,wp=null,zr=null,gc=!1,Lr=null,gh=0,kl=0,Tp=null,Oc=-1,Dc=0;function qt(){return Le&6?ot():Oc!==-1?Oc:Oc=ot()}function Ur(t){return t.mode&1?Le&2&&kt!==0?kt&-kt:lA.transition!==null?(Dc===0&&(Dc=sT()),Dc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:dT(t.type)),t):1}function Xn(t,e,n,i){if(50<kl)throw kl=0,Tp=null,Error(Y(185));uu(t,n,i),(!(Le&2)||t!==St)&&(t===St&&(!(Le&2)&&(Jh|=n),_t===4&&Ar(t,kt)),un(t,i),n===1&&Le===0&&!(e.mode&1)&&(da=ot()+500,Zh&&ns()))}function un(t,e){var n=t.callbackNode;lC(t,e);var i=Xc(t,t===St?kt:0);if(i===0)n!==null&&R_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&R_(n),e===1)t.tag===0?aA(Ty.bind(null,t)):NT(Ty.bind(null,t)),iA(function(){!(Le&6)&&ns()}),n=null;else{switch(oT(i)){case 1:n=cm;break;case 4:n=iT;break;case 16:n=Jc;break;case 536870912:n=rT;break;default:n=Jc}n=RE(n,EE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EE(t,e){if(Oc=-1,Dc=0,Le&6)throw Error(Y(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var i=Xc(t,t===St?kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=_h(t,i);else{e=i;var s=Le;Le|=2;var o=SE();(St!==t||kt!==e)&&(qi=null,da=ot()+500,xs(t,e));do try{kA();break}catch(h){IE(t,h)}while(!0);Im(),ph.current=o,Le=s,dt!==null?e=0:(St=null,kt=0,e=_t)}if(e!==0){if(e===2&&(s=Zf(t),s!==0&&(i=s,e=Ep(t,s))),e===1)throw n=Yl,xs(t,0),Ar(t,i),un(t,ot()),n;if(e===6)Ar(t,i);else{if(s=t.current.alternate,!(i&30)&&!CA(s)&&(e=_h(t,i),e===2&&(o=Zf(t),o!==0&&(i=o,e=Ep(t,o))),e===1))throw n=Yl,xs(t,0),Ar(t,i),un(t,ot()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:Es(t,nn,qi);break;case 3:if(Ar(t,i),(i&130023424)===i&&(e=Fm+500-ot(),10<e)){if(Xc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=np(Es.bind(null,t,nn,qi),e);break}Es(t,nn,qi);break;case 4:if(Ar(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Jn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=ot()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*PA(i/1960))-i,10<i){t.timeoutHandle=np(Es.bind(null,t,nn,qi),i);break}Es(t,nn,qi);break;case 5:Es(t,nn,qi);break;default:throw Error(Y(329))}}}return un(t,ot()),t.callbackNode===n?EE.bind(null,t):null}function Ep(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(xs(t,e).flags|=256),t=_h(t,e),t!==2&&(e=nn,nn=n,e!==null&&Ip(e)),t}function Ip(t){nn===null?nn=t:nn.push.apply(nn,t)}function CA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!ni(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Vm,e&=~Jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),i=1<<n;t[n]=-1,e&=~i}}function Ty(t){if(Le&6)throw Error(Y(327));Jo();var e=Xc(t,0);if(!(e&1))return un(t,ot()),null;var n=_h(t,e);if(t.tag!==0&&n===2){var i=Zf(t);i!==0&&(e=i,n=Ep(t,i))}if(n===1)throw n=Yl,xs(t,0),Ar(t,e),un(t,ot()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,nn,qi),un(t,ot()),null}function zm(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(da=ot()+500,Zh&&ns())}}function zs(t){Lr!==null&&Lr.tag===0&&!(Le&6)&&Jo();var e=Le;Le|=1;var n=On.transition,i=ze;try{if(On.transition=null,ze=1,t)return t()}finally{ze=i,On.transition=n,Le=e,!(Le&6)&&ns()}}function Um(){pn=$o.current,$e($o)}function xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nA(n)),dt!==null)for(n=dt.return;n!==null;){var i=n;switch(wm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rh();break;case 3:ca(),$e(an),$e(zt),Rm();break;case 5:km(i);break;case 4:ca();break;case 13:$e(Ye);break;case 19:$e(Ye);break;case 10:Sm(i.type._context);break;case 22:case 23:Um()}n=n.return}if(St=t,dt=t=Br(t.current,null),kt=pn=e,_t=0,Yl=null,Vm=Jh=Fs=0,nn=Al=null,Ps!==null){for(e=0;e<Ps.length;e++)if(n=Ps[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Ps=null}return t}function IE(t,e){do{var n=dt;try{if(Im(),Nc.current=fh,dh){for(var i=Je.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}dh=!1}if(Vs=0,It=gt=Je=null,Pl=!1,Zl=0,Mm.current=null,n===null||n.return===null){_t=1,Yl=e,dt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=kt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=h,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var T=y.alternate;T?(y.updateQueue=T.updateQueue,y.memoizedState=T.memoizedState,y.lanes=T.lanes):(y.updateQueue=null,y.memoizedState=null)}var M=ly(l);if(M!==null){M.flags&=-257,uy(M,l,h,o,e),M.mode&1&&ay(o,p,e),e=M,d=p;var V=e.updateQueue;if(V===null){var U=new Set;U.add(d),e.updateQueue=U}else V.add(d);break e}else{if(!(e&1)){ay(o,p,e),Bm();break e}d=Error(Y(426))}}else if(Ze&&h.mode&1){var Z=ly(l);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),uy(Z,l,h,o,e),Tm(ha(d,h));break e}}o=d=ha(d,h),_t!==4&&(_t=2),Al===null?Al=[o]:Al.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=oE(o,d,e);ty(o,x);break e;case 1:h=d;var C=o.type,D=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(zr===null||!zr.has(D)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=aE(o,h,e);ty(o,W);break e}}o=o.return}while(o!==null)}CE(n)}catch(Q){e=Q,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function SE(){var t=ph.current;return ph.current=fh,t===null?fh:t}function Bm(){(_t===0||_t===3||_t===2)&&(_t=4),St===null||!(Fs&268435455)&&!(Jh&268435455)||Ar(St,kt)}function _h(t,e){var n=Le;Le|=2;var i=SE();(St!==t||kt!==e)&&(qi=null,xs(t,e));do try{AA();break}catch(s){IE(t,s)}while(!0);if(Im(),Le=n,ph.current=i,dt!==null)throw Error(Y(261));return St=null,kt=0,_t}function AA(){for(;dt!==null;)PE(dt)}function kA(){for(;dt!==null&&!XP();)PE(dt)}function PE(t){var e=kE(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?CE(t):dt=e,Mm.current=null}function CE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TA(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,dt=null;return}}else if(n=wA(n,e,pn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);_t===0&&(_t=5)}function Es(t,e,n){var i=ze,s=On.transition;try{On.transition=null,ze=1,RA(t,e,n,i)}finally{On.transition=s,ze=i}return null}function RA(t,e,n,i){do Jo();while(Lr!==null);if(Le&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(uC(t,o),t===St&&(dt=St=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gc||(gc=!0,RE(Jc,function(){return Jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=On.transition,On.transition=null;var l=ze;ze=1;var h=Le;Le|=4,Mm.current=null,IA(t,n),wE(n,t),KC(ep),eh=!!Xf,ep=Xf=null,t.current=n,SA(n),eC(),Le=h,ze=l,On.transition=o}else t.current=n;if(gc&&(gc=!1,Lr=t,gh=s),o=t.pendingLanes,o===0&&(zr=null),iC(n.stateNode),un(t,ot()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(mh)throw mh=!1,t=wp,wp=null,t;return gh&1&&t.tag!==0&&Jo(),o=t.pendingLanes,o&1?t===Tp?kl++:(kl=0,Tp=t):kl=0,ns(),null}function Jo(){if(Lr!==null){var t=oT(gh),e=On.transition,n=ze;try{if(On.transition=null,ze=16>t?16:t,Lr===null)var i=!1;else{if(t=Lr,Lr=null,gh=0,Le&6)throw Error(Y(331));var s=Le;for(Le|=4,oe=t.current;oe!==null;){var o=oe,l=o.child;if(oe.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var p=h[d];for(oe=p;oe!==null;){var y=oe;switch(y.tag){case 0:case 11:case 15:Cl(8,y,o)}var w=y.child;if(w!==null)w.return=y,oe=w;else for(;oe!==null;){y=oe;var T=y.sibling,M=y.return;if(_E(y),y===p){oe=null;break}if(T!==null){T.return=M,oe=T;break}oe=M}}}var V=o.alternate;if(V!==null){var U=V.child;if(U!==null){V.child=null;do{var Z=U.sibling;U.sibling=null,U=Z}while(U!==null)}}oe=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,oe=l;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Cl(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,oe=x;break e}oe=o.return}}var C=t.current;for(oe=C;oe!==null;){l=oe;var D=l.child;if(l.subtreeFlags&2064&&D!==null)D.return=l,oe=D;else e:for(l=C;oe!==null;){if(h=oe,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Yh(9,h)}}catch(Q){nt(h,h.return,Q)}if(h===l){oe=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,oe=W;break e}oe=h.return}}if(Le=s,ns(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(Hh,t)}catch{}i=!0}return i}finally{ze=n,On.transition=e}}return!1}function Ey(t,e,n){e=ha(n,e),e=oE(t,e,1),t=Fr(t,e,1),e=qt(),t!==null&&(uu(t,1,e),un(t,e))}function nt(t,e,n){if(t.tag===3)Ey(t,t,n);else for(;e!==null;){if(e.tag===3){Ey(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zr===null||!zr.has(i))){t=ha(n,t),t=aE(e,t,1),e=Fr(e,t,1),t=qt(),e!==null&&(uu(e,1,t),un(e,t));break}}e=e.return}}function xA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(kt&n)===n&&(_t===4||_t===3&&(kt&130023424)===kt&&500>ot()-Fm?xs(t,0):Vm|=n),un(t,e)}function AE(t,e){e===0&&(t.mode&1?(e=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):e=1);var n=qt();t=nr(t,e),t!==null&&(uu(t,e,n),un(t,n))}function NA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AE(t,n)}function LA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),AE(t,n)}var kE;kE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,vA(t,e,n);on=!!(t.flags&131072)}else on=!1,Ze&&e.flags&1048576&&LT(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bc(t,e),t=e.pendingProps;var s=aa(e,zt.current);Yo(e,n),s=Nm(null,e,i,t,s,n);var o=Lm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(i)?(o=!0,sh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cm(e),s.updater=Qh,e.stateNode=s,s._reactInternals=e,up(e,i,t,n),e=dp(null,e,i,!0,o,n)):(e.tag=0,Ze&&o&&vm(e),Wt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=OA(i),t=Gn(i,t),s){case 0:e=hp(null,e,i,t,n);break e;case 1:e=dy(null,e,i,t,n);break e;case 11:e=cy(null,e,i,t,n);break e;case 14:e=hy(null,e,i,Gn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),hp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),dy(t,e,i,s,n);case 3:e:{if(hE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,s=o.element,FT(t,e),ch(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ha(Error(Y(423)),e),e=fy(t,e,i,n,s);break e}else if(i!==s){s=ha(Error(Y(424)),e),e=fy(t,e,i,n,s);break e}else for(mn=Vr(e.stateNode.containerInfo.firstChild),_n=e,Ze=!0,Kn=null,n=MT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(la(),i===s){e=ir(t,e,n);break e}Wt(t,e,i,n)}e=e.child}return e;case 5:return zT(e),t===null&&op(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,tp(i,s)?l=null:o!==null&&tp(i,o)&&(e.flags|=32),cE(t,e),Wt(t,e,l,n),e.child;case 6:return t===null&&op(e),null;case 13:return dE(t,e,n);case 4:return Am(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ua(e,null,i,n):Wt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),cy(t,e,i,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,je(lh,i._currentValue),i._currentValue=l,o!==null)if(ni(o.value,l)){if(o.children===s.children&&!an.current){e=ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ji(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ap(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),ap(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Yo(e,n),s=Dn(s),i=i(s),e.flags|=1,Wt(t,e,i,n),e.child;case 14:return i=e.type,s=Gn(i,e.pendingProps),s=Gn(i.type,s),hy(t,e,i,s,n);case 15:return lE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),bc(t,e),e.tag=1,ln(i)?(t=!0,sh(e)):t=!1,Yo(e,n),sE(e,i,s),up(e,i,s,n),dp(null,e,i,!0,t,n);case 19:return fE(t,e,n);case 22:return uE(t,e,n)}throw Error(Y(156,e.tag))};function RE(t,e){return nT(t,e)}function bA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,i){return new bA(t,e,n,i)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OA(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===am)return 11;if(t===lm)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")jm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Mo:return Ns(n.children,s,o,e);case om:l=8,s|=8;break;case bf:return t=bn(12,n,e,s|2),t.elementType=bf,t.lanes=o,t;case Of:return t=bn(13,n,e,s),t.elementType=Of,t.lanes=o,t;case Df:return t=bn(19,n,e,s),t.elementType=Df,t.lanes=o,t;case zw:return Xh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vw:l=10;break e;case Fw:l=9;break e;case am:l=11;break e;case lm:l=14;break e;case Sr:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=bn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Ns(t,e,n,i){return t=bn(7,t,i,e),t.lanes=n,t}function Xh(t,e,n,i){return t=bn(22,t,i,e),t.elementType=zw,t.lanes=n,t.stateNode={isHidden:!1},t}function df(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function ff(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DA(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hm(t,e,n,i,s,o,l,h,d){return t=new DA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cm(o),t}function MA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function xE(t){if(!t)return Gr;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(ln(n))return xT(t,n,e)}return e}function NE(t,e,n,i,s,o,l,h,d){return t=Hm(n,i,!0,t,s,o,l,h,d),t.context=xE(null),n=t.current,i=qt(),s=Ur(n),o=Ji(i,s),o.callback=e??null,Fr(n,o,s),t.current.lanes=s,uu(t,s,i),un(t,i),t}function ed(t,e,n,i){var s=e.current,o=qt(),l=Ur(s);return n=xE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ji(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Fr(s,e,l),t!==null&&(Xn(t,s,l,o),xc(t,s,l)),l}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wm(t,e){Iy(t,e),(t=t.alternate)&&Iy(t,e)}function VA(){return null}var LE=typeof reportError=="function"?reportError:function(t){console.error(t)};function qm(t){this._internalRoot=t}td.prototype.render=qm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ed(t,e,null,null)};td.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){ed(null,t,null,null)}),e[tr]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var e=uT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&hT(t)}};function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sy(){}function FA(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=yh(l);o.call(p)}}var l=NE(e,i,t,0,null,!1,!1,"",Sy);return t._reactRootContainer=l,t[tr]=l.current,Hl(t.nodeType===8?t.parentNode:t),zs(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=yh(d);h.call(p)}}var d=Hm(t,0,!1,null,null,!1,!1,"",Sy);return t._reactRootContainer=d,t[tr]=d.current,Hl(t.nodeType===8?t.parentNode:t),zs(function(){ed(e,d,n,i)}),d}function id(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=yh(l);h.call(d)}}ed(e,l,t,s)}else l=FA(n,e,t,s,i);return yh(l)}aT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dl(e.pendingLanes);n!==0&&(hm(e,n|1),un(e,ot()),!(Le&6)&&(da=ot()+500,ns()))}break;case 13:zs(function(){var i=nr(t,1);if(i!==null){var s=qt();Xn(i,t,1,s)}}),Wm(t,1)}};dm=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=qt();Xn(e,t,134217728,n)}Wm(t,134217728)}};lT=function(t){if(t.tag===13){var e=Ur(t),n=nr(t,e);if(n!==null){var i=qt();Xn(n,t,e,i)}Wm(t,e)}};uT=function(){return ze};cT=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};qf=function(t,e,n){switch(e){case"input":if(Ff(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Gh(i);if(!s)throw Error(Y(90));Bw(i),Ff(i,s)}}}break;case"textarea":Hw(t,n);break;case"select":e=n.value,e!=null&&Go(t,!!n.multiple,e,!1)}};Qw=zm;Yw=zs;var zA={usingClientEntryPoint:!1,Events:[hu,Uo,Gh,Zw,Kw,zm]},al={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UA={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eT(t),t===null?null:t.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||VA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{Hh=_c.inject(UA),yi=_c}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zA;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(e))throw Error(Y(200));return MA(t,e,null,n)};wn.createRoot=function(t,e){if(!$m(t))throw Error(Y(299));var n=!1,i="",s=LE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hm(t,1,!1,null,null,n,!1,i,s),t[tr]=e.current,Hl(t.nodeType===8?t.parentNode:t),new qm(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=eT(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return zs(t)};wn.hydrate=function(t,e,n){if(!nd(e))throw Error(Y(200));return id(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!$m(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=LE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=NE(e,null,t,1,n??null,s,!1,o,l),t[tr]=e.current,Hl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new td(e)};wn.render=function(t,e,n){if(!nd(e))throw Error(Y(200));return id(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!nd(t))throw Error(Y(40));return t._reactRootContainer?(zs(function(){id(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};wn.unstable_batchedUpdates=zm;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return id(t,e,n,!1,i)};wn.version="18.3.1-next-f1338f8080-20240426";function bE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bE)}catch(t){console.error(t)}}bE(),bw.exports=wn;var OE=bw.exports,Py=OE;Nf.createRoot=Py.createRoot,Nf.hydrateRoot=Py.hydrateRoot;function DE(t,e){const n=le.useRef(e);le.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const BA=1;function jA(t){return Object.freeze({__version:BA,map:t})}function HA(t,e){return Object.freeze({...t,...e})}const ME=le.createContext(null),VE=ME.Provider;function Gm(){const t=le.useContext(ME);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function WA(t){function e(n,i){const{instance:s,context:o}=t(n).current;return le.useImperativeHandle(i,()=>s),n.children==null?null:Zc.createElement(VE,{value:o},n.children)}return le.forwardRef(e)}function qA(t){function e(n,i){const[s,o]=le.useState(!1),{instance:l}=t(n,o).current;le.useImperativeHandle(i,()=>l),le.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?OE.createPortal(n.children,h):null}return le.forwardRef(e)}function $A(t){function e(n,i){const{instance:s}=t(n).current;return le.useImperativeHandle(i,()=>s),null}return le.forwardRef(e)}function FE(t,e){const n=le.useRef();le.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Zm(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function GA(t,e){return function(i,s){const o=Gm(),l=t(Zm(i,o),o);return DE(o.map,i.attribution),FE(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Sp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(mP,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,a,c){var f,g,v,R;return R=function(){f=!1,g&&(v.apply(c,g),g=!1)},v=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(R,a),f=!0)},v}function y(r,a,c){var f=a[1],g=a[0],v=f-g;return r===f&&c?r:((r-g)%v+v)%v+g}function w(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function M(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function V(r){return M(r).split(/\s+/)}function U(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function Z(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function C(r,a){return r.replace(x,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var D=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var S=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-S));return S=a+c,window.setTimeout(r,c)}var A=window.requestAnimationFrame||X("RequestAnimationFrame")||I,b=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function N(r,a,c){if(c&&A===I)r.call(a);else return A.call(window,l(r,a))}function P(r){r&&b.call(window,r)}var k={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:p,wrapNum:y,falseFn:w,formatNum:T,trim:M,splitWords:V,setOptions:U,getParamString:Z,template:C,isArray:D,indexOf:W,emptyImageUrl:Q,requestFn:A,cancelFn:b,requestAnimFrame:N,cancelAnimFrame:P};function Re(){}Re.extend=function(r){var a=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Kt(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var v=0,R=f._initHooks.length;v<R;v++)f._initHooks[v].call(this)}},a},Re.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Re.mergeOptions=function(r){return s(this.prototype.options,r),this},Re.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Kt(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=D(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Qe={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=V(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=V(r);for(var g=arguments.length===1,v=0,R=r.length;v<R;v++)g?this._off(r[v]):this._off(r[v],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,v;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,v=f.length;g<v;g++)f[g].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var R=this._listens(r,a,c);if(R!==!1){var B=f[R];this._firingCount&&(B.fn=w,this._events[r]=f=f.slice()),f.splice(R,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var v=0,R=g.length;v<R;v++){var B=g[v],H=B.fn;B.once&&this.off(r,H,B.ctx),H.call(B.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var v=this._events&&this._events[r];if(v&&v.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var R in this._eventParents)if(this._eventParents[R].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,v=f.length;g<v;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=V(r);for(var g=0,v=r.length;g<v;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Qe.addEventListener=Qe.on,Qe.removeEventListener=Qe.clearAllEventListeners=Qe.off,Qe.addOneTimeEventListener=Qe.once,Qe.fireEvent=Qe.fire,Qe.hasEventListeners=Qe.listens;var hn=Re.extend(Qe);function q(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ce=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(J(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(J(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(r){r=J(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=J(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=J(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function J(r,a,c){return r instanceof q?r:D(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,a,c)}function te(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}te.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)a=c=J(r);else if(r=he(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof q?r=J(r):r=he(r),r instanceof te?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=he(r);var a=this.min,c=this.max,f=r.min,g=r.max,v=g.x>=a.x&&f.x<=c.x,R=g.y>=a.y&&f.y<=c.y;return v&&R},overlaps:function(r){r=he(r);var a=this.min,c=this.max,f=r.min,g=r.max,v=g.x>a.x&&f.x<c.x,R=g.y>a.y&&f.y<c.y;return v&&R},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return he(J(a.x-f,a.y-g),J(c.x+f,c.y+g))},equals:function(r){return r?(r=he(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function he(r,a){return!r||r instanceof te?r:new te(r,a)}function Ge(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ge.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof we)f=r,g=r;else if(r instanceof Ge){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(de(r)||Se(r)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ge(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof we||"lat"in r?r=de(r):r=Se(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ge?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Se(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>=a.lat&&f.lat<=c.lat,R=g.lng>=a.lng&&f.lng<=c.lng;return v&&R},overlaps:function(r){r=Se(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),v=g.lat>a.lat&&f.lat<c.lat,R=g.lng>a.lng&&f.lng<c.lng;return v&&R},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Se(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Se(r,a){return r instanceof Ge?r:new Ge(r,a)}function we(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(r,a){if(!r)return!1;r=de(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return Nt.distance(this,de(r))},wrap:function(){return Nt.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Se([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function de(r,a,c){return r instanceof we?r:D(r)&&typeof r[0]!="object"?r.length===3?new we(r[0],r[1],r[2]):r.length===2?new we(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new we(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new we(r,a,c)}var He={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new te(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?y(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?y(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new we(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var v=r.getSouthWest(),R=r.getNorthEast(),B=new we(v.lat-f,v.lng-g),H=new we(R.lat-f,R.lng-g);return new Ge(B,H)}},Nt=s({},He,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,v=Math.sin((a.lat-r.lat)*c/2),R=Math.sin((a.lng-r.lng)*c/2),B=v*v+Math.cos(f)*Math.cos(g)*R*R,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),as=6378137,ki={R:as,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new q(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=as*Math.PI;return new te([-r,-r],[r,r])}()};function Ri(r,a,c,f){if(D(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Ri.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new q((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Un(r,a,c,f){return new Ri(r,a,c,f)}var xi=s({},Nt,{code:"EPSG:3857",projection:ki,transformation:function(){var r=.5/(Math.PI*ki.R);return Un(r,.5,-r,.5)}()}),to=s({},xi,{code:"EPSG:900913"});function no(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function dr(r,a){var c="",f,g,v,R,B,H;for(f=0,v=r.length;f<v;f++){for(B=r[f],g=0,R=B.length;g<R;g++)H=B[g],c+=(g?"L":"M")+H.x+" "+H.y;c+=a?ae.svg?"z":"x":""}return c||"M0 0"}var Ni=document.documentElement.style,Li="ActiveXObject"in window,at=Li&&!document.addEventListener,lt="msLaunchUri"in navigator&&!("documentMode"in document),si=Yt("webkit"),ls=Yt("android"),F=Yt("android 2")||Yt("android 3"),Te=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=ls&&Yt("Google")&&Te<537&&!("AudioNode"in window),vt=!!window.opera,Qt=!lt&&Yt("chrome"),En=Yt("gecko")&&!si&&!vt&&!Li,Rd=!Qt&&Yt("safari"),Su=Yt("phantom"),xa="OTransition"in Ni,Pu=navigator.platform.indexOf("Win")===0,fr=Li&&"transition"in Ni,us="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!F,io="MozPerspective"in Ni,bi=!window.L_DISABLE_3D&&(fr||us||io)&&!xa&&!Su,pr=typeof orientation<"u"||Yt("mobile"),ro=pr&&si,Cu=pr&&us,mr=!window.PointerEvent&&window.MSPointerEvent,Na=!!(window.PointerEvent||mr),wt="ontouchstart"in window||!!window.TouchEvent,Au=!window.L_NO_TOUCH&&(wt||Na),cs=pr&&vt,hs=pr&&En,xd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nd=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),gr=function(){return!!document.createElement("canvas").getContext}(),La=!!(document.createElementNS&&no("svg").createSVGRect),Ld=!!La&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),so=!La&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),ku=navigator.platform.indexOf("Mac")===0,Ru=navigator.platform.indexOf("Linux")===0;function Yt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ae={ie:Li,ielt9:at,edge:lt,webkit:si,android:ls,android23:F,androidStock:it,opera:vt,chrome:Qt,gecko:En,safari:Rd,phantom:Su,opera12:xa,win:Pu,ie3d:fr,webkit3d:us,gecko3d:io,any3d:bi,mobile:pr,mobileWebkit:ro,mobileWebkit3d:Cu,msPointer:mr,pointer:Na,touch:Au,touchNative:wt,mobileOpera:cs,mobileGecko:hs,retina:xd,passiveEvents:Nd,canvas:gr,svg:La,vml:so,inlineSvg:Ld,mac:ku,linux:Ru},xu=ae.msPointer?"MSPointerDown":"pointerdown",Bn=ae.msPointer?"MSPointerMove":"pointermove",ba=ae.msPointer?"MSPointerUp":"pointerup",Oa=ae.msPointer?"MSPointerCancel":"pointercancel",ds={touchstart:xu,touchmove:Bn,touchend:ba,touchcancel:Oa},oo={touchstart:Da,touchmove:In,touchend:In,touchcancel:In},Oi={},Nu=!1;function Lu(r,a,c){return a==="touchstart"&&fs(),oo[a]?(c=oo[a].bind(this,c),r.addEventListener(ds[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function bd(r,a,c){if(!ds[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(ds[a],c,!1)}function ao(r){Oi[r.pointerId]=r}function bu(r){Oi[r.pointerId]&&(Oi[r.pointerId]=r)}function lo(r){delete Oi[r.pointerId]}function fs(){Nu||(document.addEventListener(xu,ao,!0),document.addEventListener(Bn,bu,!0),document.addEventListener(ba,lo,!0),document.addEventListener(Oa,lo,!0),Nu=!0)}function In(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Oi)a.touches.push(Oi[c]);a.changedTouches=[a],r(a)}}function Da(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ut(a),In(r,a)}function Od(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ou=200;function Du(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(v){if(v.detail!==1){f=v.detail;return}if(!(v.pointerType==="mouse"||v.sourceCapabilities&&!v.sourceCapabilities.firesTouchEvents)){var R=Ua(v);if(!(R.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!R.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Ou?(f++,f===2&&a(Od(v))):f=1,c=B}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Mu(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var ps=uo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Di=uo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ma=Di==="webkitTransition"||Di==="OTransition"?Di+"End":"transitionend";function Va(r){return typeof r=="string"?document.getElementById(r):r}function _r(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function xe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function be(r){var a=r.parentNode;a&&a.removeChild(r)}function Bt(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Sn(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Pn(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function ms(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=oi(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function se(r,a){if(r.classList!==void 0)for(var c=V(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!ms(r,a)){var v=oi(r);Mi(r,(v?v+" ":"")+a)}}function Ue(r,a){r.classList!==void 0?r.classList.remove(a):Mi(r,M((" "+oi(r)+" ").replace(" "+a+" "," ")))}function Mi(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function oi(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Jt(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Vu(r,a)}function Vu(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function uo(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Vi(r,a,c){var f=a||new q(0,0);r.style[ps]=(ae.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function tt(r,a){r._leaflet_pos=a,ae.any3d?Vi(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Fi(r){return r._leaflet_pos||new q(0,0)}var jn,dn,co;if("onselectstart"in document)jn=function(){ge(window,"selectstart",ut)},dn=function(){Fe(window,"selectstart",ut)};else{var yr=uo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);jn=function(){if(yr){var r=document.documentElement.style;co=r[yr],r[yr]="none"}},dn=function(){yr&&(document.documentElement.style[yr]=co,co=void 0)}}function ho(){ge(window,"dragstart",ut)}function fo(){Fe(window,"dragstart",ut)}var gs,ai;function Fa(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(po(),gs=r,ai=r.style.outlineStyle,r.style.outlineStyle="none",ge(window,"keydown",po))}function po(){gs&&(gs.style.outlineStyle=ai,gs=void 0,ai=void 0,Fe(window,"keydown",po))}function Fu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Cn(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Dd={__proto__:null,TRANSFORM:ps,TRANSITION:Di,TRANSITION_END:Ma,get:Va,getStyle:_r,create:xe,remove:be,empty:Bt,toFront:Sn,toBack:Pn,hasClass:ms,addClass:se,removeClass:Ue,setClass:Mi,getClass:oi,setOpacity:Jt,testProp:uo,setTransform:Vi,setPosition:tt,getPosition:Fi,get disableTextSelection(){return jn},get enableTextSelection(){return dn},disableImageDrag:ho,enableImageDrag:fo,preventOutline:Fa,restoreOutline:po,getSizedParentNode:Fu,getScale:Cn};function ge(r,a,c,f){if(a&&typeof a=="object")for(var g in a)mo(r,g,a[g],c);else{a=V(a);for(var v=0,R=a.length;v<R;v++)mo(r,a[v],c,f)}return this}var jt="_leaflet_events";function Fe(r,a,c,f){if(arguments.length===1)vr(r),delete r[jt];else if(a&&typeof a=="object")for(var g in a)_s(r,g,a[g],c);else if(a=V(a),arguments.length===2)vr(r,function(B){return W(a,B)!==-1});else for(var v=0,R=a.length;v<R;v++)_s(r,a[v],c,f);return this}function vr(r,a){for(var c in r[jt]){var f=c.split(/\d/)[0];(!a||a(f))&&_s(r,f,null,null,c)}}var zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mo(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[jt]&&r[jt][g])return this;var v=function(B){return c.call(f||r,B||window.event)},R=v;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?v=Lu(r,a,v):ae.touch&&a==="dblclick"?v=Du(r,v):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(zi[a]||a,v,ae.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(v=function(B){B=B||window.event,ja(r,B)&&R(B)},r.addEventListener(zi[a],v,!1)):r.addEventListener(a,R,!1):r.attachEvent("on"+a,v),r[jt]=r[jt]||{},r[jt][g]=v}function _s(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var v=r[jt]&&r[jt][g];if(!v)return this;!ae.touchNative&&ae.pointer&&a.indexOf("touch")===0?bd(r,a,v):ae.touch&&a==="dblclick"?Mu(r,v):"removeEventListener"in r?r.removeEventListener(zi[a]||a,v,!1):r.detachEvent("on"+a,v),r[jt][g]=null}function De(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function za(r){return mo(r,"wheel",De),this}function ys(r){return ge(r,"mousedown touchstart dblclick contextmenu",De),r._leaflet_disable_click=!0,this}function ut(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function li(r){return ut(r),De(r),this}function Ua(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function vs(r,a){if(!a)return new q(r.clientX,r.clientY);var c=Cn(a),f=c.boundingClientRect;return new q((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var ui=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ba(r){return ae.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/ui:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ja(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ws={__proto__:null,on:ge,off:Fe,stopPropagation:De,disableScrollPropagation:za,disableClickPropagation:ys,preventDefault:ut,stop:li,getPropagationPath:Ua,getMousePosition:vs,getWheelDelta:Ba,isExternalTarget:ja,addListener:ge,removeListener:Fe},Ha=hn.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Fi(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),tt(this._el,c),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=hn.extend({options:{crs:xi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=U(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(de(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Di&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,Ma,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(de(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),v=r instanceof q?r:this.latLngToContainerPoint(r),R=v.subtract(g).multiplyBy(1-1/f),B=this.containerPointToLatLng(g.add(R));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Se(r);var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var v=f.subtract(c).divideBy(2),R=this.project(r.getSouthWest(),g),B=this.project(r.getNorthEast(),g),H=this.unproject(R.add(B).divideBy(2).add(v),g);return{center:H,zoom:g}},fitBounds:function(r,a){if(r=Se(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=J(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!ae.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),v=this.getSize(),R=this._zoom;r=de(r),a=a===void 0?R:a;var B=Math.max(v.x,v.y),H=B*this.getZoomScale(R,a),K=g.distanceTo(f)||1,ne=1.42,fe=ne*ne;function Ie(ct){var ec=ct?-1:1,hP=ct?H:B,dP=H*H-B*B+ec*fe*fe*K*K,fP=2*hP*fe*K,Ud=dP/fP,g_=Math.sqrt(Ud*Ud+1)-Ud,pP=g_<1e-9?-18:Math.log(g_);return pP}function Ht(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function Tt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function Rn(ct){return Ht(ct)/Tt(ct)}var en=Ie(0);function ko(ct){return B*(Tt(en)/Tt(en+ne*ct))}function aP(ct){return B*(Tt(en)*Rn(en+ne*ct)-Ht(en))/fe}function lP(ct){return 1-Math.pow(1-ct,1.5)}var uP=Date.now(),p_=(Ie(1)-en)/ne,cP=c.duration?1e3*c.duration:1e3*p_*.8;function m_(){var ct=(Date.now()-uP)/cP,ec=lP(ct)*p_;ct<=1?(this._flyToFrame=N(m_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(aP(ec)/K)),R),this.getScaleZoom(B/ko(ec),R),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),m_.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Se(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Se(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=J(a.paddingTopLeft||a.padding||[0,0]),f=J(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),v=this.project(r),R=this.getPixelBounds(),B=he([R.min.add(c),R.max.subtract(f)]),H=B.getSize();if(!B.contains(v)){this._enforcingBounds=!0;var K=v.subtract(B.getCenter()),ne=B.extend(v).getSize().subtract(H);g.x+=K.x<0?-ne.x:ne.x,g.y+=K.y<0?-ne.y:ne.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),v=f.subtract(g);return!v.x&&!v.y?this:(r.animate&&r.pan?this.panBy(v):(r.pan&&this._rawPanBy(v),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new we(a,c),g=f.toBounds(r.coords.accuracy*2),v=this._locateOptions;if(v.setView){var R=this.getBoundsZoom(g);this.setView(f,v.maxZoom?Math.min(R,v.maxZoom):R)}var B={latlng:f,bounds:g,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(B[H]=r.coords[H]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)be(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=xe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ge(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Se(r),c=J(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),v=this.getMaxZoom(),R=r.getNorthWest(),B=r.getSouthEast(),H=this.getSize().subtract(c),K=he(this.project(B,f),this.project(R,f)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,fe=H.x/K.x,Ie=H.y/K.y,Ht=a?Math.max(fe,Ie):Math.min(fe,Ie);return f=this.getScaleZoom(Ht,f),ne&&(f=Math.round(f/(ne/100))*(ne/100),f=a?Math.ceil(f/ne)*ne:Math.floor(f/ne)*ne),Math.max(g,Math.min(v,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new te(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(de(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(J(r),a)},layerPointToLatLng:function(r){var a=J(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(de(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(de(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Se(r))},distance:function(r,a){return this.options.crs.distance(de(r),de(a))},containerPointToLayerPoint:function(r){return J(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return J(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(J(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(r)))},mouseEventToContainerPoint:function(r){return vs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Va(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,se(r,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=_r(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tt(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(r.markerPane,"leaflet-zoom-hide"),se(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){tt(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){tt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Fe:ge;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",v=r.target||r.srcElement,R=!1;v;){if(f=this._targets[d(v)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){R=!0;break}if(f&&f.listens(a,!0)&&(g&&!ja(v,r)||(c.push(f),g))||v===this._container)break;v=v.parentNode}return!c.length&&!R&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&Fa(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var v=[],R=0;R<c.length;R++)c[R].listens(a,!0)&&v.push(c[R]);g=v.concat(g)}if(g.length){a==="contextmenu"&&ut(r);var B=g[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var K=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=K?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=K?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(R=0;R<g.length;R++)if(g[R].fire(a,H,!0),H.originalEvent._stopped||g[R].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Fi(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return he([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),v=new te(f.subtract(g),f.add(g)),R=this._getBoundsOffset(v,c,a);return Math.abs(R.x)<=1&&Math.abs(R.y)<=1?r:this.unproject(f.add(R),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new te(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=he(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),v=f.max.subtract(r.max),R=this._rebound(g.x,-v.x),B=this._rebound(g.y,-v.y);return new q(R,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ae.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=ps,f=this._proxy.style[c];Vi(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Vi(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(N(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function go(r,a){return new Ee(r,a)}var Xt=Re.extend({options:{position:"topright"},initialize:function(r){U(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return se(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),ci=function(r){return new Xt(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=xe("div",a+"control-container",this._container);function f(g,v){var R=a+g+" "+a+v;r[g+v]=xe("div",R,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)be(this._controlCorners[r]);be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zu=Xt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){U(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Xt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=xe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ys(a),za(a);var f=this._section=xe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ge(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=xe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ge(g,{keydown:function(v){v.keyCode===13&&this._expandSafely()},click:function(v){ut(v),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=xe("div",r+"-base",f),this._separator=xe("div",r+"-separator",f),this._overlaysList=xe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bt(this._baseLayersList),Bt(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ge(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var v=document.createElement("span");a.appendChild(v),v.appendChild(f),v.appendChild(g);var R=r.overlay?this._overlaysList:this._baseLayersList;return R.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var v=r.length-1;v>=0;v--)a=r[v],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(v=0;v<g.length;v++)this._map.hasLayer(g[v])&&this._map.removeLayer(g[v]);for(v=0;v<f.length;v++)this._map.hasLayer(f[v])||this._map.addLayer(f[v]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ge(r,"click",ut),this.expand();var a=this;setTimeout(function(){Fe(r,"click",ut),a._preventClick=!1})}}),Uu=function(r,a,c){return new zu(r,a,c)},Ui=Xt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=xe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var v=xe("a",c,f);return v.innerHTML=r,v.href="#",v.title=a,v.setAttribute("role","button"),v.setAttribute("aria-label",a),ys(v),ge(v,"click",li),ge(v,"click",g,this),ge(v,"click",this._refocusOnMap,this),v},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Ue(this._zoomInButton,a),Ue(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(se(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(se(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ui,this.addControl(this.zoomControl))});var Bu=function(r){return new Ui(r)},Wa=Xt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=xe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=xe("div",a,c)),r.imperial&&(this._iScale=xe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),qa=function(r){return new Wa(r)},$a='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_o=Xt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?$a+" ":"")+"Leaflet</a>"},initialize:function(r){U(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),ys(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new _o().addTo(this)});var yo=function(r){return new _o(r)};Xt.Layers=zu,Xt.Zoom=Ui,Xt.Scale=Wa,Xt.Attribution=_o,ci.layers=Uu,ci.zoom=Bu,ci.scale=qa,ci.attribution=yo;var fn=Re.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(r,a){return r.addHandler(a,this),this};var ju={Events:Qe},hi=ae.touch?"touchstart mousedown":"mousedown",Hn=hn.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){U(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ge(this._dragStartTarget,hi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hn._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,hi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ms(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Hn._dragging===this&&this.finishDrag();return}if(!(Hn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Hn._dragging=this,this._preventOutline&&Fa(this._element),ho(),jn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Fu(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=Fi(this._element),this._parentScale=Cn(c);var f=r.type==="mousedown";ge(document,f?"mousemove":"touchmove",this._onMove,this),ge(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,ut(r),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),tt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),fo(),dn();var a=this._moved&&this._moving;this._moving=!1,Hn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Ga(r,a,c){var f,g=[1,4,2,8],v,R,B,H,K,ne,fe,Ie;for(v=0,ne=r.length;v<ne;v++)r[v]._code=j(r[v],a);for(B=0;B<4;B++){for(fe=g[B],f=[],v=0,ne=r.length,R=ne-1;v<ne;R=v++)H=r[v],K=r[R],H._code&fe?K._code&fe||(Ie=z(K,H,fe,a,c),Ie._code=j(Ie,a),f.push(Ie)):(K._code&fe&&(Ie=z(K,H,fe,a,c),Ie._code=j(Ie,a),f.push(Ie)),f.push(H));r=f}return r}function Za(r,a){var c,f,g,v,R,B,H,K,ne;if(!r||r.length===0)throw new Error("latlngs not passed");Oe(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var fe=de([0,0]),Ie=Se(r),Ht=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Ht<1700&&(fe=vo(r));var Tt=r.length,Rn=[];for(c=0;c<Tt;c++){var en=de(r[c]);Rn.push(a.project(de([en.lat-fe.lat,en.lng-fe.lng])))}for(B=H=K=0,c=0,f=Tt-1;c<Tt;f=c++)g=Rn[c],v=Rn[f],R=g.y*v.x-v.y*g.x,H+=(g.x+v.x)*R,K+=(g.y+v.y)*R,B+=R*3;B===0?ne=Rn[0]:ne=[H/B,K/B];var ko=a.unproject(J(ne));return de([ko.lat+fe.lat,ko.lng+fe.lng])}function vo(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var v=de(r[g]);a+=v.lat,c+=v.lng,f++}return de([a/f,c/f])}var wo={__proto__:null,clipPolygon:Ga,polygonCenter:Za,centroid:vo};function Lt(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=m(r,c),r=wr(r,c),r}function Ka(r,a,c){return Math.sqrt(_e(r,a,c,!0))}function Hu(r,a,c){return _e(r,a,c)}function wr(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,u(r,g,a,0,c-1);var v,R=[];for(v=0;v<c;v++)g[v]&&R.push(r[v]);return R}function u(r,a,c,f,g){var v=0,R,B,H;for(B=f+1;B<=g-1;B++)H=_e(r[B],r[f],r[g],!0),H>v&&(R=B,v=H);v>c&&(a[R]=1,u(r,a,c,f,R),u(r,a,c,R,g))}function m(r,a){for(var c=[r[0]],f=1,g=0,v=r.length;f<v;f++)ee(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<v-1&&c.push(r[v-1]),c}var _;function E(r,a,c,f,g){var v=f?_:j(r,c),R=j(a,c),B,H,K;for(_=R;;){if(!(v|R))return[r,a];if(v&R)return!1;B=v||R,H=z(r,a,B,c,g),K=j(H,c),B===v?(r=H,v=K):(a=H,R=K)}}function z(r,a,c,f,g){var v=a.x-r.x,R=a.y-r.y,B=f.min,H=f.max,K,ne;return c&8?(K=r.x+v*(H.y-r.y)/R,ne=H.y):c&4?(K=r.x+v*(B.y-r.y)/R,ne=B.y):c&2?(K=H.x,ne=r.y+R*(H.x-r.x)/v):c&1&&(K=B.x,ne=r.y+R*(B.x-r.x)/v),new q(K,ne,g)}function j(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function ee(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function _e(r,a,c,f){var g=a.x,v=a.y,R=c.x-g,B=c.y-v,H=R*R+B*B,K;return H>0&&(K=((r.x-g)*R+(r.y-v)*B)/H,K>1?(g=c.x,v=c.y):K>0&&(g+=R*K,v+=B*K)),R=r.x-g,B=r.y-v,f?R*R+B*B:new q(g,v)}function Oe(r){return!D(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Me(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Oe(r)}function rt(r,a){var c,f,g,v,R,B,H,K;if(!r||r.length===0)throw new Error("latlngs not passed");Oe(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ne=de([0,0]),fe=Se(r),Ie=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ie<1700&&(ne=vo(r));var Ht=r.length,Tt=[];for(c=0;c<Ht;c++){var Rn=de(r[c]);Tt.push(a.project(de([Rn.lat-ne.lat,Rn.lng-ne.lng])))}for(c=0,f=0;c<Ht-1;c++)f+=Tt[c].distanceTo(Tt[c+1])/2;if(f===0)K=Tt[0];else for(c=0,v=0;c<Ht-1;c++)if(R=Tt[c],B=Tt[c+1],g=R.distanceTo(B),v+=g,v>f){H=(v-f)/g,K=[B.x-H*(B.x-R.x),B.y-H*(B.y-R.y)];break}var en=a.unproject(J(K));return de([en.lat+ne.lat,en.lng+ne.lng])}var An={__proto__:null,simplify:Lt,pointToSegmentDistance:Ka,closestPointOnSegment:Hu,clipSegment:E,_getEdgeIntersection:z,_getBitCode:j,_sqClosestPointOnSegment:_e,isFlat:Oe,_flat:Me,polylineCenter:rt},Wn={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new we(r.y,r.x)},bounds:new te([-180,-90],[180,90])},kn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,v=Math.sqrt(1-g*g),R=v*Math.sin(f),B=Math.tan(Math.PI/4-f/2)/Math.pow((1-R)/(1+R),v/2);return f=-c*Math.log(Math.max(B,1e-10)),new q(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),v=Math.exp(-r.y/c),R=Math.PI/2-2*Math.atan(v),B=0,H=.1,K;B<15&&Math.abs(H)>1e-7;B++)K=g*Math.sin(R),K=Math.pow((1-K)/(1+K),g/2),H=Math.PI/2-2*Math.atan(v*K)-R,R+=H;return new we(R*a,r.x*a/c)}},di={__proto__:null,LonLat:Wn,Mercator:kn,SphericalMercator:ki},To=s({},Nt,{code:"EPSG:3395",projection:kn,transformation:function(){var r=.5/(Math.PI*kn.R);return Un(r,.5,-r,.5)}()}),Eo=s({},Nt,{code:"EPSG:4326",projection:Wn,transformation:Un(1/180,1,-1/180,.5)}),zS=s({},He,{projection:Wn,transformation:Un(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});He.Earth=Nt,He.EPSG3395=To,He.EPSG3857=xi,He.EPSG900913=to,He.EPSG4326=Eo,He.Simple=zS;var qn=hn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?D(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Io=qn.extend({initialize:function(r,a){U(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),US=function(r,a){return new Io(r,a)},Bi=Io.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Io.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Io.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ge;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),BS=function(r,a){return new Bi(r,a)},So=Re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){U(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=J(f),v=J(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),v&&(r.style.marginLeft=-v.x+"px",r.style.marginTop=-v.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return ae.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function jS(r){return new So(r)}var Qa=So.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Qa.imagePath!="string"&&(Qa.imagePath=this._detectIconPath()),(this.options.imagePath||Qa.imagePath)+So.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var v=f.exec(c);return v&&v[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=xe("div","leaflet-default-icon-path",document.body),a=_r(r,"background-image")||_r(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Kg=fn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Hn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,v=Fi(a._icon),R=c.getPixelBounds(),B=c.getPixelOrigin(),H=he(R.min._subtract(B).add(g),R.max._subtract(B).subtract(g));if(!H.contains(v)){var K=J((Math.max(H.max.x,v.x)-H.max.x)/(R.max.x-H.max.x)-(Math.min(H.min.x,v.x)-H.min.x)/(R.min.x-H.min.x),(Math.max(H.max.y,v.y)-H.max.y)/(R.max.y-H.max.y)-(Math.min(H.min.y,v.y)-H.min.y)/(R.min.y-H.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),tt(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=N(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=Fi(a._icon),g=a._map.layerPointToLatLng(f);c&&tt(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Wu=qn.extend({options:{icon:new Qa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){U(this,a),this._latlng=de(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=de(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),se(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),v=!1;g!==this._shadow&&(this._removeShadow(),v=!0),g&&(se(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&v&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&be(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&tt(this._icon,r),this._shadow&&tt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Kg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Kg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Jt(this._icon,r),this._shadow&&Jt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?J(a.iconSize):J(0,0),f=a.iconAnchor?J(a.iconAnchor):J(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function HS(r,a){return new Wu(r,a)}var Tr=qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return U(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qu=Tr.extend({options:{fill:!0,radius:10},initialize:function(r,a){U(this,a),this._latlng=de(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=de(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Tr.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new te(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function WS(r,a){return new qu(r,a)}var Md=qu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),U(this,a),this._latlng=de(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ge(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Tr.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Nt.distance){var g=Math.PI/180,v=this._mRadius/Nt.R/g,R=c.project([a+v,r]),B=c.project([a-v,r]),H=R.add(B).divideBy(2),K=c.unproject(H).lat,ne=Math.acos((Math.cos(v*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(ne)||ne===0)&&(ne=v/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(ne)?0:H.x-c.project([K,r-ne]).x,this._radiusY=H.y-R.y}else{var fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(fe).x}this._updateBounds()}});function qS(r,a,c){return new Md(r,a,c)}var ji=Tr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){U(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=_e,g,v,R=0,B=this._parts.length;R<B;R++)for(var H=this._parts[R],K=1,ne=H.length;K<ne;K++){g=H[K-1],v=H[K];var fe=f(r,g,v,!0);fe<a&&(a=fe,c=f(r,g,v))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=de(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ge,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Oe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=Oe(r),f=0,g=r.length;f<g;f++)c?(a[f]=de(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new q(r,r);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof we,g=r.length,v,R;if(f){for(R=[],v=0;v<g;v++)R[v]=this._map.latLngToLayerPoint(r[v]),c.extend(R[v]);a.push(R)}else for(v=0;v<g;v++)this._projectLatlngs(r[v],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,v,R,B,H;for(c=0,g=0,v=this._rings.length;c<v;c++)for(H=this._rings[c],f=0,R=H.length;f<R-1;f++)B=E(H[f],H[f+1],r,f,!0),B&&(a[g]=a[g]||[],a[g].push(B[0]),(B[1]!==H[f+1]||f===R-2)&&(a[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Lt(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,v,R,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,v=this._parts.length;c<v;c++)for(B=this._parts[c],f=0,R=B.length,g=R-1;f<R;g=f++)if(!(!a&&f===0)&&Ka(r,B[g],B[f])<=H)return!0;return!1}});function $S(r,a){return new ji(r,a)}ji._flat=Me;var Po=ji.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Za(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=ji.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){ji.prototype._setLatLngs.call(this,r),Oe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Oe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(r=new te(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,v;f<g;f++)v=Ga(this._rings[f],r,!0),v.length&&this._parts.push(v)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,v,R,B,H,K;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(v=0,H=this._parts.length;v<H;v++)for(c=this._parts[v],R=0,K=c.length,B=K-1;R<K;B=R++)f=c[R],g=c[B],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||ji.prototype._containsPoint.call(this,r,!0)}});function GS(r,a){return new Po(r,a)}var Hi=Bi.extend({initialize:function(r,a){U(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=D(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var v=this.options;if(v.filter&&!v.filter(r))return this;var R=$u(r,v);return R?(R.feature=Ku(r),R.defaultOptions=R.options,this.resetStyle(R),v.onEachFeature&&v.onEachFeature(r,R),this.addLayer(R)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function $u(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],v=a&&a.pointToLayer,R=a&&a.coordsToLatLng||Vd,B,H,K,ne;if(!f&&!c)return null;switch(c.type){case"Point":return B=R(f),Qg(v,r,B,a);case"MultiPoint":for(K=0,ne=f.length;K<ne;K++)B=R(f[K]),g.push(Qg(v,r,B,a));return new Bi(g);case"LineString":case"MultiLineString":return H=Gu(f,c.type==="LineString"?0:1,R),new ji(H,a);case"Polygon":case"MultiPolygon":return H=Gu(f,c.type==="Polygon"?1:2,R),new Po(H,a);case"GeometryCollection":for(K=0,ne=c.geometries.length;K<ne;K++){var fe=$u({geometry:c.geometries[K],type:"Feature",properties:r.properties},a);fe&&g.push(fe)}return new Bi(g);case"FeatureCollection":for(K=0,ne=c.features.length;K<ne;K++){var Ie=$u(c.features[K],a);Ie&&g.push(Ie)}return new Bi(g);default:throw new Error("Invalid GeoJSON object.")}}function Qg(r,a,c,f){return r?r(a,c):new Wu(c,f&&f.markersInheritOptions&&f)}function Vd(r){return new we(r[1],r[0],r[2])}function Gu(r,a,c){for(var f=[],g=0,v=r.length,R;g<v;g++)R=a?Gu(r[g],a-1,c):(c||Vd)(r[g]),f.push(R);return f}function Fd(r,a){return r=de(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function Zu(r,a,c,f){for(var g=[],v=0,R=r.length;v<R;v++)g.push(a?Zu(r[v],Oe(r[v])?0:a-1,c,f):Fd(r[v],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function Co(r,a){return r.feature?s({},r.feature,{geometry:a}):Ku(a)}function Ku(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var zd={toGeoJSON:function(r){return Co(this,{type:"Point",coordinates:Fd(this.getLatLng(),r)})}};Wu.include(zd),Md.include(zd),qu.include(zd),ji.include({toGeoJSON:function(r){var a=!Oe(this._latlngs),c=Zu(this._latlngs,a?1:0,!1,r);return Co(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Po.include({toGeoJSON:function(r){var a=!Oe(this._latlngs),c=a&&!Oe(this._latlngs[0]),f=Zu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),Co(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Io.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),Co(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var v=g.toGeoJSON(r);if(c)f.push(v.geometry);else{var R=Ku(v);R.type==="FeatureCollection"?f.push.apply(f,R.features):f.push(R)}}}),c?Co(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Yg(r,a){return new Hi(r,a)}var ZS=Yg,Qu=qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Se(a),U(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Sn(this._image),this},bringToBack:function(){return this._map&&Pn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Se(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:xe("img");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Vi(this._image,c,a)},_reset:function(){var r=this._image,a=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();tt(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),KS=function(r,a,c){return new Qu(r,a,c)},Jg=Qu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:xe("video");if(se(a,"leaflet-image-layer"),this._zoomAnimated&&se(a,"leaflet-zoom-animated"),this.options.className&&se(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var v=0;v<this._url.length;v++){var R=xe("source");R.src=this._url[v],a.appendChild(R)}}});function QS(r,a,c){return new Jg(r,a,c)}var Xg=Qu.extend({_initImage:function(){var r=this._image=this._url;se(r,"leaflet-image-layer"),this._zoomAnimated&&se(r,"leaflet-zoom-animated"),this.options.className&&se(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function YS(r,a,c){return new Xg(r,a,c)}var fi=qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof we||D(r))?(this._latlng=de(r),U(this,a)):(U(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Jt(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Jt(this._container,0),this._removeTimeout=setTimeout(l(be,void 0,this._container),200)):be(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=de(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Sn(this._container),this},bringToBack:function(){return this._map&&Pn(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof Bi){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=J(this.options.offset),c=this._getAnchor();this._zoomAnimated?tt(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),qn.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(U(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Yu=fi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,fi.prototype.openOn.call(this,r)},onAdd:function(r){fi.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Tr||this._source.on("preclick",De))},onRemove:function(r){fi.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Tr||this._source.off("preclick",De))},getEvents:function(){var r=fi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=xe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=xe("div",r+"-content-wrapper",a);if(this._contentNode=xe("div",r+"-content",c),ys(a),za(this._contentNode),ge(a,"contextmenu",De),this._tipContainer=xe("div",r+"-tip-container",a),this._tip=xe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=xe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ge(f,"click",function(g){ut(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,v="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",se(r,v)):Ue(r,v),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();tt(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(_r(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(Fi(this._container));var v=r.layerPointToContainerPoint(g),R=J(this.options.autoPanPadding),B=J(this.options.autoPanPaddingTopLeft||R),H=J(this.options.autoPanPaddingBottomRight||R),K=r.getSize(),ne=0,fe=0;v.x+f+H.x>K.x&&(ne=v.x+f-K.x+H.x),v.x-ne-B.x<0&&(ne=v.x-B.x),v.y+c+H.y>K.y&&(fe=v.y+c-K.y+H.y),v.y-fe-B.y<0&&(fe=v.y-B.y),(ne||fe)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ne,fe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),JS=function(r,a){return new Yu(r,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,a,c){return this._initOverlay(Yu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),qn.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Yu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Bi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){li(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Tr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Ju=fi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){fi.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){fi.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=fi.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,v=f.latLngToContainerPoint(f.getCenter()),R=f.layerPointToContainerPoint(r),B=this.options.direction,H=g.offsetWidth,K=g.offsetHeight,ne=J(this.options.offset),fe=this._getAnchor();B==="top"?(a=H/2,c=K):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=K/2):B==="right"?(a=0,c=K/2):B==="left"?(a=H,c=K/2):R.x<v.x?(B="right",a=0,c=K/2):(B="left",a=H+(ne.x+fe.x)*2,c=K/2),r=r.subtract(J(a,c,!0)).add(ne).add(fe),Ue(g,"leaflet-tooltip-right"),Ue(g,"leaflet-tooltip-left"),Ue(g,"leaflet-tooltip-top"),Ue(g,"leaflet-tooltip-bottom"),se(g,"leaflet-tooltip-"+B),tt(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Jt(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),XS=function(r,a){return new Ju(r,a)};Ee.include({openTooltip:function(r,a,c){return this._initOverlay(Ju,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),qn.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ju,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Bi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ge(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ge(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var e_=So.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Bt(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=J(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function eP(r){return new e_(r)}So.Default=Qa;var Ya=qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){U(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),be(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Sn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,v;f<g;f++)v=a[f].style.zIndex,a[f]!==this._container&&v&&(c=r(c,+v));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Jt(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var v=Math.min(1,(r-g.loaded)/200);Jt(g.el,v),v<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(P(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(be(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)be(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),v=Math.floor(a/2),R=c-1,B=new q(+g,+v);B.z=+R;var H=this._tileCoordsToKey(B),K=this._tiles[H];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),R>f?this._retainParent(g,v,R,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var v=2*a;v<2*a+2;v++){var R=new q(g,v);R.z=c+1;var B=this._tileCoordsToKey(R),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<f&&this._retainChildren(g,v,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var v=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||v)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ae.any3d?Vi(r.el,g,f):tt(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),v=a.getSize().divideBy(f*2);return new te(g.subtract(v),g.add(v))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),v=g.getCenter(),R=[],B=this.options.keepBuffer,H=new te(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ne=this._tiles[K].coords;(ne.z!==this._tileZoom||!H.contains(new q(ne.x,ne.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var fe=g.min.y;fe<=g.max.y;fe++)for(var Ie=g.min.x;Ie<=g.max.x;Ie++){var Ht=new q(Ie,fe);if(Ht.z=this._tileZoom,!!this._isValidTile(Ht)){var Tt=this._tiles[this._tileCoordsToKey(Ht)];Tt?Tt.current=!0:R.push(Ht)}}if(R.sort(function(en,ko){return en.distanceTo(v)-ko.distanceTo(v)}),R.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Rn=document.createDocumentFragment();for(Ie=0;Ie<R.length;Ie++)this._addTile(R[Ie],Rn);this._level.el.appendChild(Rn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Se(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),v=a.unproject(f,r.z),R=a.unproject(g,r.z);return[v,R]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ge(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(be(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){se(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,ae.ielt9&&this.options.opacity<1&&Jt(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&N(l(this._tileReady,this,r,null,g)),tt(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Jt(c.el,0),P(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(se(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new q(this._wrapX?y(r.x,this._wrapX):r.x,this._wrapY?y(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new te(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function tP(r){return new Ya(r)}var Ao=Ya.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=U(this,a),a.detectRetina&&ae.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ge(c,"load",l(this._tileOnLoad,this,a,c)),ge(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:ae.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return C(this._url,s(a,this.options))},_tileOnLoad:function(r,a){ae.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=Q;var c=this._tiles[r].coords;be(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Q),Ya.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Q))return Ya.prototype._tileReady.call(this,r,a,c)}});function t_(r,a){return new Ao(r,a)}var n_=Ao.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=U(this,a);var g=a.detectRetina&&ae.retina?2:1,v=this.getTileSize();c.width=v.x*g,c.height=v.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Ao.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=he(c.project(a[0]),c.project(a[1])),g=f.min,v=f.max,R=(this._wmsVersion>=1.3&&this._crs===Eo?[g.y,g.x,v.y,v.x]:[g.x,g.y,v.x,v.y]).join(","),B=Ao.prototype.getTileUrl.call(this,r);return B+Z(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+R},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function nP(r,a){return new n_(r,a)}Ao.WMS=n_,t_.wms=nP;var Wi=qn.extend({options:{padding:.1},initialize:function(r){U(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),v=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));ae.any3d?Vi(this._container,v,c):tt(this._container,v)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new te(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),i_=Wi.extend({options:{tolerance:0},getEvents:function(){var r=Wi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ge(r,"mousemove",this._onMouseMove,this),ge(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,be(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=ae.retina?2:1;tt(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,v,R=r._parts,B=R.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(f=0,g=R[c].length;f<g;f++)v=R[c][f],H[f?"lineTo":"moveTo"](v.x,v.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(se(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function r_(r){return ae.canvas?new i_(r):null}var Ja=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),iP={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ja("shape");se(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ja("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;be(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Ja("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=D(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Ja("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Sn(r._container)},_bringToBack:function(r){Pn(r._container)}},Xu=ae.vml?Ja:no,Xa=Wi.extend({_initContainer:function(){this._container=Xu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){be(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),tt(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Xu("path");r.options.className&&se(a,r.options.className),r.options.interactive&&se(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){be(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,dr(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",v=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,v)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Sn(r._path)},_bringToBack:function(r){Pn(r._path)}});ae.vml&&Xa.include(iP);function s_(r){return ae.svg||ae.vml?new Xa(r):null}Ee.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&r_(r)||s_(r)}});var o_=Po.extend({initialize:function(r,a){Po.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Se(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function rP(r,a){return new o_(r,a)}Xa.create=Xu,Xa.pointsToPath=dr,Hi.geometryToLayer=$u,Hi.coordsToLatLng=Vd,Hi.coordsToLatLngs=Gu,Hi.latLngToCoords=Fd,Hi.latLngsToCoords=Zu,Hi.getFeature=Co,Hi.asFeature=Ku,Ee.mergeOptions({boxZoom:!0});var a_=fn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),jn(),ho(),this._startPoint=this._map.mouseEventToContainerPoint(r),ge(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new te(this._point,this._startPoint),c=a.getSize();tt(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(be(this._box),Ue(this._container,"leaflet-crosshair")),dn(),fo(),Fe(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",a_),Ee.mergeOptions({doubleClickZoom:!0});var l_=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",l_),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var u_=fn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Hn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Se(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,v=(f+a+c)%r-a-c,R=Math.abs(g+c)<Math.abs(v+c)?g:v;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=R},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),v=(this._lastTime-this._times[0])/1e3,R=c.easeLinearity,B=g.multiplyBy(R/v),H=B.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,H),ne=B.multiplyBy(K/H),fe=K/(c.inertiaDeceleration*R),Ie=ne.multiplyBy(-fe/2).round();!Ie.x&&!Ie.y?a.fire("moveend"):(Ie=a._limitOffset(Ie,a.options.maxBounds),N(function(){a.panBy(Ie,{duration:fe,easeLinearity:R,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",u_),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var c_=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ge(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=J(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(J(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;li(r)}}});Ee.addInitHook("addHandler","keyboard",c_),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var h_=fn.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Ba(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),li(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,v=c?Math.ceil(g/c)*c:g,R=r._limitZoom(a+(this._delta>0?v:-v))-a;this._delta=0,this._startTime=null,R&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+R):r.setZoomAround(this._lastMousePos,a+R))}});Ee.addInitHook("addHandler","scrollWheelZoom",h_);var sP=600;Ee.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var d_=fn.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",ut),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),sP),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Fe(document,"touchend",ut),Fe(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",d_),Ee.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var f_=fn.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),ut(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var v=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&v.x===0&&v.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(v),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var R=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(R,this,!0),ut(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",f_),Ee.BoxZoom=a_,Ee.DoubleClickZoom=l_,Ee.Drag=u_,Ee.Keyboard=c_,Ee.ScrollWheelZoom=h_,Ee.TapHold=d_,Ee.TouchZoom=f_,n.Bounds=te,n.Browser=ae,n.CRS=He,n.Canvas=i_,n.Circle=Md,n.CircleMarker=qu,n.Class=Re,n.Control=Xt,n.DivIcon=e_,n.DivOverlay=fi,n.DomEvent=ws,n.DomUtil=Dd,n.Draggable=Hn,n.Evented=hn,n.FeatureGroup=Bi,n.GeoJSON=Hi,n.GridLayer=Ya,n.Handler=fn,n.Icon=So,n.ImageOverlay=Qu,n.LatLng=we,n.LatLngBounds=Ge,n.Layer=qn,n.LayerGroup=Io,n.LineUtil=An,n.Map=Ee,n.Marker=Wu,n.Mixin=ju,n.Path=Tr,n.Point=q,n.PolyUtil=wo,n.Polygon=Po,n.Polyline=ji,n.Popup=Yu,n.PosAnimation=Ha,n.Projection=di,n.Rectangle=o_,n.Renderer=Wi,n.SVG=Xa,n.SVGOverlay=Xg,n.TileLayer=Ao,n.Tooltip=Ju,n.Transformation=Ri,n.Util=k,n.VideoOverlay=Jg,n.bind=l,n.bounds=he,n.canvas=r_,n.circle=qS,n.circleMarker=WS,n.control=ci,n.divIcon=eP,n.extend=s,n.featureGroup=BS,n.geoJSON=Yg,n.geoJson=ZS,n.gridLayer=tP,n.icon=jS,n.imageOverlay=KS,n.latLng=de,n.latLngBounds=Se,n.layerGroup=US,n.map=go,n.marker=HS,n.point=J,n.polygon=GS,n.polyline=$S,n.popup=JS,n.rectangle=rP,n.setOptions=U,n.stamp=d,n.svg=s_,n.svgOverlay=YS,n.tileLayer=t_,n.tooltip=XS,n.transformation=Un,n.version=i,n.videoOverlay=QS;var oP=window.L;n.noConflict=function(){return window.L=oP,this},window.L=n})})(Sp,Sp.exports);var fu=Sp.exports;const ZA=Tw(fu);function Km(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Qm(t,e){return e==null?function(i,s){const o=le.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=le.useRef();o.current||(o.current=t(i,s));const l=le.useRef(i),{instance:h}=o.current;return le.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function KA(t,e){le.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function zE(t){return function(n){const i=Gm(),s=t(Zm(n,i),i);return DE(i.map,n.attribution),FE(s.current,n.eventHandlers),KA(s.current,i),s}}function QA(t,e){const n=Qm(t,e),i=zE(n);return WA(i)}function YA(t,e){const n=Qm(t),i=GA(n,e);return qA(i)}function JA(t,e){const n=Qm(t,e),i=zE(n);return $A(i)}function XA(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function UE(){return Gm().map}function e1(t){const e=UE();return le.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Pp(){return Pp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pp.apply(this,arguments)}function t1({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:p,...y},w){const[T]=le.useState({className:s,id:o,style:h}),[M,V]=le.useState(null);le.useImperativeHandle(w,()=>(M==null?void 0:M.map)??null,[M]);const U=le.useCallback(x=>{if(x!==null&&M===null){const C=new fu.Map(x,y);n!=null&&p!=null?C.setView(n,p):t!=null&&C.fitBounds(t,e),d!=null&&C.whenReady(d),V(jA(C))}},[]);le.useEffect(()=>()=>{M==null||M.map.remove()},[M]);const Z=M?Zc.createElement(VE,{value:M},i):l??null;return Zc.createElement("div",Pp({},T,{ref:U}),Z)}const n1=le.forwardRef(t1),i1=QA(function({position:e,...n},i){const s=new fu.Marker(e,n);return Km(s,HA(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),r1=YA(function(e,n){const i=new fu.Popup(e,n.overlayContainer);return Km(i,n)},function(e,n,{position:i},s){le.useEffect(function(){const{instance:l}=e;function h(p){p.popup===l&&(l.update(),s(!0))}function d(p){p.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var y;n.map.off({popupopen:h,popupclose:d}),(y=n.overlayContainer)==null||y.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),Cy=JA(function({url:e,...n},i){const s=new fu.TileLayer(e,Zm(n,i));return Km(s,i)},function(e,n,i){XA(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),s1=()=>{};var Ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},o1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},jE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,p=d?t[s+2]:0,y=o>>2,w=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,M=p&63;d||(M=64,l||(T=64)),i.push(n[y],n[w],n[T],n[M])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const p=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||p==null||w==null)throw new a1;const T=o<<2|h>>4;if(i.push(T),p!==64){const M=h<<4&240|p>>2;if(i.push(M),w!==64){const V=p<<6&192|w;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l1=function(t){const e=BE(t);return jE.encodeByteArray(e,!0)},vh=function(t){return l1(t).replace(/\./g,"")},HE=function(t){try{return jE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=()=>u1().__FIREBASE_DEFAULTS__,h1=()=>{if(typeof process>"u"||typeof Ay>"u")return;const t=Ay.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HE(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return s1()||c1()||h1()||d1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WE=t=>{var e,n;return(n=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},qE=t=>{const e=WE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$E=()=>{var t;return(t=rd())==null?void 0:t.config},GE=t=>{var e;return(e=rd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ym(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vh(JSON.stringify(n)),vh(JSON.stringify(l)),""].join(".")}const Rl={};function p1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rl))Rl[e]?t.emulator.push(e):t.prod.push(e);return t}function m1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ky=!1;function Jm(t,e){if(typeof window>"u"||typeof document>"u"||!Ks(window.location.host)||Rl[t]===e||Rl[t]||ky)return;Rl[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=p1().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ky=!0,l()},T}function y(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=m1(i),M=n("text"),V=document.getElementById(M)||document.createElement("span"),U=n("learnmore"),Z=document.getElementById(U)||document.createElement("a"),x=n("preprendIcon"),C=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const D=T.element;h(D),y(Z,U);const W=p();d(C,x),D.append(C,V,Z,W),document.body.appendChild(D)}o?(V.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function _1(){var e;const t=(e=rd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w1(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T1(){return!_1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QE(){try{return typeof indexedDB=="object"}catch{return!1}}function YE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function E1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="FirebaseError";class zn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=I1,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?S1(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new zn(s,h,i)}}function S1(t,e){return t.replace(P1,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const P1=/\{\$([^}]+)}/g;function C1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Ry(o)&&Ry(l)){if(!rr(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ry(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function A1(t,e){const n=new k1(t,e);return n.subscribe.bind(n)}class k1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");R1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=pf),s.error===void 0&&(s.error=pf),s.complete===void 0&&(s.complete=pf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=1e3,N1=2,L1=4*60*60*1e3,b1=.5;function xy(t,e=x1,n=N1){const i=e*Math.pow(n,t),s=Math.round(b1*i*(Math.random()-.5)*2);return Math.min(L1,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class Vn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new f1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M1(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:D1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D1(t){return t===Is?void 0:t}function M1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const F1={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},z1=Ce.INFO,U1={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},B1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=U1[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sd{constructor(e){this.name=e,this._logLevel=z1,this._logHandler=B1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const j1=(t,e)=>e.some(n=>t instanceof n);let Ny,Ly;function H1(){return Ny||(Ny=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W1(){return Ly||(Ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JE=new WeakMap,Cp=new WeakMap,XE=new WeakMap,mf=new WeakMap,Xm=new WeakMap;function q1(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(jr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&JE.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function $1(t){if(Cp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Cp.set(t,e)}let Ap={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G1(t){Ap=t(Ap)}function Z1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(gf(this),e,...n);return XE.set(i,e.sort?e.sort():[e]),jr(i)}:W1().includes(t)?function(...e){return t.apply(gf(this),e),jr(JE.get(this))}:function(...e){return jr(t.apply(gf(this),e))}}function K1(t){return typeof t=="function"?Z1(t):(t instanceof IDBTransaction&&$1(t),j1(t,H1())?new Proxy(t,Ap):t)}function jr(t){if(t instanceof IDBRequest)return q1(t);if(mf.has(t))return mf.get(t);const e=K1(t);return e!==t&&(mf.set(t,e),Xm.set(e,t)),e}const gf=t=>Xm.get(t);function eI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=jr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(jr(l.result),d.oldVersion,d.newVersion,jr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Q1=["get","getKey","getAll","getAllKeys","count"],Y1=["put","add","delete","clear"],_f=new Map;function by(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=Y1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Q1.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),s&&d.done]))[0]};return _f.set(e,o),o}G1(t=>({...t,get:(e,n,i)=>by(e,n)||t.get(e,n,i),has:(e,n)=>!!by(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function X1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",Oy="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new sd("@firebase/app"),ek="@firebase/app-compat",tk="@firebase/analytics-compat",nk="@firebase/analytics",ik="@firebase/app-check-compat",rk="@firebase/app-check",sk="@firebase/auth",ok="@firebase/auth-compat",ak="@firebase/database",lk="@firebase/data-connect",uk="@firebase/database-compat",ck="@firebase/functions",hk="@firebase/functions-compat",dk="@firebase/installations",fk="@firebase/installations-compat",pk="@firebase/messaging",mk="@firebase/messaging-compat",gk="@firebase/performance",_k="@firebase/performance-compat",yk="@firebase/remote-config",vk="@firebase/remote-config-compat",wk="@firebase/storage",Tk="@firebase/storage-compat",Ek="@firebase/firestore",Ik="@firebase/ai",Sk="@firebase/firestore-compat",Pk="firebase",Ck="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",Ak={[kp]:"fire-core",[ek]:"fire-core-compat",[nk]:"fire-analytics",[tk]:"fire-analytics-compat",[rk]:"fire-app-check",[ik]:"fire-app-check-compat",[sk]:"fire-auth",[ok]:"fire-auth-compat",[ak]:"fire-rtdb",[lk]:"fire-data-connect",[uk]:"fire-rtdb-compat",[ck]:"fire-fn",[hk]:"fire-fn-compat",[dk]:"fire-iid",[fk]:"fire-iid-compat",[pk]:"fire-fcm",[mk]:"fire-fcm-compat",[gk]:"fire-perf",[_k]:"fire-perf-compat",[yk]:"fire-rc",[vk]:"fire-rc-compat",[wk]:"fire-gcs",[Tk]:"fire-gcs-compat",[Ek]:"fire-fst",[Sk]:"fire-fst-compat",[Ik]:"fire-vertex","fire-js":"fire-js",[Pk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,kk=new Map,xp=new Map;function Dy(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(xp.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(const n of wh.values())Dy(n,t);for(const n of kk.values())Dy(n,t);return!0}function is(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new Qs("app","Firebase",Rk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=Ck;function tI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Rp,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Hr.create("bad-app-name",{appName:String(s)});if(n||(n=$E()),!n)throw Hr.create("no-options");const o=wh.get(s);if(o){if(rr(n,o.options)&&rr(i,o.config))return o;throw Hr.create("duplicate-app",{appName:s})}const l=new V1(s);for(const d of xp.values())l.addComponent(d);const h=new xk(n,i,l);return wh.set(s,h),h}function od(t=Rp){const e=wh.get(t);if(!e&&t===Rp&&$E())return tI();if(!e)throw Hr.create("no-app",{appName:t});return e}function cn(t,e,n){let i=Ak[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}ii(new Vn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="firebase-heartbeat-database",Lk=1,Jl="firebase-heartbeat-store";let yf=null;function nI(){return yf||(yf=eI(Nk,Lk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),yf}async function bk(t){try{const n=(await nI()).transaction(Jl),i=await n.objectStore(Jl).get(iI(t));return await n.done,i}catch(e){if(e instanceof zn)sr.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function My(t,e){try{const i=(await nI()).transaction(Jl,"readwrite");await i.objectStore(Jl).put(e,iI(t)),await i.done}catch(n){if(n instanceof zn)sr.warn(n.message);else{const i=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(i.message)}}}function iI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=1024,Dk=30;class Mk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Vy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Dk){const l=zk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){sr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vy(),{heartbeatsToSend:i,unsentEntries:s}=Vk(this._heartbeatsCache.heartbeats),o=vh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return sr.warn(n),""}}}function Vy(){return new Date().toISOString().substring(0,10)}function Vk(t,e=Ok){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Fy(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Fk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QE()?YE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fy(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function zk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){ii(new Vn("platform-logger",e=>new J1(e),"PRIVATE")),ii(new Vn("heartbeat",e=>new Mk(e),"PRIVATE")),cn(kp,Oy,t),cn(kp,Oy,"esm2020"),cn("fire-js","")}Uk("");function rI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bk=rI,sI=new Qs("auth","Firebase",rI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new sd("@firebase/auth");function jk(t,...e){Th.logLevel<=Ce.WARN&&Th.warn(`Auth (${Ys}): ${t}`,...e)}function Vc(t,...e){Th.logLevel<=Ce.ERROR&&Th.error(`Auth (${Ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw tg(t,...e)}function ei(t,...e){return tg(t,...e)}function eg(t,e,n){const i={...Bk(),[e]:n};return new Qs("auth","Firebase",i).create(e,{appName:t.name})}function Xi(t){return eg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hk(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fn(t,"argument-error"),eg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return sI.create(t,...e)}function pe(t,e,...n){if(!t)throw tg(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vc(e),new Error(e)}function or(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Wk(){return zy()==="http:"||zy()==="https:"}function zy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wk()||KE()||"connection"in navigator)?navigator.onLine:!0}function $k(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=g1()||v1()}get(){return qk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Kk=new mu(3e4,6e4);function cr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hr(t,e,n,i,s={}){return aI(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=pu({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:d,...o};return y1()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Ks(t.emulatorConfig.host)&&(p.credentials="include"),oI.fetch()(await lI(t,t.config.apiHost,n,h),p)})}async function aI(t,e,n){t._canInitEmulator=!1;const i={...Gk,...e};try{const s=new Yk(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw yc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw yc(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw eg(t,y,p);Fn(t,y)}}catch(s){if(s instanceof zn)throw s;Fn(t,"network-request-failed",{message:String(s)})}}async function gu(t,e,n,i,s={}){const o=await hr(t,e,n,i,s);return"mfaPendingCredential"in o&&Fn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function lI(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?ng(t.config,s):`${t.config.apiScheme}://${s}`;return Zk.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Qk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ei(this.auth,"network-request-failed")),Kk.get())})}}function yc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ei(t,e,i);return s.customData._tokenResponse=n,s}function Uy(t){return t!==void 0&&t.enterprise!==void 0}class Jk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Qk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xk(t,e){return hr(t,"GET","/v2/recaptchaConfig",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e){return hr(t,"POST","/v1/accounts:delete",e)}async function Eh(t,e){return hr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tR(t,e=!1){const n=Ke(t),i=await n.getIdToken(e),s=ig(i);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:xl(vf(s.auth_time)),issuedAtTime:xl(vf(s.iat)),expirationTime:xl(vf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function vf(t){return Number(t)*1e3}function ig(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const s=HE(n);return s?JSON.parse(s):(Vc("Failed to decode base64 JWT payload"),null)}catch(s){return Vc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function By(t){const e=ig(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zn&&nR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function nR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(t){var w;const e=t.auth,n=await t.getIdToken(),i=await Xl(t,Eh(e,{idToken:n}));pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?uI(s.providerUserInfo):[],l=sR(t.providerData,o),h=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Lp(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function rR(t){const e=Ke(t);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sR(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function uI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){const n=await aI(t,{},async()=>{const i=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await lI(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&Ks(t.emulatorConfig.host)&&(d.credentials="include"),oI.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aR(t,e){return hr(t,"POST","/v2/accounts:revokeToken",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):By(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=By(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await oR(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Xo;return i&&(pe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(pe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new iR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xl(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tR(this,e)}reload(){return rR(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ih(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(Xi(this.auth));const e=await this.getIdToken();return await Xl(this,eR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:M,providerData:V,stsTokenManager:U}=n;pe(w&&U,e,"internal-error");const Z=Xo.fromJSON(this.name,U);pe(typeof w=="string",e,"internal-error"),Ir(i,e.name),Ir(s,e.name),pe(typeof T=="boolean",e,"internal-error"),pe(typeof M=="boolean",e,"internal-error"),Ir(o,e.name),Ir(l,e.name),Ir(h,e.name),Ir(d,e.name),Ir(p,e.name),Ir(y,e.name);const x=new Qn({uid:w,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:M,photoURL:l,phoneNumber:o,tenantId:h,stsTokenManager:Z,createdAt:p,lastLoginAt:y});return V&&Array.isArray(V)&&(x.providerData=V.map(C=>({...C}))),d&&(x._redirectEventId=d),x}static async _fromIdTokenResponse(e,n,i=!1){const s=new Xo;s.updateFromServerResponse(n);const o=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Ih(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?uI(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Xo;h.updateFromIdToken(i);const d=new Qn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Lp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;function Yi(t){or(t instanceof Function,"Expected a class definition");let e=jy.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cI.type="NONE";const Hy=cI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Fc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Fc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Eh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ea(Yi(Hy),e,i);const s=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Yi(Hy);const l=Fc(i,e.config.apiKey,e.name);let h=null;for(const p of n)try{const y=await p._get(l);if(y){let w;if(typeof y=="string"){const T=await Eh(e,{idToken:y}).catch(()=>{});if(!T)break;w=await Qn._fromGetAccountInfoResponse(e,T,y)}else w=Qn._fromJSON(e,y);p!==o&&(h=w),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ea(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new ea(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gI(e))return"Blackberry";if(_I(e))return"Webos";if(dI(e))return"Safari";if((e.includes("chrome/")||fI(e))&&!e.includes("edge/"))return"Chrome";if(mI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hI(t=Ut()){return/firefox\//i.test(t)}function dI(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fI(t=Ut()){return/crios\//i.test(t)}function pI(t=Ut()){return/iemobile/i.test(t)}function mI(t=Ut()){return/android/i.test(t)}function gI(t=Ut()){return/blackberry/i.test(t)}function _I(t=Ut()){return/webos/i.test(t)}function rg(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lR(t=Ut()){var e;return rg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function uR(){return w1()&&document.documentMode===10}function yI(t=Ut()){return rg(t)||mI(t)||_I(t)||gI(t)||/windows phone/i.test(t)||pI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e=[]){let n;switch(t){case"Browser":n=Wy(Ut());break;case"Worker":n=`${Wy(Ut())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e={}){return hr(t,"GET","/v2/passwordPolicy",cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=6;class fR{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qy(this),this.idTokenSubscription=new qy(this),this.beforeStateQueue=new cR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Eh(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(rn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$k()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(Xi(this));const n=e?Ke(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hR(this),n=new fR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await aR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yi(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[Yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&jk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rs(t){return Ke(t)}class qy{constructor(e){this.auth=e,this.observer=null,this.addObserver=A1(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mR(t){ad=t}function wI(t){return ad.loadJS(t)}function gR(){return ad.recaptchaEnterpriseScript}function _R(){return ad.gapiScript}function yR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class vR{constructor(){this.enterprise=new wR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TR="recaptcha-enterprise",TI="NO_RECAPTCHA";class ER{constructor(e){this.type=TR,this.auth=rs(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{Xk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new Jk(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;Uy(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(TI)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vR().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&Uy(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=gR();d.length!==0&&(d+=h),wI(d).then(()=>{s(h,o,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function $y(t,e,n,i=!1,s=!1){const o=new ER(t);let l;if(s)l=TI;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function bp(t,e,n,i,s){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await $y(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await $y(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){const n=is(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(rr(o,e??{}))return s;Fn(s,"already-initialized")}return n.initialize({options:e})}function SR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function PR(t,e,n){const i=rs(t);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=EI(e),{host:l,port:h}=CR(e),d=h===null?"":`:${h}`,p={url:`${o}//${l}${d}/`},y=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(rr(p,i.config.emulator)&&rr(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Ks(l)?(Ym(`${o}//${l}${d}`),Jm("Auth",!0)):AR()}function EI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CR(t){const e=EI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Gy(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Gy(l)}}}function Gy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function kR(t,e){return hr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){return gu(t,"POST","/v1/accounts:signInWithPassword",cr(t,e))}async function xR(t,e){return hr(t,"POST","/v1/accounts:sendOobCode",cr(t,e))}async function NR(t,e){return xR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}async function bR(t,e){return gu(t,"POST","/v1/accounts:signInWithEmailLink",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends sg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new eu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new eu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,n,"signInWithPassword",RR);case"emailLink":return LR(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,i,"signUpPassword",kR);case"emailLink":return bR(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e){return gu(t,"POST","/v1/accounts:signInWithIdp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="http://localhost";class Us extends sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=n;if(!i||!s)return null;const l=new Us(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return ta(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ta(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ta(e,n)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MR(t){const e=pl(ml(t)).link,n=e?pl(ml(e)).deep_link_id:null,i=pl(ml(t)).deep_link_id;return(i?pl(ml(i)).link:null)||i||n||e||t}class og{constructor(e){const n=pl(ml(e)),i=n.apiKey??null,s=n.oobCode??null,o=DR(n.mode??null);pe(i&&s&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=MR(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,n){return eu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=og.parseLink(n);return pe(i,"argument-error"),eu._fromEmailAndCode(e,i.code,i.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends _u{constructor(){super("facebook.com")}static credential(e){return Us._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Us._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Gi.credential(n,i)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends _u{constructor(){super("github.com")}static credential(e){return Us._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends _u{constructor(){super("twitter.com")}static credential(e,n){return Us._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return xr.credential(n,i)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){return gu(t,"POST","/v1/accounts:signUp",cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Qn._fromIdTokenResponse(e,i,s),l=Zy(i);return new Bs({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Zy(i);return new Bs({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Zy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends zn{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Sh(e,n,i,s)}}function II(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(t,o,e,i):o})}async function FR(t,e,n=!1){const i=await Xl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e,n=!1){const{auth:i}=t;if(rn(i.app))return Promise.reject(Xi(i));const s="reauthenticate";try{const o=await Xl(t,II(i,s,e,t),n);pe(o.idToken,i,"internal-error");const l=ig(o.idToken);pe(l,i,"internal-error");const{sub:h}=l;return pe(t.uid===h,i,"user-mismatch"),Bs._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(t,e,n=!1){if(rn(t.app))return Promise.reject(Xi(t));const i="signIn",s=await II(t,i,e),o=await Bs._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function UR(t,e){return SI(rs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t){const e=rs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BR(t,e,n){if(rn(t.app))return Promise.reject(Xi(t));const i=rs(t),l=await bp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&PI(t),d}),h=await Bs._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function jR(t,e,n){return rn(t.app)?Promise.reject(Xi(t)):UR(Ke(t),Ia.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PI(t),i})}async function HR(t,e){const n=Ke(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await NR(n.auth,s);o!==t.email&&await t.reload()}function WR(t,e,n,i){return Ke(t).onIdTokenChanged(e,n,i)}function qR(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function $R(t,e,n,i){return Ke(t).onAuthStateChanged(e,n,i)}function Ky(t){return Ke(t).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=1e3,ZR=10;class AI extends CI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);uR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZR):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AI.type="LOCAL";const KR=AI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends CI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kI.type="SESSION";const RI=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ld(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async p=>p(n.origin,o)),d=await QR(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=lg("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function JR(t){wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function XR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ex(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tx(){return xI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="firebaseLocalStorageDb",nx=1,Ch="firebaseLocalStorage",LI="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ud(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function ix(){const t=indexedDB.deleteDatabase(NI);return new yu(t).toPromise()}function Op(){const t=indexedDB.open(NI,nx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Ch,{keyPath:LI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Ch)?e(i):(i.close(),await ix(),e(await Op()))})})}async function Qy(t,e,n){const i=ud(t,!0).put({[LI]:e,value:n});return new yu(i).toPromise()}async function rx(t,e){const n=ud(t,!1).get(e),i=await new yu(n).toPromise();return i===void 0?null:i.value}function Yy(t,e){const n=ud(t,!0).delete(e);return new yu(n).toPromise()}const sx=800,ox=3;class bI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Op(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ox)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(tx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await XR(),!this.activeServiceWorker)return;this.sender=new YR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ex()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Op();return await Qy(e,Ph,"1"),await Yy(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qy(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>rx(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=ud(s,!1).getAll();return new yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bI.type="LOCAL";const ax=bI;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e){return e?Yi(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lx(t){return SI(t.auth,new ug(t),t.bypassAuthState)}function ux(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),zR(n,new ug(t),t.bypassAuthState)}async function cx(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),FR(n,new ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lx;case"linkViaPopup":case"linkViaRedirect":return cx;case"reauthViaPopup":case"reauthViaRedirect":return ux;default:Fn(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new mu(2e3,1e4);async function dx(t,e,n){if(rn(t.app))return Promise.reject(ei(t,"operation-not-supported-in-this-environment"));const i=rs(t);Hk(t,e,ag);const s=OI(i,n);return new As(i,"signInViaPopup",e,s).executeNotNull()}class As extends DI{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hx.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="pendingRedirect",zc=new Map;class px extends DI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const i=await mx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mx(t,e){const n=yx(e),i=_x(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function gx(t,e){zc.set(t._key(),e)}function _x(t){return Yi(t._redirectPersistence)}function yx(t){return Fc(fx,t.config.apiKey,t.name)}async function vx(t,e,n=!1){if(rn(t.app))return Promise.reject(Xi(t));const i=rs(t),s=OI(i,e),l=await new px(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=10*60*1e3;class Tx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ex(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!MI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jy(e))}saveEventToCache(e){this.cachedEventUids.add(Jy(e)),this.lastProcessedEventTime=Date.now()}}function Jy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ex(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e={}){return hr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Px=/^https?/;async function Cx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ix(t);for(const n of e)try{if(Ax(n))return}catch{}Fn(t,"unauthorized-domain")}function Ax(t){const e=Np(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Px.test(n))return!1;if(Sx.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new mu(3e4,6e4);function Xy(){const t=wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Rx(t){return new Promise((e,n)=>{var s,o,l;function i(){Xy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xy(),n(ei(t,"network-request-failed"))},timeout:kx.get()})}if((o=(s=wi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=wi().gapi)!=null&&l.load)i();else{const h=yR("iframefcb");return wi()[h]=()=>{gapi.load?i():n(ei(t,"network-request-failed"))},wI(`${_R()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function xx(t){return Uc=Uc||Rx(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new mu(5e3,15e3),Lx="__/auth/iframe",bx="emulator/auth/iframe",Ox={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mx(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ng(e,bx):`https://${t.config.authDomain}/${Lx}`,i={apiKey:e.apiKey,appName:t.name,v:Ys},s=Dx.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${pu(i).slice(1)}`}async function Vx(t){const e=await xx(t),n=wi().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:Mx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ox,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=ei(t,"network-request-failed"),h=wi().setTimeout(()=>{o(l)},Nx.get());function d(){wi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zx=500,Ux=600,Bx="_blank",jx="http://localhost";class ev{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hx(t,e,n,i=zx,s=Ux){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...Fx,width:i.toString(),height:s.toString(),top:o,left:l},p=Ut().toLowerCase();n&&(h=fI(p)?Bx:n),hI(p)&&(e=e||jx,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[M,V])=>`${T}${M}=${V},`,"");if(lR(p)&&h!=="_self")return Wx(e||"",h),new ev(null);const w=window.open(e||"",h,y);pe(w,t,"popup-blocked");try{w.focus()}catch{}return new ev(w)}function Wx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="__/auth/handler",$x="emulator/auth/handler",Gx=encodeURIComponent("fac");async function tv(t,e,n,i,s,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ys,eventId:s};if(e instanceof ag){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",C1(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof _u){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await t._getAppCheckToken(),p=d?`#${Gx}=${encodeURIComponent(d)}`:"";return`${Zx(t)}?${pu(h).slice(1)}${p}`}function Zx({config:t}){return t.emulator?ng(t,$x):`https://${t.authDomain}/${qx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class Kx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RI,this._completeRedirectFn=vx,this._overrideRedirectResult=gx}async _openPopup(e,n,i,s){var l;or((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await tv(e,n,i,Np(),s);return Hx(e,o,lg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await tv(e,n,i,Np(),s);return JR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(or(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Vx(e),i=new Tx(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wf,{type:wf},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[wf];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Cx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yI()||dI()||rg()}}const Qx=Kx;var nv="@firebase/auth",iv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xx(t){ii(new Vn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;pe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(t)},p=new pR(i,s,o,d);return SR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ii(new Vn("auth-internal",e=>{const n=rs(e.getProvider("auth").getImmediate());return(i=>new Yx(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(nv,iv,Jx(t)),cn(nv,iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=5*60,tN=GE("authIdTokenMaxAge")||eN;let rv=null;const nN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>tN)return;const s=n==null?void 0:n.token;rv!==s&&(rv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iN(t=od()){const e=is(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IR(t,{popupRedirectResolver:Qx,persistence:[ax,KR,RI]}),i=GE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=nN(o.toString());qR(n,l,()=>l(n.currentUser)),WR(n,h=>l(h))}}const s=WE("auth");return s&&PR(n,`http://${s}`),n}function rN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=ei("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",rN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xx("Browser");var sN="firebase",oN="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(sN,oN,"app");var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,VI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function A(){}A.prototype=I.prototype,S.F=I.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(b,N,P){for(var k=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)k[Re-2]=arguments[Re];return I.prototype[N].apply(b,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,A){A||(A=0);const b=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)b[N]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(N=0;N<16;++N)b[N]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=S.g[0],A=S.g[1],N=S.g[2];let P=S.g[3],k;k=I+(P^A&(N^P))+b[0]+3614090360&4294967295,I=A+(k<<7&4294967295|k>>>25),k=P+(N^I&(A^N))+b[1]+3905402710&4294967295,P=I+(k<<12&4294967295|k>>>20),k=N+(A^P&(I^A))+b[2]+606105819&4294967295,N=P+(k<<17&4294967295|k>>>15),k=A+(I^N&(P^I))+b[3]+3250441966&4294967295,A=N+(k<<22&4294967295|k>>>10),k=I+(P^A&(N^P))+b[4]+4118548399&4294967295,I=A+(k<<7&4294967295|k>>>25),k=P+(N^I&(A^N))+b[5]+1200080426&4294967295,P=I+(k<<12&4294967295|k>>>20),k=N+(A^P&(I^A))+b[6]+2821735955&4294967295,N=P+(k<<17&4294967295|k>>>15),k=A+(I^N&(P^I))+b[7]+4249261313&4294967295,A=N+(k<<22&4294967295|k>>>10),k=I+(P^A&(N^P))+b[8]+1770035416&4294967295,I=A+(k<<7&4294967295|k>>>25),k=P+(N^I&(A^N))+b[9]+2336552879&4294967295,P=I+(k<<12&4294967295|k>>>20),k=N+(A^P&(I^A))+b[10]+4294925233&4294967295,N=P+(k<<17&4294967295|k>>>15),k=A+(I^N&(P^I))+b[11]+2304563134&4294967295,A=N+(k<<22&4294967295|k>>>10),k=I+(P^A&(N^P))+b[12]+1804603682&4294967295,I=A+(k<<7&4294967295|k>>>25),k=P+(N^I&(A^N))+b[13]+4254626195&4294967295,P=I+(k<<12&4294967295|k>>>20),k=N+(A^P&(I^A))+b[14]+2792965006&4294967295,N=P+(k<<17&4294967295|k>>>15),k=A+(I^N&(P^I))+b[15]+1236535329&4294967295,A=N+(k<<22&4294967295|k>>>10),k=I+(N^P&(A^N))+b[1]+4129170786&4294967295,I=A+(k<<5&4294967295|k>>>27),k=P+(A^N&(I^A))+b[6]+3225465664&4294967295,P=I+(k<<9&4294967295|k>>>23),k=N+(I^A&(P^I))+b[11]+643717713&4294967295,N=P+(k<<14&4294967295|k>>>18),k=A+(P^I&(N^P))+b[0]+3921069994&4294967295,A=N+(k<<20&4294967295|k>>>12),k=I+(N^P&(A^N))+b[5]+3593408605&4294967295,I=A+(k<<5&4294967295|k>>>27),k=P+(A^N&(I^A))+b[10]+38016083&4294967295,P=I+(k<<9&4294967295|k>>>23),k=N+(I^A&(P^I))+b[15]+3634488961&4294967295,N=P+(k<<14&4294967295|k>>>18),k=A+(P^I&(N^P))+b[4]+3889429448&4294967295,A=N+(k<<20&4294967295|k>>>12),k=I+(N^P&(A^N))+b[9]+568446438&4294967295,I=A+(k<<5&4294967295|k>>>27),k=P+(A^N&(I^A))+b[14]+3275163606&4294967295,P=I+(k<<9&4294967295|k>>>23),k=N+(I^A&(P^I))+b[3]+4107603335&4294967295,N=P+(k<<14&4294967295|k>>>18),k=A+(P^I&(N^P))+b[8]+1163531501&4294967295,A=N+(k<<20&4294967295|k>>>12),k=I+(N^P&(A^N))+b[13]+2850285829&4294967295,I=A+(k<<5&4294967295|k>>>27),k=P+(A^N&(I^A))+b[2]+4243563512&4294967295,P=I+(k<<9&4294967295|k>>>23),k=N+(I^A&(P^I))+b[7]+1735328473&4294967295,N=P+(k<<14&4294967295|k>>>18),k=A+(P^I&(N^P))+b[12]+2368359562&4294967295,A=N+(k<<20&4294967295|k>>>12),k=I+(A^N^P)+b[5]+4294588738&4294967295,I=A+(k<<4&4294967295|k>>>28),k=P+(I^A^N)+b[8]+2272392833&4294967295,P=I+(k<<11&4294967295|k>>>21),k=N+(P^I^A)+b[11]+1839030562&4294967295,N=P+(k<<16&4294967295|k>>>16),k=A+(N^P^I)+b[14]+4259657740&4294967295,A=N+(k<<23&4294967295|k>>>9),k=I+(A^N^P)+b[1]+2763975236&4294967295,I=A+(k<<4&4294967295|k>>>28),k=P+(I^A^N)+b[4]+1272893353&4294967295,P=I+(k<<11&4294967295|k>>>21),k=N+(P^I^A)+b[7]+4139469664&4294967295,N=P+(k<<16&4294967295|k>>>16),k=A+(N^P^I)+b[10]+3200236656&4294967295,A=N+(k<<23&4294967295|k>>>9),k=I+(A^N^P)+b[13]+681279174&4294967295,I=A+(k<<4&4294967295|k>>>28),k=P+(I^A^N)+b[0]+3936430074&4294967295,P=I+(k<<11&4294967295|k>>>21),k=N+(P^I^A)+b[3]+3572445317&4294967295,N=P+(k<<16&4294967295|k>>>16),k=A+(N^P^I)+b[6]+76029189&4294967295,A=N+(k<<23&4294967295|k>>>9),k=I+(A^N^P)+b[9]+3654602809&4294967295,I=A+(k<<4&4294967295|k>>>28),k=P+(I^A^N)+b[12]+3873151461&4294967295,P=I+(k<<11&4294967295|k>>>21),k=N+(P^I^A)+b[15]+530742520&4294967295,N=P+(k<<16&4294967295|k>>>16),k=A+(N^P^I)+b[2]+3299628645&4294967295,A=N+(k<<23&4294967295|k>>>9),k=I+(N^(A|~P))+b[0]+4096336452&4294967295,I=A+(k<<6&4294967295|k>>>26),k=P+(A^(I|~N))+b[7]+1126891415&4294967295,P=I+(k<<10&4294967295|k>>>22),k=N+(I^(P|~A))+b[14]+2878612391&4294967295,N=P+(k<<15&4294967295|k>>>17),k=A+(P^(N|~I))+b[5]+4237533241&4294967295,A=N+(k<<21&4294967295|k>>>11),k=I+(N^(A|~P))+b[12]+1700485571&4294967295,I=A+(k<<6&4294967295|k>>>26),k=P+(A^(I|~N))+b[3]+2399980690&4294967295,P=I+(k<<10&4294967295|k>>>22),k=N+(I^(P|~A))+b[10]+4293915773&4294967295,N=P+(k<<15&4294967295|k>>>17),k=A+(P^(N|~I))+b[1]+2240044497&4294967295,A=N+(k<<21&4294967295|k>>>11),k=I+(N^(A|~P))+b[8]+1873313359&4294967295,I=A+(k<<6&4294967295|k>>>26),k=P+(A^(I|~N))+b[15]+4264355552&4294967295,P=I+(k<<10&4294967295|k>>>22),k=N+(I^(P|~A))+b[6]+2734768916&4294967295,N=P+(k<<15&4294967295|k>>>17),k=A+(P^(N|~I))+b[13]+1309151649&4294967295,A=N+(k<<21&4294967295|k>>>11),k=I+(N^(A|~P))+b[4]+4149444226&4294967295,I=A+(k<<6&4294967295|k>>>26),k=P+(A^(I|~N))+b[11]+3174756917&4294967295,P=I+(k<<10&4294967295|k>>>22),k=N+(I^(P|~A))+b[2]+718787259&4294967295,N=P+(k<<15&4294967295|k>>>17),k=A+(P^(N|~I))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+P&4294967295}i.prototype.v=function(S,I){I===void 0&&(I=S.length);const A=I-this.blockSize,b=this.C;let N=this.h,P=0;for(;P<I;){if(N==0)for(;P<=A;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<I;)if(b[N++]=S.charCodeAt(P++),N==this.blockSize){s(this,b),N=0;break}}else for(;P<I;)if(b[N++]=S[P++],N==this.blockSize){s(this,b),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;I=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=I&255,I/=256;for(this.v(S),S=Array(16),I=0,A=0;A<4;++A)for(let b=0;b<32;b+=8)S[I++]=this.g[A]>>>b&255;return S};function o(S,I){var A=h;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=I(S)}function l(S,I){this.h=I;const A=[];let b=!0;for(let N=S.length-1;N>=0;N--){const P=S[N]|0;b&&P==I||(A[N]=P,b=!1)}this.g=A}var h={};function d(S){return-128<=S&&S<128?o(S,function(I){return new l([I|0],I<0?-1:0)}):new l([S|0],S<0?-1:0)}function p(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return Z(p(-S));const I=[];let A=1;for(let b=0;S>=A;b++)I[b]=S/A|0,A*=4294967296;return new l(I,0)}function y(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return Z(y(S.substring(1),I));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(I,8));let b=w;for(let P=0;P<S.length;P+=8){var N=Math.min(8,S.length-P);const k=parseInt(S.substring(P,P+N),I);N<8?(N=p(Math.pow(I,N)),b=b.j(N).add(p(k))):(b=b.j(A),b=b.add(p(k)))}return b}var w=d(0),T=d(1),M=d(16777216);t=l.prototype,t.m=function(){if(U(this))return-Z(this).m();let S=0,I=1;for(let A=0;A<this.g.length;A++){const b=this.i(A);S+=(b>=0?b:4294967296+b)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(V(this))return"0";if(U(this))return"-"+Z(this).toString(S);const I=p(Math.pow(S,6));var A=this;let b="";for(;;){const N=W(A,I).g;A=x(A,N.j(I));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=N,V(A))return P+b;for(;P.length<6;)P="0"+P;b=P+b}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function V(S){if(S.h!=0)return!1;for(let I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function U(S){return S.h==-1}t.l=function(S){return S=x(this,S),U(S)?-1:V(S)?0:1};function Z(S){const I=S.g.length,A=[];for(let b=0;b<I;b++)A[b]=~S.g[b];return new l(A,~S.h).add(T)}t.abs=function(){return U(this)?Z(this):this},t.add=function(S){const I=Math.max(this.g.length,S.g.length),A=[];let b=0;for(let N=0;N<=I;N++){let P=b+(this.i(N)&65535)+(S.i(N)&65535),k=(P>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);b=k>>>16,P&=65535,k&=65535,A[N]=k<<16|P}return new l(A,A[A.length-1]&-2147483648?-1:0)};function x(S,I){return S.add(Z(I))}t.j=function(S){if(V(this)||V(S))return w;if(U(this))return U(S)?Z(this).j(Z(S)):Z(Z(this).j(S));if(U(S))return Z(this.j(Z(S)));if(this.l(M)<0&&S.l(M)<0)return p(this.m()*S.m());const I=this.g.length+S.g.length,A=[];for(var b=0;b<2*I;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(let N=0;N<S.g.length;N++){const P=this.i(b)>>>16,k=this.i(b)&65535,Re=S.i(N)>>>16,Kt=S.i(N)&65535;A[2*b+2*N]+=k*Kt,C(A,2*b+2*N),A[2*b+2*N+1]+=P*Kt,C(A,2*b+2*N+1),A[2*b+2*N+1]+=k*Re,C(A,2*b+2*N+1),A[2*b+2*N+2]+=P*Re,C(A,2*b+2*N+2)}for(S=0;S<I;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=I;S<2*I;S++)A[S]=0;return new l(A,0)};function C(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function D(S,I){this.g=S,this.h=I}function W(S,I){if(V(I))throw Error("division by zero");if(V(S))return new D(w,w);if(U(S))return I=W(Z(S),I),new D(Z(I.g),Z(I.h));if(U(I))return I=W(S,Z(I)),new D(Z(I.g),I.h);if(S.g.length>30){if(U(S)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var A=T,b=I;b.l(S)<=0;)A=Q(A),b=Q(b);var N=X(A,1),P=X(b,1);for(b=X(b,2),A=X(A,2);!V(b);){var k=P.add(b);k.l(S)<=0&&(N=N.add(A),P=k),b=X(b,1),A=X(A,1)}return I=x(S,N.j(I)),new D(N,I)}for(N=w;S.l(I)>=0;){for(A=Math.max(1,Math.floor(S.m()/I.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),P=p(A),k=P.j(I);U(k)||k.l(S)>0;)A-=b,P=p(A),k=P.j(I);V(P)&&(P=T),N=N.add(P),S=x(S,k)}return new D(N,S)}t.B=function(S){return W(this,S).h},t.and=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<I;b++)A[b]=this.i(b)&S.i(b);return new l(A,this.h&S.h)},t.or=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<I;b++)A[b]=this.i(b)|S.i(b);return new l(A,this.h|S.h)},t.xor=function(S){const I=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<I;b++)A[b]=this.i(b)^S.i(b);return new l(A,this.h^S.h)};function Q(S){const I=S.g.length+1,A=[];for(let b=0;b<I;b++)A[b]=S.i(b)<<1|S.i(b-1)>>>31;return new l(A,S.h)}function X(S,I){const A=I>>5;I%=32;const b=S.g.length-A,N=[];for(let P=0;P<b;P++)N[P]=I>0?S.i(P+A)>>>I|S.i(P+A+1)<<32-I:S.i(P+A);return new l(N,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,VI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Wr=l}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FI,gl,zI,Bc,Dp,UI,BI,jI;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vc=="object"&&vc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,m){if(m)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var z=u[E];if(!(z in _))break e;_=_[z]}u=u[u.length-1],E=_[u],m=m(E),m!=E&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var _=[],E;for(E in m)Object.prototype.hasOwnProperty.call(m,E)&&_.push([E,m[E]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function h(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,_){return u.call.apply(u.bind,arguments)}function p(u,m,_){return p=d,p.apply(null,arguments)}function y(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function w(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(E,z,j){for(var ee=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ee[_e-2]=arguments[_e];return m.prototype[z].apply(E,ee)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const m=u.length;if(m>0){const _=Array(m);for(let E=0;E<m;E++)_[E]=u[E];return _}return[]}function V(u,m){for(let E=1;E<arguments.length;E++){const z=arguments[E];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const j=z.length||0;u.length=_+j;for(let ee=0;ee<j;ee++)u[_+ee]=z[ee]}else u.push(z)}}class U{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){l.setTimeout(()=>{throw u},0)}function x(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class C{constructor(){this.h=this.g=null}add(m,_){const E=D.get();E.set(m,_),this.h?this.h.next=E:this.g=E,this.h=E}}var D=new U(()=>new W,u=>u.reset());class W{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,X=!1,S=new C,I=()=>{const u=Promise.resolve(void 0);Q=()=>{u.then(A)}};function A(){for(var u;u=x();){try{u.h.call(u.g)}catch(_){Z(_)}var m=D;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}X=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};l.addEventListener("test",_,m),l.removeEventListener("test",_,m)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function Re(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(Re,N),Re.prototype.init=function(u,m){const _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Kt="closure_listenable_"+(Math.random()*1e6|0),Qe=0;function hn(u,m,_,E,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!E,this.ha=z,this.key=++Qe,this.da=this.fa=!1}function q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ce(u,m,_){for(const E in u)m.call(_,u[E],E,u)}function J(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function te(u){const m={};for(const _ in u)m[_]=u[_];return m}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(u,m){let _,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(_ in E)u[_]=E[_];for(let j=0;j<he.length;j++)_=he[j],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,m,_,E,z){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const ee=de(u,m,E,z);return ee>-1?(m=u[ee],_||(m.fa=!1)):(m=new hn(m,this.src,j,!!E,z),m.fa=_,u.push(m)),m};function we(u,m){const _=m.type;if(_ in u.g){var E=u.g[_],z=Array.prototype.indexOf.call(E,m,void 0),j;(j=z>=0)&&Array.prototype.splice.call(E,z,1),j&&(q(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function de(u,m,_,E){for(let z=0;z<u.length;++z){const j=u[z];if(!j.da&&j.listener==m&&j.capture==!!_&&j.ha==E)return z}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Nt={};function as(u,m,_,E,z){if(Array.isArray(m)){for(let j=0;j<m.length;j++)as(u,m[j],_,E,z);return null}return _=Li(_),u&&u[Kt]?u.J(m,_,h(E)?!!E.capture:!1,z):ki(u,m,_,!1,E,z)}function ki(u,m,_,E,z,j){if(!m)throw Error("Invalid event type");const ee=h(z)?!!z.capture:!!z;let _e=dr(u);if(_e||(u[He]=_e=new Se(u)),_=_e.add(m,_,E,ee,j),_.proxy)return _;if(E=Ri(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)P||(z=ee),z===void 0&&(z=!1),u.addEventListener(m.toString(),E,z);else if(u.attachEvent)u.attachEvent(to(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ri(){function u(_){return m.call(u.src,u.listener,_)}const m=no;return u}function Un(u,m,_,E,z){if(Array.isArray(m))for(var j=0;j<m.length;j++)Un(u,m[j],_,E,z);else E=h(E)?!!E.capture:!!E,_=Li(_),u&&u[Kt]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],_=de(m,_,E,z),_>-1&&(q(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=dr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=de(m,_,E,z)),(_=u>-1?m[u]:null)&&xi(_))}function xi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Kt])we(m.i,u);else{var _=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(_,E,u.capture):m.detachEvent?m.detachEvent(to(_),E):m.addListener&&m.removeListener&&m.removeListener(E),(_=dr(m))?(we(_,u),_.h==0&&(_.src=null,m[He]=null)):q(u)}}}function to(u){return u in Nt?Nt[u]:Nt[u]="on"+u}function no(u,m){if(u.da)u=!0;else{m=new Re(m,this);const _=u.listener,E=u.ha||u.src;u.fa&&xi(u),u=_.call(E,m)}return u}function dr(u){return u=u[He],u instanceof Se?u:null}var Ni="__closure_events_fn_"+(Math.random()*1e9>>>0);function Li(u){return typeof u=="function"?u:(u[Ni]||(u[Ni]=function(m){return u.handleEvent(m)}),u[Ni])}function at(){b.call(this),this.i=new Se(this),this.M=this,this.G=null}w(at,b),at.prototype[Kt]=!0,at.prototype.removeEventListener=function(u,m,_,E){Un(this,u,m,_,E)};function lt(u,m){var _,E=u.G;if(E)for(_=[];E;E=E.G)_.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var z=m;m=new N(E,u),Ge(m,z)}z=!0;let j,ee;if(_)for(ee=_.length-1;ee>=0;ee--)j=m.g=_[ee],z=si(j,E,!0,m)&&z;if(j=m.g=u,z=si(j,E,!0,m)&&z,z=si(j,E,!1,m)&&z,_)for(ee=0;ee<_.length;ee++)j=m.g=_[ee],z=si(j,E,!1,m)&&z}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let E=0;E<_.length;E++)q(_[E]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,_,E){return this.i.add(String(u),m,!1,_,E)},at.prototype.K=function(u,m,_,E){return this.i.add(String(u),m,!0,_,E)};function si(u,m,_,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let j=0;j<m.length;++j){const ee=m[j];if(ee&&!ee.da&&ee.capture==_){const _e=ee.listener,Oe=ee.ha||ee.src;ee.fa&&we(u.i,ee),z=_e.call(Oe,E)!==!1&&z}}return z&&!E.defaultPrevented}function ls(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:l.setTimeout(u,m||0)}function F(u){u.g=ls(()=>{u.g=null,u.i&&(u.i=!1,F(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Te extends b{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:F(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(u){b.call(this),this.h=u,this.g={}}w(it,b);var vt=[];function Qt(u){ce(u.g,function(m,_){this.g.hasOwnProperty(_)&&xi(m)},u),u.g={}}it.prototype.N=function(){it.Z.N.call(this),Qt(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=l.JSON.stringify,Rd=l.JSON.parse,Su=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function xa(){}function Pu(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){N.call(this,"d")}w(us,N);function io(){N.call(this,"c")}w(io,N);var bi={},pr=null;function ro(){return pr=pr||new at}bi.Ia="serverreachability";function Cu(u){N.call(this,bi.Ia,u)}w(Cu,N);function mr(u){const m=ro();lt(m,new Cu(m))}bi.STAT_EVENT="statevent";function Na(u,m){N.call(this,bi.STAT_EVENT,u),this.stat=m}w(Na,N);function wt(u){const m=ro();lt(m,new Na(m,u))}bi.Ja="timingevent";function Au(u,m){N.call(this,bi.Ja,u),this.size=m}w(Au,N);function cs(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function hs(){this.g=!0}hs.prototype.ua=function(){this.g=!1};function xd(u,m,_,E,z,j){u.info(function(){if(u.g)if(j){var ee="",_e=j.split("&");for(let Me=0;Me<_e.length;Me++){var Oe=_e[Me].split("=");if(Oe.length>1){const rt=Oe[0];Oe=Oe[1];const An=rt.split("_");ee=An.length>=2&&An[1]=="type"?ee+(rt+"="+Oe+"&"):ee+(rt+"=redacted&")}}}else ee=null;else ee=j;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+m+`
`+_+`
`+ee})}function Nd(u,m,_,E,z,j,ee){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+m+`
`+_+`
`+j+" "+ee})}function gr(u,m,_,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ld(u,_)+(E?" "+E:"")})}function La(u,m){u.info(function(){return"TIMEOUT: "+m})}hs.prototype.info=function(){};function Ld(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var _=j[u];if(!(_.length<2)){var E=_[1];if(Array.isArray(E)&&!(E.length<1)){var z=E[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ee=1;ee<E.length;ee++)E[ee]=""}}}}return En(j)}catch{return m}}var so={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ku={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ru;function Yt(){}w(Yt,xa),Yt.prototype.g=function(){return new XMLHttpRequest},Ru=new Yt;function ae(u){return encodeURIComponent(String(u))}function xu(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Bn(u,m,_,E){this.j=u,this.i=m,this.l=_,this.S=E||1,this.V=new it(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ba}function ba(){this.i=null,this.g="",this.h=!1}var Oa={},ds={};function oo(u,m,_){u.M=1,u.A=Ue(Bt(m)),u.u=_,u.R=!0,Oi(u,null)}function Oi(u,m){u.F=Date.now(),ao(u),u.B=Bt(u.A);var _=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),fo(_.i,"t",E),u.C=0,_=u.j.L,u.h=new ba,u.g=Za(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Te(p(u.Y,u,u.g),u.P)),m=u.V,_=u.g,E=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(vt[0]=z.toString()),z=vt);for(let j=0;j<z.length;j++){const ee=as(_,z[j],E||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.J?te(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),mr(),xd(u.i,u.v,u.B,u.l,u.S,u.u)}Bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&ui(u)==3?m.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const _e=ui(this.g),Oe=this.g.ya(),Me=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Ba(this.g)))){this.K||_e!=4||Oe==7||(Oe==8||Me<=0?mr(3):mr(2)),lo(this);var m=this.g.ca();this.X=m;var _=Nu(this);if(this.o=m==200,Nd(this.i,this.v,this.B,this.l,this.S,_e,m),this.o){if(this.U&&!this.L){t:{if(this.g){var E,z=this.g;if((E=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(E)){var j=E;break t}}j=null}if(u=j)gr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Da(this,u);else{this.o=!1,this.m=3,wt(12),In(this),fs(this);break e}}if(this.R){u=!0;let rt;for(;!this.K&&this.C<_.length;)if(rt=bd(this,_),rt==ds){_e==4&&(this.m=4,wt(14),u=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Oa){this.m=4,wt(15),gr(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else gr(this.i,this.l,rt,null),Da(this,rt);if(Lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||_.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)gr(this.i,this.l,_,"[Invalid Chunked Response]"),In(this),fs(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),$a(ee),ee.P=!0,wt(11))}}else gr(this.i,this.l,_,null),Da(this,_);_e==4&&In(this),this.o&&!this.K&&(_e==4?fn(this.j,this):(this.o=!1,ao(this)))}else ja(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),In(this),fs(this)}}}catch{}finally{}};function Nu(u){if(!Lu(u))return u.g.la();const m=Ba(u.g);if(m==="")return"";let _="";const E=m.length,z=ui(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return In(u),fs(u),"";u.h.i=new l.TextDecoder}for(let j=0;j<E;j++)u.h.h=!0,_+=u.h.i.decode(m[j],{stream:!(z&&j==E-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Lu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function bd(u,m){var _=u.C,E=m.indexOf(`
`,_);return E==-1?ds:(_=Number(m.substring(_,E)),isNaN(_)?Oa:(E+=1,E+_>m.length?ds:(m=m.slice(E,E+_),u.C=E+_,m)))}Bn.prototype.cancel=function(){this.K=!0,In(this)};function ao(u){u.T=Date.now()+u.H,bu(u,u.H)}function bu(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=cs(p(u.aa,u),m)}function lo(u){u.D&&(l.clearTimeout(u.D),u.D=null)}Bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(La(this.i,this.B),this.M!=2&&(mr(),wt(17)),In(this),this.m=2,fs(this)):bu(this,this.T-u)};function fs(u){u.j.I==0||u.K||fn(u.j,u)}function In(u){lo(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Qt(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Da(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ps(_.h,u))){if(!u.L&&ps(_.h,u)&&_.I==3){try{var E=_.Ba.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)yo(_),go(_);else break e;qa(_),wt(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=cs(p(_.Va,_),6e3));Mu(_.h)<=1&&_.ta&&(_.ta=void 0)}else hi(_,11)}else if((u.L||_.g==u)&&yo(_),!k(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Me=z[m];const rt=Me[0];if(!(rt<=_.K))if(_.K=rt,Me=Me[1],_.I==2)if(Me[0]=="c"){_.M=Me[1],_.ba=Me[2];const An=Me[3];An!=null&&(_.ka=An,_.j.info("VER="+_.ka));const Wn=Me[4];Wn!=null&&(_.za=Wn,_.j.info("SVER="+_.za));const kn=Me[5];kn!=null&&typeof kn=="number"&&kn>0&&(E=1.5*kn,_.O=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const di=u.g;if(di){const To=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(To){var j=E.h;j.g||To.indexOf("spdy")==-1&&To.indexOf("quic")==-1&&To.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Di(j,j.h),j.h=null))}if(E.G){const Eo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(E.wa=Eo,se(E.J,E.G,Eo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),E=_;var ee=u;if(E.na=Ga(E,E.L?E.ba:null,E.W),ee.L){Ma(E.h,ee);var _e=ee,Oe=E.O;Oe&&(_e.H=Oe),_e.D&&(lo(_e),ao(_e)),E.g=ee}else Wa(E);_.i.length>0&&ci(_)}else Me[0]!="stop"&&Me[0]!="close"||hi(_,7);else _.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?hi(_,7):Ee(_):Me[0]!="noop"&&_.l&&_.l.qa(Me),_.A=0)}}mr(4)}catch{}}var Od=class{constructor(u,m){this.g=u,this.map=m}};function Ou(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Du(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mu(u){return u.h?1:u.g?u.g.size:0}function ps(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Di(u,m){u.g?u.g.add(m):u.h=m}function Ma(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ou.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Va(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return M(u.i)}var _r=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xe(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const E=u[_].indexOf("=");let z,j=null;E>=0?(z=u[_].substring(0,E),j=u[_].substring(E+1)):z=u[_],m(z,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function be(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof be?(this.l=u.l,Sn(this,u.j),this.o=u.o,this.g=u.g,Pn(this,u.u),this.h=u.h,ms(this,gs(u.i)),this.m=u.m):u&&(m=String(u).match(_r))?(this.l=!1,Sn(this,m[1]||"",!0),this.o=Mi(m[2]||""),this.g=Mi(m[3]||"",!0),Pn(this,m[4]),this.h=Mi(m[5]||"",!0),ms(this,m[6]||"",!0),this.m=Mi(m[7]||"")):(this.l=!1,this.i=new jn(null,this.l))}be.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(oi(m,Vu,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(oi(m,Vu,!0),"@"),u.push(ae(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(oi(_,_.charAt(0)=="/"?Vi:uo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",oi(_,Fi)),u.join("")},be.prototype.resolve=function(u){const m=Bt(this);let _=!!u.j;_?Sn(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var E=u.h;if(_)Pn(m,u.u);else if(_=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var z=m.h.lastIndexOf("/");z!=-1&&(E=m.h.slice(0,z+1)+E)}if(z=E,z==".."||z==".")E="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){E=z.lastIndexOf("/",0)==0,z=z.split("/");const j=[];for(let ee=0;ee<z.length;){const _e=z[ee++];_e=="."?E&&ee==z.length&&j.push(""):_e==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),E&&ee==z.length&&j.push("")):(j.push(_e),E=!0)}E=j.join("/")}else E=z}return _?m.h=E:_=u.i.toString()!=="",_?ms(m,gs(u.i)):_=!!u.m,_&&(m.m=u.m),m};function Bt(u){return new be(u)}function Sn(u,m,_){u.j=_?Mi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Pn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ms(u,m,_){m instanceof jn?(u.i=m,Fa(u.i,u.l)):(_||(m=oi(m,tt)),u.i=new jn(m,u.l))}function se(u,m,_){u.i.set(m,_)}function Ue(u){return se(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Mi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function oi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Jt),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jt(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vu=/[#\/\?@]/g,uo=/[#\?:]/g,Vi=/[#\?]/g,tt=/[#\?@]/g,Fi=/#/g;function jn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function dn(u){u.g||(u.g=new Map,u.h=0,u.i&&xe(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=jn.prototype,t.add=function(u,m){dn(this),this.i=null,u=ai(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function co(u,m){dn(u),m=ai(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function yr(u,m){return dn(u),m=ai(u,m),u.g.has(m)}t.forEach=function(u,m){dn(this),this.g.forEach(function(_,E){_.forEach(function(z){u.call(m,z,E,this)},this)},this)};function ho(u,m){dn(u);let _=[];if(typeof m=="string")yr(u,m)&&(_=_.concat(u.g.get(ai(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}t.set=function(u,m){return dn(this),this.i=null,u=ai(this,u),yr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=ho(this,u),u.length>0?String(u[0]):m):m};function fo(u,m,_){co(u,m),_.length>0&&(u.i=null,u.g.set(ai(u,m),M(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let E=0;E<m.length;E++){var _=m[E];const z=ae(_);_=ho(this,_);for(let j=0;j<_.length;j++){let ee=z;_[j]!==""&&(ee+="="+ae(_[j])),u.push(ee)}}return this.i=u.join("&")};function gs(u){const m=new jn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ai(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Fa(u,m){m&&!u.j&&(dn(u),u.i=null,u.g.forEach(function(_,E){const z=E.toLowerCase();E!=z&&(co(this,E),fo(this,z,_))},u)),u.j=m}function po(u,m){const _=new hs;if(l.Image){const E=new Image;E.onload=y(Cn,_,"TestLoadImage: loaded",!0,m,E),E.onerror=y(Cn,_,"TestLoadImage: error",!1,m,E),E.onabort=y(Cn,_,"TestLoadImage: abort",!1,m,E),E.ontimeout=y(Cn,_,"TestLoadImage: timeout",!1,m,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function Fu(u,m){const _=new hs,E=new AbortController,z=setTimeout(()=>{E.abort(),Cn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(z),j.ok?Cn(_,"TestPingServer: ok",!0,m):Cn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),Cn(_,"TestPingServer: error",!1,m)})}function Cn(u,m,_,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(_)}catch{}}function Dd(){this.g=new Su}function ge(u){this.i=u.Sb||null,this.h=u.ab||!1}w(ge,xa),ge.prototype.g=function(){return new jt(this.i,this.h)};function jt(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(jt,at),t=jt.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,zi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||l).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fe(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fe(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?vr(this):zi(this),this.readyState==3&&Fe(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,vr(this))},t.Na=function(u){this.g&&(this.response=u,vr(this))},t.ga=function(){this.g&&vr(this)};function vr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,zi(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function zi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mo(u){let m="";return ce(u,function(_,E){m+=E,m+=":",m+=_,m+=`\r
`}),m}function _s(u,m,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=mo(_),typeof u=="string"?_!=null&&ae(_):se(u,m,_))}function De(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(De,at);var za=/^https?$/i,ys=["POST","PUT"];t=De.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ru.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){ut(this,j);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)_.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())_.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),z=l.FormData&&u instanceof l.FormData,!(Array.prototype.indexOf.call(ys,m,void 0)>=0)||E||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ee]of _)this.g.setRequestHeader(j,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){ut(this,j)}};function ut(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,li(u),vs(u)}function li(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),vs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},t.Xa=function(){Ua(this)};function Ua(u){if(u.h&&typeof o<"u"){if(u.v&&ui(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),ui(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var E;if(E=j===0){let ee=String(u.D).match(_r)[1]||null;!ee&&l.self&&l.self.location&&(ee=l.self.location.protocol.slice(0,-1)),E=!za.test(ee?ee.toLowerCase():"")}_=E}if(_)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var z=ui(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",li(u)}}finally{vs(u)}}}}function vs(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||lt(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ui(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Rd(m)}};function Ba(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ja(u){const m={};u=(u.g&&ui(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(k(u[E]))continue;var _=xu(u[E]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=m[z]||[];m[z]=j,j.push(_)}J(m,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ha(u){this.za=0,this.i=[],this.j=new hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ws("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ws("baseRetryDelayMs",5e3,u),this.Za=ws("retryDelaySeedMs",1e4,u),this.Ta=ws("forwardChannelMaxRetries",2,u),this.va=ws("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ou(u&&u.concurrentRequestLimit),this.Ba=new Dd,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ha.prototype,t.ka=8,t.I=1,t.connect=function(u,m,_,E){wt(0),this.W=u,this.H=m||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.J=Ga(this,null,this.W),ci(this)};function Ee(u){if(Xt(u),u.I==3){var m=u.V++,_=Bt(u.J);if(se(_,"SID",u.M),se(_,"RID",m),se(_,"TYPE","terminate"),Ui(u,_),m=new Bn(u,u.j,m),m.M=2,m.A=Ue(Bt(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&l.Image&&(new Image().src=m.A,_=!0),_||(m.g=Za(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ao(m)}Hn(u)}function go(u){u.g&&($a(u),u.g.cancel(),u.g=null)}function Xt(u){go(u),u.v&&(l.clearTimeout(u.v),u.v=null),yo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&l.clearTimeout(u.m),u.m=null)}function ci(u){if(!Du(u.h)&&!u.m){u.m=!0;var m=u.Ea;Q||I(),X||(Q(),X=!0),S.add(m,u),u.D=0}}function zu(u,m){return Mu(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=cs(p(u.Ea,u,m),ju(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Bn(this,this.j,u);let j=this.o;if(this.U&&(j?(j=te(j),Ge(j,this.U)):j=this.U),this.u!==null||this.R||(z.J=j,j=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Bu(this,z,m),_=Bt(this.J),se(_,"RID",u),se(_,"CVER",22),this.G&&se(_,"X-HTTP-Session-Id",this.G),Ui(this,_),j&&(this.R?m="headers="+ae(mo(j))+"&"+m:this.u&&_s(_,this.u,j)),Di(this.h,z),this.Ra&&se(_,"TYPE","init"),this.S?(se(_,"$req",m),se(_,"SID","null"),z.U=!0,oo(z,_,null)):oo(z,_,m),this.I=2}}else this.I==3&&(u?Uu(this,u):this.i.length==0||Du(this.h)||Uu(this))};function Uu(u,m){var _;m?_=m.l:_=u.V++;const E=Bt(u.J);se(E,"SID",u.M),se(E,"RID",_),se(E,"AID",u.K),Ui(u,E),u.u&&u.o&&_s(E,u.u,u.o),_=new Bn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Bu(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Di(u.h,_),oo(_,E,m)}function Ui(u,m){u.H&&ce(u.H,function(_,E){se(m,E,_)}),u.l&&ce({},function(_,E){se(m,E,_)})}function Bu(u,m,_){_=Math.min(u.i.length,_);const E=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let _e=-1;for(;;){const Oe=["count="+_];_e==-1?_>0?(_e=z[0].g,Oe.push("ofs="+_e)):_e=0:Oe.push("ofs="+_e);let Me=!0;for(let rt=0;rt<_;rt++){var j=z[rt].g;const An=z[rt].map;if(j-=_e,j<0)_e=Math.max(0,z[rt].g-100),Me=!1;else try{j="req"+j+"_"||"";try{var ee=An instanceof Map?An:Object.entries(An);for(const[Wn,kn]of ee){let di=kn;h(kn)&&(di=En(kn)),Oe.push(j+Wn+"="+encodeURIComponent(di))}}catch(Wn){throw Oe.push(j+"type="+encodeURIComponent("_badmap")),Wn}}catch{E&&E(An)}}if(Me){ee=Oe.join("&");break e}}ee=void 0}return u=u.i.splice(0,_),m.G=u,ee}function Wa(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Q||I(),X||(Q(),X=!0),S.add(m,u),u.A=0}}function qa(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=cs(p(u.Da,u),ju(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,_o(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=cs(p(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),go(this),_o(this))};function $a(u){u.B!=null&&(l.clearTimeout(u.B),u.B=null)}function _o(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Bt(u.na);se(m,"RID","rpc"),se(m,"SID",u.M),se(m,"AID",u.K),se(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&se(m,"TO",u.ia),se(m,"TYPE","xmlhttp"),Ui(u,m),u.u&&u.o&&_s(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ue(Bt(m)),_.u=null,_.R=!0,Oi(_,u)}t.Va=function(){this.C!=null&&(this.C=null,go(this),qa(this),wt(19))};function yo(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function fn(u,m){var _=null;if(u.g==m){yo(u),$a(u),u.g=null;var E=2}else if(ps(u.h,m))_=m.G,Ma(u.h,m),E=1;else return;if(u.I!=0){if(m.o)if(E==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;E=ro(),lt(E,new Au(E,_)),ci(u)}else Wa(u);else if(z=m.m,z==3||z==0&&m.X>0||!(E==1&&zu(u,m)||E==2&&qa(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function ju(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function hi(u,m){if(u.j.info("Error code "+m),m==2){var _=p(u.bb,u),E=u.Ua;const z=!E;E=new be(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Sn(E,"https"),Ue(E),z?po(E.toString(),_):Fu(E.toString(),_)}else wt(2);u.I=0,u.l&&u.l.pa(m),Hn(u),Xt(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Hn(u){if(u.I=0,u.ja=[],u.l){const m=Va(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ja,m),V(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function Ga(u,m,_){var E=_ instanceof be?Bt(_):new be(_);if(E.g!="")m&&(E.g=m+"."+E.g),Pn(E,E.u);else{var z=l.location;E=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const j=new be(null);E&&Sn(j,E),m&&(j.g=m),z&&Pn(j,z),_&&(j.h=_),E=j}return _=u.G,m=u.wa,_&&m&&se(E,_,m),se(E,"VER",u.ka),Ui(u,E),E}function Za(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new De(new ge({ab:_})):new De(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vo(){}t=vo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function wo(){}wo.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){at.call(this),this.g=new Ha(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!k(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new wr(this)}w(Lt,at),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ee(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=En(u),u=_);m.i.push(new Od(m.Ya++,u)),m.I==3&&ci(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ee(this.g),delete this.g,Lt.Z.N.call(this)};function Ka(u){us.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Ka,us);function Hu(){io.call(this),this.status=1}w(Hu,io);function wr(u){this.g=u}w(wr,vo),wr.prototype.ra=function(){lt(this.g,"a")},wr.prototype.qa=function(u){lt(this.g,new Ka(u))},wr.prototype.pa=function(u){lt(this.g,new Hu)},wr.prototype.oa=function(){lt(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,jI=function(){return new wo},BI=function(){return ro()},UI=bi,Dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,Bc=so,ku.COMPLETE="complete",zI=ku,Pu.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",at.prototype.listen=at.prototype.J,gl=Pu,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,FI=De}).apply(typeof vc<"u"?vc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="12.9.0";function aN(t){Sa=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new sd("@firebase/firestore");function No(){return js.logLevel}function re(t,...e){if(js.logLevel<=Ce.DEBUG){const n=e.map(cg);js.debug(`Firestore (${Sa}): ${t}`,...n)}}function ar(t,...e){if(js.logLevel<=Ce.ERROR){const n=e.map(cg);js.error(`Firestore (${Sa}): ${t}`,...n)}}function Hs(t,...e){if(js.logLevel<=Ce.WARN){const n=e.map(cg);js.warn(`Firestore (${Sa}): ${t}`,...n)}}function cg(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,HI(t,i,n)}function HI(t,e,n){let i=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ar(i),new Error(i)}function Ve(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||HI(e,s,i)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class uN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cN{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ls,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ls)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve(typeof i.accessToken=="string",31837,{l:i}),new WI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class hN{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class dN{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new hN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const i=o=>{o.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ov(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=pN(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Ae(t,e){return t<e?-1:t>e?1:0}function Mp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),o=e.charAt(i);if(s!==o)return Tf(s)===Tf(o)?Ae(s,o):Tf(s)?1:-1}return Ae(t.length,e.length)}const mN=55296,gN=57343;function Tf(t){const e=t.charCodeAt(0);return e>=mN&&e<=gN}function fa(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=gi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Ae(e.length,n.length)}static compareSegments(e,n){const i=gi.isNumericId(e),s=gi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?gi.extractNumericId(e).compare(gi.extractNumericId(n)):Mp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Be extends gi{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const _N=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends gi{construct(e,n,i){return new At(e,n,i)}static isValidIdentifier(e){return _N.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new At([av])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ie($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ie($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ie($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Be.fromString(e))}static fromName(e){return new ue(Be.fromString(e).popFirst(5))}static empty(){return new ue(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e,n){if(!n)throw new ie($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yN(t,e,n,i){if(e===!0&&i===!0)throw new ie($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lv(t){if(!ue.isDocumentKey(t))throw new ie($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uv(t){if(ue.isDocumentKey(t))throw new ie($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $I(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(t);throw new ie($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function vu(t,e){if(!$I(t))throw new ie($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ie($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,hv=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*hv);return new qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cv)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:pt("string",qe._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new qe(0,0))}static max(){return new ye(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=-1;function vN(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Zr(s,ue.empty(),e)}function wN(t){return new Zr(t.readTime,t.key,tu)}class Zr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zr(ye.min(),ue.empty(),tu)}static max(){return new Zr(ye.max(),ue.empty(),tu)}}function TN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==EN)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(s=>s?G.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++h,h===o&&i(l)},y=>s(y))}})}static doWhile(e,n){return new G((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function SN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=-1;function dd(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function PN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="";function CN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dv(e)),e=AN(t.get(n),e);return dv(e)}function AN(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case GI:n+="";break;default:n+=o}}return n}function dv(t){return t+GI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=s??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Ct(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new gn([])}unionWith(e){let n=new yt(At.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new KI("Invalid base64 string: "+o):o}}(e);return new xt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const kN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=kN.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="server_timestamp",YI="__type__",JI="__previous_value__",XI="__local_write_time__";function fg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YI])==null?void 0:i.stringValue)===QI}function fd(t){const e=t.mapValue.fields[JI];return fg(e)?fd(e):e}function nu(t){const e=Kr(t.mapValue.fields[XI].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n,i,s,o,l,h,d,p,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=w}}const kh="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||kh}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}function xN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ie($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="__type__",NN="__max__",Tc={mapValue:{}},t0="__vector__",Rh="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fg(t)?4:bN(t)?9007199254740991:LN(t)?10:11:me(28295,{value:t})}function Pi(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nu(t).isEqual(nu(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Kr(s.timestampValue),h=Kr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Qr(s.bytesValue).isEqual(Qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return st(s.geoPointValue.latitude)===st(o.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return st(s.integerValue)===st(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=st(s.doubleValue),h=st(o.doubleValue);return l===h?Ah(l)===Ah(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return fa(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(fv(l)!==fv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!Pi(l[d],h[d])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function ru(t,e){return(t.values||[]).find(n=>Pi(n,e))!==void 0}function pa(t,e){if(t===e)return 0;const n=Yr(t),i=Yr(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=st(o.integerValue||o.doubleValue),d=st(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return mv(t.timestampValue,e.timestampValue);case 4:return mv(nu(t),nu(e));case 5:return Mp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Qr(o),d=Qr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Ae(h[p],d[p]);if(y!==0)return y}return Ae(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ae(st(o.latitude),st(l.latitude));return h!==0?h:Ae(st(o.longitude),st(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var T,M,V,U;const h=o.fields||{},d=l.fields||{},p=(T=h[Rh])==null?void 0:T.arrayValue,y=(M=d[Rh])==null?void 0:M.arrayValue,w=Ae(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((U=y==null?void 0:y.values)==null?void 0:U.length)||0);return w!==0?w:gv(p,y)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Tc.mapValue&&l===Tc.mapValue)return 0;if(o===Tc.mapValue)return 1;if(l===Tc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const T=Mp(d[w],y[w]);if(T!==0)return T;const M=pa(h[d[w]],p[y[w]]);if(M!==0)return M}return Ae(d.length,y.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Kr(t),i=Kr(e),s=Ae(n.seconds,i.seconds);return s!==0?s:Ae(n.nanos,i.nanos)}function gv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=pa(n[s],i[s]);if(o)return o}return Ae(n.length,i.length)}function ma(t){return Vp(t)}function Vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Kr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=Vp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Vp(n.fields[l])}`;return s+"}"}(t.mapValue):me(61005,{value:t})}function jc(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fd(t);return e?16+jc(e):16;case 5:return 2*t.stringValue.length;case 6:return Qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+jc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return ss(i.fields,(o,l)=>{s+=o.length+jc(l)}),s}(t.mapValue);default:throw me(13486,{value:t})}}function _v(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fp(t){return!!t&&"integerValue"in t}function pg(t){return!!t&&"arrayValue"in t}function yv(t){return!!t&&"nullValue"in t}function vv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function LN(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[e0])==null?void 0:i.stringValue)===t0}function Nl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Nl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(t.arrayValue.values[n]);return e}return{...t}}function bN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=At.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=Nl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ss(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new sn(Nl(this.value))}}function n0(t){const e=[];return ss(t.fields,(n,i)=>{const s=new At([n]);if(Hc(i)){const o=n0(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Ft(e,0,ye.min(),ye.min(),ye.min(),sn.empty(),0)}static newFoundDocument(e,n,i,s){return new Ft(e,1,n,ye.min(),i,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,ye.min(),ye.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ye.min(),ye.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n){this.position=e,this.inclusive=n}}function wv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ue.comparator(ue.fromName(l.referenceValue),n.key):i=pa(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n="asc"){this.field=e,this.dir=n}}function ON(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{}class ft extends i0{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new MN(e,n,i):n==="array-contains"?new zN(e,i):n==="in"?new UN(e,i):n==="not-in"?new BN(e,i):n==="array-contains-any"?new jN(e,i):new ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new VN(e,i):new FN(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pa(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends i0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ri(e,n)}matches(e){return r0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r0(t){return t.op==="and"}function s0(t){return DN(t)&&r0(t)}function DN(t){for(const e of t.filters)if(e instanceof ri)return!1;return!0}function zp(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+ma(t.value);if(s0(t))return t.filters.map(e=>zp(e)).join(",");{const e=t.filters.map(n=>zp(n)).join(",");return`${t.op}(${e})`}}function o0(t,e){return t instanceof ft?function(i,s){return s instanceof ft&&i.op===s.op&&i.field.isEqual(s.field)&&Pi(i.value,s.value)}(t,e):t instanceof ri?function(i,s){return s instanceof ri&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&o0(l,s.filters[h]),!0):!1}(t,e):void me(19439)}function a0(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${ma(n.value)}`}(t):t instanceof ri?function(n){return n.op.toString()+" {"+n.getFilters().map(a0).join(" ,")+"}"}(t):"Filter"}class MN extends ft{constructor(e,n,i){super(e,n,i),this.key=ue.fromName(i.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class VN extends ft{constructor(e,n){super(e,"in",n),this.keys=l0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FN extends ft{constructor(e,n){super(e,"not-in",n),this.keys=l0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function l0(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ue.fromName(i.referenceValue))}class zN extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pg(n)&&ru(n.arrayValue,this.value)}}class UN extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class BN extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ru(this.value.arrayValue,n)}}class jN extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Te=null}}function Ev(t,e=null,n=[],i=[],s=null,o=null,l=null){return new HN(t,e,n,i,s,o,l)}function mg(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ma(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ma(i)).join(",")),e.Te=n}return e.Te}function gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ON(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tv(t.startAt,e.startAt)&&Tv(t.endAt,e.endAt)}function Up(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function WN(t,e,n,i,s,o,l,h){return new Aa(t,e,n,i,s,o,l,h)}function _g(t){return new Aa(t)}function Iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qN(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function u0(t){return t.collectionGroup!==null}function Ll(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new yt(At.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new su(o,i))}),n.has(At.keyField().canonicalString())||e.Ie.push(new su(At.keyField(),i))}return e.Ie}function Ti(t){const e=ve(t);return e.Ee||(e.Ee=$N(e,Ll(t))),e.Ee}function $N(t,e){if(t.limitType==="F")return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new su(s.field,o)});const n=t.endAt?new xh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new xh(t.startAt.position,t.startAt.inclusive):null;return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Bp(t,e){const n=t.filters.concat([e]);return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function GN(t,e){const n=t.explicitOrderBy.concat([e]);return new Aa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function jp(t,e,n){return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return gg(Ti(t),Ti(e))&&t.limitType===e.limitType}function c0(t){return`${mg(Ti(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>a0(s)).join(", ")}]`),dd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ma(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ma(s)).join(",")),`Target(${i})`}(Ti(t))}; limitType=${t.limitType})`}function md(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ue.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of Ll(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const p=wv(l,h,d);return l.inclusive?p<=0:p<0}(i.startAt,Ll(i),s)||i.endAt&&!function(l,h,d){const p=wv(l,h,d);return l.inclusive?p>=0:p>0}(i.endAt,Ll(i),s))}(t,e)}function ZN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h0(t){return(e,n)=>{let i=!1;for(const s of Ll(t)){const o=KN(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function KN(t,e,n){const i=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),p=h.data.field(o);return d!==null&&p!==null?pa(d,p):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return ZI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new et(ue.comparator);function lr(){return QN}const d0=new et(ue.comparator);function _l(...t){let e=d0;for(const n of t)e=e.insert(n.key,n);return e}function f0(t){let e=d0;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ks(){return bl()}function p0(){return bl()}function bl(){return new Js(t=>t.toString(),(t,e)=>t.isEqual(e))}const YN=new et(ue.comparator),JN=new yt(ue.comparator);function ke(...t){let e=JN;for(const n of t)e=e.add(n);return e}const XN=new yt(Ae);function eL(){return XN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function m0(t){return{integerValue:""+t}}function tL(t,e){return PN(e)?m0(e):yg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function nL(t,e,n){return t instanceof Nh?function(s,o){const l={fields:{[YI]:{stringValue:QI},[XI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&fg(o)&&(o=fd(o)),o&&(l.fields[JI]=o),{mapValue:l}}(n,e):t instanceof ga?_0(t,e):t instanceof ou?y0(t,e):function(s,o){const l=g0(s,o),h=Sv(l)+Sv(s.Ae);return Fp(l)&&Fp(s.Ae)?m0(h):yg(s.serializer,h)}(t,e)}function iL(t,e,n){return t instanceof ga?_0(t,e):t instanceof ou?y0(t,e):n}function g0(t,e){return t instanceof Lh?function(i){return Fp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Nh extends gd{}class ga extends gd{constructor(e){super(),this.elements=e}}function _0(t,e){const n=v0(e);for(const i of t.elements)n.some(s=>Pi(s,i))||n.push(i);return{arrayValue:{values:n}}}class ou extends gd{constructor(e){super(),this.elements=e}}function y0(t,e){let n=v0(e);for(const i of t.elements)n=n.filter(s=>!Pi(s,i));return{arrayValue:{values:n}}}class Lh extends gd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sv(t){return st(t.integerValue||t.doubleValue)}function v0(t){return pg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n){this.field=e,this.transform=n}}function sL(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof ga&&s instanceof ga||i instanceof ou&&s instanceof ou?fa(i.elements,s.elements,Pi):i instanceof Lh&&s instanceof Lh?Pi(i.Ae,s.Ae):i instanceof Nh&&s instanceof Nh}(t.transform,e.transform)}class oL{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _d{}function w0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new E0(t.key,Ei.none()):new wu(t.key,t.data,Ei.none());{const n=t.data,i=sn.empty();let s=new yt(At.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new os(t.key,i,new gn(s.toArray()),Ei.none())}}function aL(t,e,n){t instanceof wu?function(s,o,l){const h=s.value.clone(),d=Cv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,o,l){if(!Wc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Cv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(T0(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Ol(t,e,n,i){return t instanceof wu?function(o,l,h,d){if(!Wc(o.precondition,l))return h;const p=o.value.clone(),y=Av(o.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof os?function(o,l,h,d){if(!Wc(o.precondition,l))return h;const p=Av(o.fieldTransforms,d,l),y=l.data;return y.setAll(T0(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return Wc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function lL(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=g0(i.transform,s||null);o!=null&&(n===null&&(n=sn.empty()),n.set(i.field,o))}return n||null}function Pv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&fa(i,s,(o,l)=>sL(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wu extends _d{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends _d{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function T0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Cv(t,e,n){const i=new Map;Ve(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,iL(l,h,n[s]))}return i}function Av(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,nL(o,l,e))}return i}class E0 extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uL extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&aL(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ol(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ol(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=p0();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=w0(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ye.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(n,i)=>Pv(n,i))&&fa(this.baseMutations,e.baseMutations,(n,i)=>Pv(n,i))}}class vg{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return YN}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new vg(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Ne;function fL(t){switch(t){case $.OK:return me(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function I0(t){if(t===void 0)return ar("GRPC error has no .code"),$.UNKNOWN;switch(t){case ht.OK:return $.OK;case ht.CANCELLED:return $.CANCELLED;case ht.UNKNOWN:return $.UNKNOWN;case ht.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case ht.INTERNAL:return $.INTERNAL;case ht.UNAVAILABLE:return $.UNAVAILABLE;case ht.UNAUTHENTICATED:return $.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case ht.NOT_FOUND:return $.NOT_FOUND;case ht.ALREADY_EXISTS:return $.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return $.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case ht.ABORTED:return $.ABORTED;case ht.OUT_OF_RANGE:return $.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return $.UNIMPLEMENTED;case ht.DATA_LOSS:return $.DATA_LOSS;default:return me(39323,{code:t})}}(Ne=ht||(ht={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new Wr([4294967295,4294967295],0);function kv(t){const e=pL().encode(t),n=new VI;return n.update(e),new Uint8Array(n.digest())}function Rv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wr([n,i],0),new Wr([s,o],0)]}class wg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(i<0)throw new yl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wr.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Wr.fromNumber(i)));return s.compare(mL)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kv(e),[i,s]=Rv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new wg(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.ge===0)return;const n=kv(e),[i,s]=Rv(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,s,o);this.be(l)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new yd(ye.min(),s,new et(Ae),lr(),ke())}}class Tu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Tu(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=s}}class S0{constructor(e,n){this.targetId=e,this.Ce=n}}class P0{constructor(e,n,i=xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class xv{constructor(){this.ve=0,this.Fe=Nv(),this.Me=xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),i=ke();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:me(38017,{changeType:o})}}),new Tu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Nv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gL{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.He=Ec(),this.Je=Ec(),this.Ze=new et(Ae)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Up(o))if(i===0){const l=new ue(o.path);this.et(n,l,Ft.newNoDocument(l,ye.min()))}else Ve(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(e),d=h?this.ct(h,e,l):1;if(d!==0){this.it(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Qr(i).toUint8Array()}catch(d){if(d instanceof KI)return Hs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new wg(l,s,o)}catch(d){return Hs(d instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,l)=>{const h=this.ot(l);if(h){if(o.current&&Up(h.target)){const d=new ue(h.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Ft.newNoDocument(d,e))}o.Be&&(n.set(l,o.ke()),o.Ke())}});let i=ke();this.Je.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const s=new yd(e,n,this.Ze,this.je,i);return this.je=lr(),this.He=Ec(),this.Je=Ec(),this.Ze=new et(Ae),s}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new xv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new yt(Ae),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new yt(Ae),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ec(){return new et(ue.comparator)}function Nv(){return new et(ue.comparator)}const _L={asc:"ASCENDING",desc:"DESCENDING"},yL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vL={and:"AND",or:"OR"};class wL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hp(t,e){return t.useProto3Json||dd(e)?e:{value:e}}function bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TL(t,e){return bh(t,e.toTimestamp())}function Ii(t){return Ve(!!t,49232),ye.fromTimestamp(function(n){const i=Kr(n);return new qe(i.seconds,i.nanos)}(t))}function Tg(t,e){return Wp(t,e).canonicalString()}function Wp(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A0(t){const e=Be.fromString(t);return Ve(L0(e),10190,{key:e.toString()}),e}function qp(t,e){return Tg(t.databaseId,e.path)}function Ef(t,e){const n=A0(e);if(n.get(1)!==t.databaseId.projectId)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(R0(n))}function k0(t,e){return Tg(t.databaseId,e)}function EL(t){const e=A0(t);return e.length===4?Be.emptyPath():R0(e)}function $p(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R0(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lv(t,e,n){return{name:qp(t,e),fields:n.value.mapValue.fields}}function IL(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Ve(y===void 0||typeof y=="string",58123),xt.fromBase64String(y||"")):(Ve(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),xt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?$.UNKNOWN:I0(p.code);return new ie(y,p.message||"")}(l);n=new P0(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ef(t,i.document.name),o=Ii(i.document.updateTime),l=i.document.createTime?Ii(i.document.createTime):ye.min(),h=new sn({mapValue:{fields:i.document.fields}}),d=Ft.newFoundDocument(s,o,l,h),p=i.targetIds||[],y=i.removedTargetIds||[];n=new qc(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ef(t,i.document),o=i.readTime?Ii(i.readTime):ye.min(),l=Ft.newNoDocument(s,o),h=i.removedTargetIds||[];n=new qc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ef(t,i.document),o=i.removedTargetIds||[];n=new qc([],o,s,null)}else{if(!("filter"in e))return me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new dL(s,o),h=i.targetId;n=new S0(h,l)}}return n}function SL(t,e){let n;if(e instanceof wu)n={update:Lv(t,e.key,e.value)};else if(e instanceof E0)n={delete:qp(t,e.key)};else if(e instanceof os)n={update:Lv(t,e.key,e.data),updateMask:bL(e.fieldMask)};else{if(!(e instanceof uL))return me(16599,{dt:e.type});n={verify:qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Nh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ga)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ou)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Lh)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw me(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:TL(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)}(t,e.precondition)),n}function PL(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Ii(s.updateTime):Ii(o);return l.isEqual(ye.min())&&(l=Ii(o)),new oL(l,s.transformResults||[])}(n,e))):[]}function CL(t,e){return{documents:[k0(t,e.path)]}}function AL(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=k0(t,s);const o=function(p){if(p.length!==0)return N0(ri.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(y=>function(T){return{field:bo(T.field),direction:xL(T.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Hp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:s}}function kL(t){let e=EL(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ve(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=function(w){const T=x0(w);return T instanceof ri&&s0(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(T=>function(V){return new su(Oo(V.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(w){let T;return T=typeof w=="object"?w.value:w,dd(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(w){const T=!!w.before,M=w.values||[];return new xh(M,T)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const T=!w.before,M=w.values||[];return new xh(M,T)}(n.endAt)),WN(e,s,l,o,h,"F",d,p)}function RL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Oo(n.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Oo(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Oo(n.unaryFilter.field);return ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Oo(n.unaryFilter.field);return ft.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(Oo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ri.create(n.compositeFilter.filters.map(i=>x0(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function xL(t){return _L[t]}function NL(t){return yL[t]}function LL(t){return vL[t]}function bo(t){return{fieldPath:t.canonicalString()}}function Oo(t){return At.fromServerFormat(t.fieldPath)}function N0(t){return t instanceof ft?function(n){if(n.op==="=="){if(vv(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(yv(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vv(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(yv(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:NL(n.op),value:n.value}}}(t):t instanceof ri?function(n){const i=n.getFilters().map(s=>N0(s));return i.length===1?i[0]:{compositeFilter:{op:LL(n.op),filters:i}}}(t):me(54877,{filter:t})}function bL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function b0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,i,s,o=ye.min(),l=ye.min(),h=xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.yt=e}}function DL(t){const e=kL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.Sn=new VL}addToCollectionParentIndex(e,n){return this.Sn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Zr.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class VL{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new yt(Be.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new yt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O0=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(O0,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _a(0)}static ar(){return new _a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",FL=1048576;function Dv([t,e],[n,i]){const s=Ae(t,n);return s===0?Ae(e,i):s}class zL{constructor(e){this.Pr=e,this.buffer=new yt(Dv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Dv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UL{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){re(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ca(n)?re(Ov,"Ignoring IndexedDB error during garbage collection: ",n):await Pa(n)}await this.Ar(3e5)})}}class BL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return G.resolve(hd.ce);const i=new zL(n);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(bv)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,s,o,l,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(i=w,h=Date.now(),this.removeTargets(e,i,n))).next(w=>(o=w,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(p=Date.now(),No()<=Ce.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:w})))}}function jL(t,e){return new BL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.changes=new Js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Ol(i.mutation,s,gn.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const s=ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=_l();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=lr();const l=bl(),h=function(){return bl()}();return n.forEach((d,p)=>{const y=i.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof os)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),Ol(y.mutation,p,y.mutation.getFieldMask(),qe.now())):l.set(p.key,gn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>h.set(p,new WL(y,l.get(p)??null))),h))}recalculateAndSaveOverlays(e,n){const i=bl();let s=new et((l,h)=>l-h),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=i.get(d)||gn.empty();y=h.applyToLocalView(p,y),i.set(d,y);const w=(s.get(h.batchId)||ke()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,w=p0();y.forEach(T=>{if(!o.has(T)){const M=w0(n.get(T),i.get(T));M!==null&&w.set(T,M),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return G.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return qN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):G.resolve(ks());let h=tu,d=o;return l.next(p=>G.forEach(p,(y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{d=d.insert(y,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,ke())).next(y=>({batchId:h,changes:f0(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(i=>{let s=_l();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=_l();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const p=function(w,T){return new Aa(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(y=>{y.forEach((w,T)=>{l=l.insert(w,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Ft.newInvalidDocument(y)))});let h=_l();return l.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Ol(y.mutation,p,gn.empty(),qe.now()),md(n,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return G.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ii(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:DL(s.bundledQuery),readTime:Ii(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.overlays=new et(ue.comparator),this.Lr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ks();return G.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.bt(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const s=ks(),o=n.length+1,l=new ue(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new et((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=ks(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=ks(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return G.resolve(h)}bt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new hL(n,i));let o=this.Lr.get(n);o===void 0&&(o=ke(),this.Lr.set(n,o)),this.Lr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.kr=new yt(Et.Kr),this.qr=new yt(Et.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Et(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new Et(e,n))}Qr(e,n){e.forEach(i=>this.removeReference(i,n))}Gr(e){const n=new ue(new Be([])),i=new Et(n,e),s=new Et(n,e+1),o=[];return this.qr.forEachInRange([i,s],l=>{this.Wr(l),o.push(l.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ue(new Be([])),i=new Et(n,e),s=new Et(n,e+1);let o=ke();return this.qr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new Et(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Et{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ue.comparator(e.key,n.key)||Ae(e.Hr,n.Hr)}static Ur(e,n){return Ae(e.Hr,n.Hr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new yt(Et.Kr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new cL(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Jr=this.Jr.add(new Et(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,n){return G.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?dg:this.Yn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],l=>{const h=this.Zr(l.Hr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new yt(Ae);return n.forEach(s=>{const o=new Et(s,0),l=new Et(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],h=>{i=i.add(h.Hr)})}),G.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ue.isDocumentKey(o)||(o=o.child(""));const l=new Et(new ue(o),0);let h=new yt(Ae);return this.Jr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Hr)),!0)},l),G.resolve(this.Yr(h))}Yr(e){const n=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ve(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return G.forEach(n.mutations,s=>{const o=new Et(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,n){const i=new Et(n,0),s=this.Jr.firstAfterOrEqual(i);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.ti=e,this.docs=function(){return new et(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let i=lr();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Ft.newInvalidDocument(s))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=lr();const l=n.path,h=new ue(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||TN(wN(y),i)<=0||(s.has(y.key)||md(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,s){me(9500)}ni(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new YL(this)}getSize(e){return G.resolve(this.size)}}class YL extends HL{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.persistence=e,this.ri=new Js(n=>mg(n),gg),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.ii=0,this.si=new Eg,this.targetCount=0,this.oi=_a._r()}forEachTarget(e,n){return this.ri.forEach((i,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),G.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new _a(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.lr(n),G.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.ri.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this._i={},this.overlays={},this.ai=new hd(0),this.ui=!1,this.ui=!0,this.ci=new ZL,this.referenceDelegate=e(this),this.li=new JL(this),this.indexManager=new ML,this.remoteDocumentCache=function(s){return new QL(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new OL(n),this.Pi=new $L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new KL(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){re("MemoryPersistence","Starting transaction:",e);const s=new XL(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,n){return G.or(Object.values(this._i).map(i=>()=>i.containsKey(e,n)))}}class XL extends IN{constructor(e){super(),this.currentSequenceNumber=e}}class Ig{constructor(e){this.persistence=e,this.Ri=new Eg,this.Ai=null}static Vi(e){return new Ig(e)}get di(){if(this.Ai)return this.Ai;throw me(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,i=>{const s=ue.fromPath(i);return this.mi(e,s).next(o=>{o||n.removeEntry(s,ye.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Oh{constructor(e,n){this.persistence=e,this.fi=new Js(i=>CN(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=jL(this,n)}static Vi(e,n){return new Oh(e,n)}Ti(){}Ii(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}pr(e){let n=0;return this.mr(e,i=>{n++}).next(()=>n)}mr(e,n){return G.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?G.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,l=>this.wr(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ye.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jc(e.data.value)),n}wr(e,n,i){return G.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return G.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=s}static Es(e,n){let i=ke(),s=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Sg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return T1()?8:SN(Ut())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.gs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ps(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new eb;return this.ys(e,n,l).next(h=>{if(o.result=h,this.As)return this.ws(e,n,l,h.size)})}).next(()=>o.result)}ws(e,n,i,s){return i.documentReadCount<this.Vs?(No()<=Ce.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(No()<=Ce.DEBUG&&re("QueryEngine","Query:",Lo(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(No()<=Ce.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(n))):G.resolve())}gs(e,n){if(Iv(n))return G.resolve(null);let i=Ti(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jp(n,null,"F"),i=Ti(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=ke(...o);return this.fs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const p=this.bs(n,h);return this.Ss(n,p,l,d.readTime)?this.gs(e,jp(n,null,"F")):this.Ds(e,p,n,d)}))})))}ps(e,n,i,s){return Iv(n)||s.isEqual(ye.min())?G.resolve(null):this.fs.getDocuments(e,i).next(o=>{const l=this.bs(n,o);return this.Ss(n,l,i,s)?G.resolve(null):(No()<=Ce.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lo(n)),this.Ds(e,l,n,vN(s,tu)).next(h=>h))})}bs(e,n){let i=new yt(h0(e));return n.forEach((s,o)=>{md(e,o)&&(i=i.add(o))}),i}Ss(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,n,i){return No()<=Ce.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.fs.getDocumentsMatchingQuery(e,n,Zr.min(),i)}Ds(e,n,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="LocalStore",nb=3e8;class ib{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new et(Ae),this.Fs=new Js(o=>mg(o),gg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qL(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function rb(t,e,n,i){return new ib(t,e,n,i)}async function M0(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Os(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=ke();for(const p of s){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next(p=>({Ns:p,removedBatchIds:l,addedBatchIds:h}))})})}function sb(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const w=p.batch,T=w.keys();let M=G.resolve();return T.forEach(V=>{M=M.next(()=>y.getEntry(d,V)).next(U=>{const Z=p.docVersions.get(V);Ve(Z!==null,48541),U.version.compareTo(Z)<0&&(w.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),M.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=ke();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function V0(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function ob(t,e){const n=ve(t),i=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const h=[];e.targetChanges.forEach((y,w)=>{const T=s.get(w);if(!T)return;h.push(n.li.removeMatchingKeys(o,y.removedDocuments,w).next(()=>n.li.addMatchingKeys(o,y.addedDocuments,w)));let M=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?M=M.withResumeToken(xt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),s=s.insert(w,M),function(U,Z,x){return U.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=nb?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(T,M,y)&&h.push(n.li.updateTargetData(o,M))});let d=lr(),p=ke();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(ab(o,l,e.documentUpdates).next(y=>{d=y.Bs,p=y.Ls})),!i.isEqual(ye.min())){const y=n.li.getLastRemoteSnapshotVersion(o).next(w=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return G.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(n.vs=s,o))}function ab(t,e,n){let i=ke(),s=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=lr();return n.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ye.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):re(Pg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Bs:l,Ls:s}})}function lb(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=dg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ub(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.li.getTargetData(i,e).next(o=>o?(s=o,G.resolve(s)):n.li.allocateTargetId(i).next(l=>(s=new br(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i})}async function Gp(t,e,n){const i=ve(t),s=i.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ca(l))throw l;re(Pg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Mv(t,e,n){const i=ve(t);let s=ye.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const w=ve(d),T=w.Fs.get(y);return T!==void 0?G.resolve(w.vs.get(T)):w.li.getTargetData(p,y)}(i,l,Ti(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:ye.min(),n?o:ke())).next(h=>(cb(i,ZN(e),h),{documents:h,ks:o})))}function cb(t,e,n){let i=t.Ms.get(e)||ye.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Ms.set(e,i)}class Vv{constructor(){this.activeTargetIds=eL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hb{constructor(){this.vo=new Vv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Vv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class zv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){re(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){re(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Zp(){return Ic===null?Ic=function(){return 268435456+Math.round(2147483648*Math.random())}():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="RestConnection",fb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class pb{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===kh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,o){const l=Zp(),h=this.Qo(e,n.toUriEncodedString());re(If,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,s,o);const{host:p}=new URL(h),y=Ks(p);return this.zo(e,h,d,i,y).then(w=>(re(If,`Received RPC '${e}' ${l}: `,w),w),w=>{throw Hs(If,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",i),w})}jo(e,n,i,s,o,l){return this.Wo(e,n,i,s,o)}Go(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,n){const i=fb[e];let s=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection",ll=(t,e,n)=>{t.listen(e,i=>{try{n(i)}catch(s){setTimeout(()=>{throw s},0)}})};class na extends pb{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!na.c_){const e=BI();ll(e,UI.STAT_EVENT,n=>{n.stat===Dp.PROXY?re(Dt,"STAT_EVENT: detected buffering proxy"):n.stat===Dp.NOPROXY&&re(Dt,"STAT_EVENT: detected no buffering proxy")}),na.c_=!0}}zo(e,n,i,s,o){const l=Zp();return new Promise((h,d)=>{const p=new FI;p.setWithCredentials(!0),p.listenOnce(zI.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Bc.NO_ERROR:const w=p.getResponseJson();re(Dt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Bc.TIMEOUT:re(Dt,`RPC '${e}' ${l} timed out`),d(new ie($.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const T=p.getStatus();if(re(Dt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const V=M==null?void 0:M.error;if(V&&V.status&&V.message){const U=function(x){const C=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(C)>=0?C:$.UNKNOWN}(V.status);d(new ie(U,V.message))}else d(new ie($.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ie($.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{re(Dt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);re(Dt,`RPC '${e}' ${l} sending request:`,s),p.send(n,"POST",y,i,15)})}T_(e,n,i){const s=Zp(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const p=o.join("");re(Dt,`Creating RPC '${e}' stream ${s}: ${p}`,h);const y=l.createWebChannel(p,h);this.I_(y);let w=!1,T=!1;const M=new mb({Ho:V=>{T?re(Dt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(w||(re(Dt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),re(Dt,`RPC '${e}' stream ${s} sending:`,V),y.send(V))},Jo:()=>y.close()});return ll(y,gl.EventType.OPEN,()=>{T||(re(Dt,`RPC '${e}' stream ${s} transport opened.`),M.i_())}),ll(y,gl.EventType.CLOSE,()=>{T||(T=!0,re(Dt,`RPC '${e}' stream ${s} transport closed`),M.o_(),this.E_(y))}),ll(y,gl.EventType.ERROR,V=>{T||(T=!0,Hs(Dt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),M.o_(new ie($.UNAVAILABLE,"The operation could not be completed")))}),ll(y,gl.EventType.MESSAGE,V=>{var U;if(!T){const Z=V.data[0];Ve(!!Z,16349);const x=Z,C=(x==null?void 0:x.error)||((U=x[0])==null?void 0:U.error);if(C){re(Dt,`RPC '${e}' stream ${s} received error:`,C);const D=C.status;let W=function(S){const I=ht[S];if(I!==void 0)return I0(I)}(D),Q=C.message;D==="NOT_FOUND"&&Q.includes("database")&&Q.includes("does not exist")&&Q.includes(this.databaseId.database)&&Hs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),W===void 0&&(W=$.INTERNAL,Q="Unknown error status: "+D+" with message "+C.message),T=!0,M.o_(new ie(W,Q)),y.close()}else re(Dt,`RPC '${e}' stream ${s} received:`,Z),M.__(Z)}}),na.u_(),setTimeout(()=>{M.s_()},0),M}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){return new na(t)}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return new wL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */na.c_=!1;class F0{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="PersistentStream";class z0{constructor(e,n,i,s,o,l,h,d){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new F0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new ie($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(Uv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(re(Uv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _b extends z0{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IL(this.serializer,e),i=function(o){if(!("targetChange"in o))return ye.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ye.min():l.readTime?Ii(l.readTime):ye.min()}(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=$p(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=Up(d)?{documents:CL(o,d)}:{query:AL(o,d).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=C0(o,l.resumeToken);const p=Hp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(ye.min())>0){h.readTime=bh(o,l.snapshotVersion.toTimestamp());const p=Hp(o,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=RL(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=$p(this.serializer),n.removeTarget=e,this.K_(n)}}class yb extends z0{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PL(e.writeResults,e.commitTime),i=Ii(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=$p(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>SL(this.serializer,i))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class wb extends vb{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,Wp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie($.UNKNOWN,o.toString())})}jo(e,n,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.jo(e,Wp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie($.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Tb(t,e,n,i){return new wb(t,e,n,i)}class Eb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class Ib{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(l=>{i.enqueueAndForget(async()=>{Xs(this)&&(re(Ws,"Restarting streams for network reachability change."),await async function(d){const p=ve(d);p.Ea.add(4),await Eu(p),p.Va.set("Unknown"),p.Ea.delete(4),await wd(p)}(this))})}),this.Va=new Eb(i,s)}}async function wd(t){if(Xs(t))for(const e of t.Ra)await e(!0)}async function Eu(t){for(const e of t.Ra)await e(!1)}function U0(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Rg(n)?kg(n):ka(n).O_()&&Ag(n,e))}function Cg(t,e){const n=ve(t),i=ka(n);n.Ia.delete(e),i.O_()&&B0(n,e),n.Ia.size===0&&(i.O_()?i.L_():Xs(n)&&n.Va.set("Unknown"))}function Ag(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).Z_(e)}function B0(t,e){t.da.$e(e),ka(t).X_(e)}function kg(t){t.da=new gL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.Va.ua()}function Rg(t){return Xs(t)&&!ka(t).x_()&&t.Ia.size>0}function Xs(t){return ve(t).Ea.size===0}function j0(t){t.da=void 0}async function Sb(t){t.Va.set("Online")}async function Pb(t){t.Ia.forEach((e,n)=>{Ag(t,e)})}async function Cb(t,e){j0(t),Rg(t)?(t.Va.ha(e),kg(t)):t.Va.set("Unknown")}async function Ab(t,e,n){if(t.Va.set("Online"),e instanceof P0&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.da.removeTarget(h))}(t,e)}catch(i){re(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dh(t,i)}else if(e instanceof qc?t.da.Xe(e):e instanceof S0?t.da.st(e):t.da.tt(e),!n.isEqual(ye.min()))try{const i=await V0(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.da.Tt(l);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(xt.EMPTY_BYTE_STRING,y.snapshotVersion)),B0(o,d);const w=new br(y.target,d,p,y.sequenceNumber);Ag(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){re(Ws,"Failed to raise snapshot:",i),await Dh(t,i)}}async function Dh(t,e,n){if(!Ca(e))throw e;t.Ea.add(1),await Eu(t),t.Va.set("Offline"),n||(n=()=>V0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(Ws,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wd(t)})}function H0(t,e){return e().catch(n=>Dh(t,n,e))}async function Td(t){const e=ve(t),n=Jr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dg;for(;kb(e);)try{const s=await lb(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,Rb(e,s)}catch(s){await Dh(e,s)}W0(e)&&q0(e)}function kb(t){return Xs(t)&&t.Ta.length<10}function Rb(t,e){t.Ta.push(e);const n=Jr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function W0(t){return Xs(t)&&!Jr(t).x_()&&t.Ta.length>0}function q0(t){Jr(t).start()}async function xb(t){Jr(t).ra()}async function Nb(t){const e=Jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Lb(t,e,n){const i=t.Ta.shift(),s=vg.from(i,e,n);await H0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Td(t)}async function bb(t,e){e&&Jr(t).Y_&&await async function(i,s){if(function(l){return fL(l)&&l!==$.ABORTED}(s.code)){const o=i.Ta.shift();Jr(i).B_(),await H0(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Td(i)}}(t,e),W0(t)&&q0(t)}async function Bv(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),re(Ws,"RemoteStore received new credentials");const i=Xs(n);n.Ea.add(3),await Eu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wd(n)}async function Ob(t,e){const n=ve(t);e?(n.Ea.delete(2),await wd(n)):e||(n.Ea.add(2),await Eu(n),n.Va.set("Unknown"))}function ka(t){return t.ma||(t.ma=function(n,i,s){const o=ve(n);return o.sa(),new _b(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Sb.bind(null,t),Yo:Pb.bind(null,t),t_:Cb.bind(null,t),J_:Ab.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Rg(t)?kg(t):t.Va.set("Unknown")):(await t.ma.stop(),j0(t))})),t.ma}function Jr(t){return t.fa||(t.fa=function(n,i,s){const o=ve(n);return o.sa(),new yb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:xb.bind(null,t),t_:bb.bind(null,t),ta:Nb.bind(null,t),na:Lb.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Td(t)):(await t.fa.stop(),t.Ta.length>0&&(re(Ws,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new xg(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ng(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Ca(t))return new ie($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{static emptySet(e){return new ia(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ue.comparator(n.key,i.key):(n,i)=>ue.comparator(n.key,i.key),this.keyedMap=_l(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ia;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.ga=new et(ue.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ya{constructor(e,n,i,s,o,l,h,d,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ya(e,n,ia.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Mb{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=ve(n),o=s.queries;s.queries=Hv(),o.forEach((l,h)=>{for(const d of h.ba)d.onError(i)})})(this,new ie($.ABORTED,"Firestore shutting down"))}}function Hv(){return new Js(t=>c0(t),pd)}async function Vb(t,e){const n=ve(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new Db,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Ng(l,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Lg(n)}async function Fb(t,e){const n=ve(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function zb(t,e){const n=ve(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.ba)h.Fa(s)&&(i=!0);l.wa=s}}i&&Lg(n)}function Ub(t,e,n){const i=ve(t),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(n);i.queries.delete(e)}function Lg(t){t.Ca.forEach(e=>{e.next()})}var Kp,Wv;(Wv=Kp||(Kp={})).Ma="default",Wv.Cache="cache";class Bb{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ya(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class G0{constructor(e){this.key=e}}class jb{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ke(),this.mutatedKeys=ke(),this.eu=h0(e),this.tu=new ia(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new jv,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,w)=>{const T=s.get(y),M=md(this.query,w)?w:null,V=!!T&&this.mutatedKeys.has(T.key),U=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let Z=!1;T&&M?T.data.isEqual(M.data)?V!==U&&(i.track({type:3,doc:M}),Z=!0):this.su(T,M)||(i.track({type:2,doc:M}),Z=!0,(d&&this.eu(M,d)>0||p&&this.eu(M,p)<0)&&(h=!0)):!T&&M?(i.track({type:0,doc:M}),Z=!0):T&&!M&&(i.track({type:1,doc:T}),Z=!0,(d||p)&&(h=!0)),Z&&(M?(l=l.add(M),o=U?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Ss:h,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((y,w)=>function(M,V){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Vt:Z})}};return U(M)-U(V)}(y.type,w.type)||this.eu(y.doc,w.doc)),this.ou(i),s=s??!1;const h=n&&!s?this._u():[],d=this.Ya.size===0&&this.current&&!s?1:0,p=d!==this.Xa;return this.Xa=d,l.length!==0||p?{snapshot:new ya(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ke(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new G0(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new $0(i))}),n}cu(e){this.Za=e.ks,this.Ya=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const bg="SyncEngine";class Hb{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Wb{constructor(e){this.key=e,this.hu=!1}}class qb{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Js(h=>c0(h),pd),this.Iu=new Map,this.Eu=new Set,this.Ru=new et(ue.comparator),this.Au=new Map,this.Vu=new Eg,this.du={},this.mu=new Map,this.fu=_a.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $b(t,e,n=!0){const i=X0(t);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Z0(i,e,n,!0),s}async function Gb(t,e){const n=X0(t);await Z0(n,e,!0,!1)}async function Z0(t,e,n,i){const s=await ub(t.localStore,Ti(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await Zb(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&U0(t.remoteStore,s),h}async function Zb(t,e,n,i,s){t.pu=(w,T,M)=>async function(U,Z,x,C){let D=Z.view.ru(x);D.Ss&&(D=await Mv(U.localStore,Z.query,!1).then(({documents:S})=>Z.view.ru(S,D)));const W=C&&C.targetChanges.get(Z.targetId),Q=C&&C.targetMismatches.get(Z.targetId)!=null,X=Z.view.applyChanges(D,U.isPrimaryClient,W,Q);return $v(U,Z.targetId,X.au),X.snapshot}(t,w,T,M);const o=await Mv(t.localStore,e,!0),l=new jb(e,o.ks),h=l.ru(o.documents),d=Tu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),p=l.applyChanges(h,t.isPrimaryClient,d);$v(t,n,p.au);const y=new Hb(e,n,l);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function Kb(t,e,n){const i=ve(t),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(l=>!pd(l,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Gp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Cg(i.remoteStore,s.targetId),Qp(i,s.targetId)}).catch(Pa)):(Qp(i,s.targetId),await Gp(i.localStore,s.targetId,!0))}async function Qb(t,e){const n=ve(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cg(n.remoteStore,i.targetId))}async function Yb(t,e,n){const i=rO(t);try{const s=await function(l,h){const d=ve(l),p=qe.now(),y=h.reduce((M,V)=>M.add(V.key),ke());let w,T;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let V=lr(),U=ke();return d.xs.getEntries(M,y).next(Z=>{V=Z,V.forEach((x,C)=>{C.isValidDocument()||(U=U.add(x))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,V)).next(Z=>{w=Z;const x=[];for(const C of h){const D=lL(C,w.get(C.key).overlayedDocument);D!=null&&x.push(new os(C.key,D,n0(D.value.mapValue),Ei.exists(!0)))}return d.mutationQueue.addMutationBatch(M,p,x,h)}).next(Z=>{T=Z;const x=Z.applyToLocalDocumentSet(w,U);return d.documentOverlayCache.saveOverlays(M,Z.batchId,x)})}).then(()=>({batchId:T.batchId,changes:f0(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let p=l.du[l.currentUser.toKey()];p||(p=new et(Ae)),p=p.insert(h,d),l.du[l.currentUser.toKey()]=p}(i,s.batchId,n),await Iu(i,s.changes),await Td(i.remoteStore)}catch(s){const o=Ng(s,"Failed to persist write");n.reject(o)}}async function K0(t,e){const n=ve(t);try{const i=await ob(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Au.get(o);l&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ve(l.hu,14607):s.removedDocuments.size>0&&(Ve(l.hu,42227),l.hu=!1))}),await Iu(n,i,e)}catch(i){await Pa(i)}}function qv(t,e,n){const i=ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ve(l);d.onlineState=h;let p=!1;d.queries.forEach((y,w)=>{for(const T of w.ba)T.va(h)&&(p=!0)}),p&&Lg(d)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Jb(t,e,n){const i=ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),o=s&&s.key;if(o){let l=new et(ue.comparator);l=l.insert(o,Ft.newNoDocument(o,ye.min()));const h=ke().add(o),d=new yd(ye.min(),new Map,new et(Ae),l,h);await K0(i,d),i.Ru=i.Ru.remove(o),i.Au.delete(e),Og(i)}else await Gp(i.localStore,e,!1).then(()=>Qp(i,e,n)).catch(Pa)}async function Xb(t,e){const n=ve(t),i=e.batch.batchId;try{const s=await sb(n.localStore,e);Y0(n,i,null),Q0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Iu(n,s)}catch(s){await Pa(s)}}async function eO(t,e,n){const i=ve(t);try{const s=await function(l,h){const d=ve(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(w=>(Ve(w!==null,37113),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,e);Y0(i,e,n),Q0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Iu(i,s)}catch(s){await Pa(s)}}function Q0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Y0(t,e,n){const i=ve(t);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(i=>{t.Vu.containsKey(i)||J0(t,i)})}function J0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Cg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Og(t))}function $v(t,e,n){for(const i of n)i instanceof $0?(t.Vu.addReference(i.key,e),tO(t,i)):i instanceof G0?(re(bg,"Document no longer in limbo: "+i.key),t.Vu.removeReference(i.key,e),t.Vu.containsKey(i.key)||J0(t,i.key)):me(19791,{wu:i})}function tO(t,e){const n=e.key,i=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(i)||(re(bg,"New document in limbo: "+n),t.Eu.add(i),Og(t))}function Og(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(Be.fromString(e)),i=t.fu.next();t.Au.set(i,new Wb(n)),t.Ru=t.Ru.insert(n,i),U0(t.remoteStore,new br(Ti(_g(n.path)),i,"TargetPurposeLimboResolution",hd.ce))}}async function Iu(t,e,n){const i=ve(t),s=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{l.push(i.pu(d,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const w=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){s.push(p);const w=Sg.Es(d.targetId,p);o.push(w)}}))}),await Promise.all(l),i.Pu.J_(s),await async function(d,p){const y=ve(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>G.forEach(p,T=>G.forEach(T.Ts,M=>y.persistence.referenceDelegate.addReference(w,T.targetId,M)).next(()=>G.forEach(T.Is,M=>y.persistence.referenceDelegate.removeReference(w,T.targetId,M)))))}catch(w){if(!Ca(w))throw w;re(Pg,"Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const M=y.vs.get(T),V=M.snapshotVersion,U=M.withLastLimboFreeSnapshotVersion(V);y.vs=y.vs.insert(T,U)}}}(i.localStore,o))}async function nO(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){re(bg,"User change. New user:",e.toKey());const i=await M0(n.localStore,e);n.currentUser=e,function(o,l){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ie($.CANCELLED,l))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Iu(n,i.Ns)}}function iO(t,e){const n=ve(t),i=n.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let s=ke();const o=n.Iu.get(e);if(!o)return s;for(const l of o){const h=n.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}function X0(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jb.bind(null,e),e.Pu.J_=zb.bind(null,e.eventManager),e.Pu.yu=Ub.bind(null,e.eventManager),e}function rO(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eO.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rb(this.persistence,new tb,e.initialUser,this.serializer)}Cu(e){return new D0(Ig.Vi,this.serializer)}Du(e){return new hb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class sO extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof Oh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new UL(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new D0(i=>Oh.Vi(i,n),this.serializer)}}class Yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nO.bind(null,this.syncEngine),await Ob(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mb}()}createDatastore(e){const n=vd(e.databaseInfo.databaseId),i=gb(e.databaseInfo);return Tb(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new Ib(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>qv(this.syncEngine,n,0),function(){return zv.v()?new zv:new db}())}createSyncEngine(e,n){return function(s,o,l,h,d,p,y){const w=new qb(s,o,l,h,d,p);return y&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ve(s);re(Ws,"RemoteStore shutting down."),o.Ea.add(5),await Eu(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yp.provider={build:()=>new Yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class aO{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=hg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{re(Xr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(re(Xr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ng(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Pf(t,e){t.asyncQueue.verifyOperationInProgress(),re(Xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await M0(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lO(t);re(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Bv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Bv(e.remoteStore,s)),t._onlineComponents=e}async function lO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Xr,"Using user provided OfflineComponentProvider");try{await Pf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hs("Error using user provided cache. Falling back to memory cache: "+n),await Pf(t,new Mh)}}else re(Xr,"Using default OfflineComponentProvider"),await Pf(t,new sO(void 0));return t._offlineComponents}async function eS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Xr,"Using user provided OnlineComponentProvider"),await Gv(t,t._uninitializedComponentsProvider._online)):(re(Xr,"Using default OnlineComponentProvider"),await Gv(t,new Yp))),t._onlineComponents}function uO(t){return eS(t).then(e=>e.syncEngine)}async function Zv(t){const e=await eS(t),n=e.eventManager;return n.onListen=$b.bind(null,e.syncEngine),n.onUnlisten=Kb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Qb.bind(null,e.syncEngine),n}function cO(t,e,n,i){const s=new oO(i),o=new Bb(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Vb(await Zv(t),o)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Fb(await Zv(t),o))}}function hO(t,e){const n=new Ls;return t.asyncQueue.enqueueAndForget(async()=>Yb(await uO(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="ComponentProvider",Kv=new Map;function fO(t,e,n,i,s){return new RN(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,tS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firestore.googleapis.com",Qv=!0;class Yv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nS,this.ssl=Qv}else this.host=e.host,this.ssl=e.ssl??Qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FL)throw new ie($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lN;switch(i.type){case"firstParty":return new dN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Kv.get(n);i&&(re(dO,"Removing Datastore"),Kv.delete(n),i.terminate())}(this),Promise.resolve()}}function pO(t,e,n,i={}){var p;t=bs(t,Ed);const s=Ks(e),o=t._getSettings(),l={...o,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;s&&(Ym(`https://${h}`),Jm("Firestore",!0)),o.host!==nS&&o.host!==h&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:s,emulatorOptions:i};if(!rr(d,l)&&(t._setSettings(d),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=Mt.MOCK_USER;else{y=ZE(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ie($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Mt(T)}t._authCredentials=new uN(new WI(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(vu(n,mt._jsonSchema))return new mt(e,i||null,new ue(Be.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:pt("string",mt._jsonSchemaVersion),referencePath:pt("string")};class qr extends eo{constructor(e,n,i){super(e,n,_g(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new ue(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function Jv(t,e,...n){if(t=Ke(t),qI("collection","path",e),t instanceof Ed){const i=Be.fromString(e,...n);return uv(i),new qr(t,null,i)}{if(!(t instanceof mt||t instanceof qr))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return uv(i),new qr(t.firestore,null,i)}}function $c(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=hg.newId()),qI("doc","path",e),t instanceof Ed){const i=Be.fromString(e,...n);return lv(i),new mt(t,null,new ue(i))}{if(!(t instanceof mt||t instanceof qr))throw new ie($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return lv(i),new mt(t.firestore,t instanceof qr?t.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="AsyncQueue";class ew{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new F0(this,"async_queue_retry"),this._c=()=>{const i=Sf();i&&re(Xv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ls;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ca(e))throw e;re(Xv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",tw(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xg.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:tw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function tw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class au extends Ed{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new ew,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ew(e),this._firestoreClient=void 0,await e}}}function mO(t,e){const n=typeof t=="object"?t:od(),i=typeof t=="string"?t:kh,s=is(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=qE("firestore");o&&pO(s,...o)}return s}function iS(t){if(t._terminated)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gO(t),t._firestoreClient}function gO(t){var i,s,o,l;const e=t._freezeSettings(),n=fO(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(xt.fromBase64String(e))}catch(n){throw new ie($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:pt("string",Ln._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(vu(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:pt("string",Si._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ti(e.vectorValues);throw new ie($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ti._jsonSchemaVersion="firestore/vectorValue/1.0",ti._jsonSchema={type:pt("string",ti._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=/^__.*__$/;class yO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class rS{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{dataSource:t})}}class Sd{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Sd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(sS(this.dataSource)&&_O.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||vd(e)}createContext(e,n,i,s=!1){return new Sd({dataSource:e,methodName:n,targetDoc:i,path:At.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mg(t){const e=t._freezeSettings(),n=vd(t._databaseId);return new vO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wO(t,e,n,i,s,o={}){const l=t.createContext(o.merge||o.mergeFields?2:0,e,n,s);Fg("Data must be an object, but it was:",l,i);const h=oS(i,l);let d,p;if(o.merge)d=new gn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const w of o.mergeFields){const T=va(e,w,n);if(!l.contains(T))throw new ie($.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);uS(y,T)||y.push(T)}d=new gn(y),p=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,p=l.fieldTransforms;return new yO(new sn(h),d,p)}class Pd extends Id{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pd}}function TO(t,e,n){return new Sd({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vg extends Id{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=TO(this,e,!0),i=this.Ac.map(o=>Ra(o,n)),s=new ga(i);return new rL(e.path,s)}isEqual(e){return e instanceof Vg&&rr(this.Ac,e.Ac)}}function EO(t,e,n,i){const s=t.createContext(1,e,n);Fg("Data must be an object, but it was:",s,i);const o=[],l=sn.empty();ss(i,(d,p)=>{const y=lS(e,d,n);p=Ke(p);const w=s.childContextForFieldPath(y);if(p instanceof Pd)o.push(y);else{const T=Ra(p,w);T!=null&&(o.push(y),l.set(y,T))}});const h=new gn(o);return new rS(l,h,s.fieldTransforms)}function IO(t,e,n,i,s,o){const l=t.createContext(1,e,n),h=[va(e,i,n)],d=[s];if(o.length%2!=0)throw new ie($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(va(e,o[T])),d.push(o[T+1]);const p=[],y=sn.empty();for(let T=h.length-1;T>=0;--T)if(!uS(p,h[T])){const M=h[T];let V=d[T];V=Ke(V);const U=l.childContextForFieldPath(M);if(V instanceof Pd)p.push(M);else{const Z=Ra(V,U);Z!=null&&(p.push(M),y.set(M,Z))}}const w=new gn(p);return new rS(y,w,l.fieldTransforms)}function SO(t,e,n,i=!1){return Ra(n,t.createContext(i?4:3,e))}function Ra(t,e){if(aS(t=Ke(t)))return Fg("Unsupported field value:",e,t),oS(t,e);if(t instanceof Id)return function(i,s){if(!sS(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=Ra(h,s.childContextForArray(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tL(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=qe.fromDate(i);return{timestampValue:bh(s.serializer,o)}}if(i instanceof qe){const o=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bh(s.serializer,o)}}if(i instanceof Si)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ln)return{bytesValue:C0(s.serializer,i._byteString)};if(i instanceof mt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ti)return function(l,h){const d=l instanceof ti?l.toArray():l;return{mapValue:{fields:{[e0]:{stringValue:t0},[Rh]:{arrayValue:{values:d.map(y=>{if(typeof y!="number")throw h.createError("VectorValues must only contain numeric values.");return yg(h.serializer,y)})}}}}}}(i,s);if(b0(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${cd(i)}`)}(t,e)}function oS(t,e){const n={};return ZI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(i,s)=>{const o=Ra(s,e.childContextForField(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function aS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Si||t instanceof Ln||t instanceof mt||t instanceof Id||t instanceof ti||b0(t))}function Fg(t,e,n){if(!aS(n)||!$I(n)){const i=cd(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function va(t,e,n){if((e=Ke(e))instanceof Dg)return e._internalPath;if(typeof e=="string")return lS(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const PO=new RegExp("[~\\*/\\[\\]]");function lS(t,e,n){if(e.search(PO)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dg(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ie($.INVALID_ARGUMENT,h+t+d)}function uS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ss(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,s,o;const n=(o=(s=(i=e.fields)==null?void 0:i[Rh].arrayValue)==null?void 0:s.values)==null?void 0:o.map(l=>st(l.doubleValue));return new ti(n)}convertGeoPoint(e){return new Si(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=fd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Ve(L0(i),9688,{name:e});const s=new iu(i.get(1),i.get(3)),o=new ue(i.popFirst(5));return s.isEqual(n)||ar(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function nw(...t){return new Vg("arrayUnion",t)}const iw="@firebase/firestore",rw="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(va("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AO extends hS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class dS extends zg{}function RO(t,e,...n){let i=[];e instanceof zg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Bg).length,h=o.filter(d=>d instanceof Ug).length;if(l>1||l>0&&h>0)throw new ie($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Ug extends dS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ug(e,n,i)}_apply(e){const n=this._parse(e);return fS(e._query,n),new eo(e.firestore,e.converter,Bp(e._query,n))}_parse(e){const n=Mg(e.firestore);return function(o,l,h,d,p,y,w){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ie($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){aw(w,y);const V=[];for(const U of w)V.push(ow(d,o,U));T={arrayValue:{values:V}}}else T=ow(d,o,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||aw(w,y),T=SO(h,l,w,y==="in"||y==="not-in");return ft.create(p,y,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Bg extends zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ri.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)fS(l,d),l=Bp(l,d)}(e._query,n),new eo(e.firestore,e.converter,Bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jg extends dS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(o,l)}(e._query,this._field,this._direction);return new eo(e.firestore,e.converter,GN(e._query,n))}}function xO(t,e="asc"){const n=e,i=va("orderBy",t);return jg._create(i,n)}function ow(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new ie($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u0(e)&&n.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ue.isDocumentKey(i))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _v(t,new ue(i))}if(n instanceof mt)return _v(t,n._key);throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function aw(t,e){if(!Array.isArray(t)||t.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fS(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends hS{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(va("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:pt("string",Os._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class Gc extends Os{data(e={}){return super.data(e)}}class ra{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Gc(this._firestore,this._userDataWriter,i.key,i,new vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Gc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new vl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Gc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new vl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:LO(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:pt("string",ra._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};function Cf(t,e,n,...i){t=bs(t,mt);const s=bs(t.firestore,au),o=Mg(s);let l;return l=typeof(e=Ke(e))=="string"||e instanceof Dg?IO(o,"updateDoc",t._key,e,n,i):EO(o,"updateDoc",t._key,e),pS(s,[l.toMutation(t._key,Ei.exists(!0))])}function bO(t,e){const n=bs(t.firestore,au),i=$c(t),s=NO(t.converter,e),o=Mg(t.firestore);return pS(n,[wO(o,"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ei.exists(!1))]).then(()=>i)}function OO(t,...e){var p,y,w;t=Ke(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||sw(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sw(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(y=T.error)==null?void 0:y.bind(T),e[i+2]=(w=T.complete)==null?void 0:w.bind(T)}let o,l,h;if(t instanceof mt)l=bs(t.firestore,au),h=_g(t._key.path),o={next:T=>{e[i]&&e[i](DO(l,t,T))},error:e[i+1],complete:e[i+2]};else{const T=bs(t,eo);l=bs(T.firestore,au),h=T._query;const M=new cS(l);o={next:V=>{e[i]&&e[i](new ra(l,M,T,V))},error:e[i+1],complete:e[i+2]},kO(t._query)}const d=iS(l);return cO(d,h,s,o)}function pS(t,e){const n=iS(t);return hO(n,e)}function DO(t,e,n){const i=n.docs.get(e._key),s=new cS(t);return new Os(t,s,e._key,i,new vl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){aN(Ys),ii(new Vn("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new au(new cN(i.getProvider("auth-internal")),new fN(l,i.getProvider("app-check-internal")),xN(l,s),l);return o={useFetchStreams:n,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),cn(iw,rw,e),cn(iw,rw,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebasestorage.googleapis.com",MO="storageBucket",VO=2*60*1e3,FO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends zn{constructor(e,n,i=0){super(Af(e),`Firebase Storage: ${n} (${Af(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Af(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ci;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ci||(Ci={}));function Af(t){return"storage/"+t}function zO(){const t="An unknown error occurred, please check the error payload for server response.";return new Ai(Ci.UNKNOWN,t)}function UO(){return new Ai(Ci.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BO(){return new Ai(Ci.CANCELED,"User canceled the upload/download.")}function jO(t){return new Ai(Ci.INVALID_URL,"Invalid URL '"+t+"'.")}function HO(t){return new Ai(Ci.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lw(t){return new Ai(Ci.INVALID_ARGUMENT,t)}function gS(){return new Ai(Ci.APP_DELETED,"The Firebase app was deleted.")}function WO(t){return new Ai(Ci.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(i.path==="")return i;throw HO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function p(W){W.path_=decodeURIComponent(W.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",M=new RegExp(`^https?://${w}/${y}/b/${s}/o${T}`,"i"),V={bucket:1,path:3},U=n===mS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Z="([^?#]*)",x=new RegExp(`^https?://${U}/${s}/${Z}`,"i"),D=[{regex:h,indices:d,postModify:o},{regex:M,indices:V,postModify:p},{regex:x,indices:{bucket:1,path:2},postModify:p}];for(let W=0;W<D.length;W++){const Q=D[W],X=Q.regex.exec(e);if(X){const S=X[Q.indices.bucket];let I=X[Q.indices.path];I||(I=""),i=new Yn(S,I),Q.postModify(i);break}}if(i==null)throw jO(e);return i}}class qO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t,e,n){let i=1,s=null,o=null,l=!1,h=0;function d(){return h===2}let p=!1;function y(...Z){p||(p=!0,e.apply(null,Z))}function w(Z){s=setTimeout(()=>{s=null,t(M,d())},Z)}function T(){o&&clearTimeout(o)}function M(Z,...x){if(p){T();return}if(Z){T(),y.call(null,Z,...x);return}if(d()||l){T(),y.call(null,Z,...x);return}i<64&&(i*=2);let D;h===1?(h=2,D=0):D=(i+Math.random())*1e3,w(D)}let V=!1;function U(Z){V||(V=!0,T(),!p&&(s!==null?(Z||(h=2),clearTimeout(s),w(0)):Z||(h=1)))}return w(0),o=setTimeout(()=>{l=!0,U(!0)},n),U}function GO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){return t!==void 0}function uw(t,e,n,i){if(i<e)throw lw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw lw(`Invalid value for '${t}'. Expected ${n} or less.`)}function KO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fh||(Fh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,i,s,o,l,h,d,p,y,w,T=!0,M=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Sc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const d=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===Fh.NO_ERROR,d=o.getStatus();if(!h||QO(d,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Fh.ABORT;i(!1,new Sc(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;i(!0,new Sc(p,o))})},n=(i,s)=>{const o=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());ZO(d)?o(d):o()}catch(d){l(d)}else if(h!==null){const d=zO();d.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,d)):l(d)}else if(s.canceled){const d=this.appDelete_?gS():BO();l(d)}else{const d=UO();l(d)}};this.canceled_?n(!1,new Sc(!1,null,!0)):this.backoffId_=$O(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function JO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function XO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function tD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nD(t,e,n,i,s,o,l=!0,h=!1){const d=KO(t.urlParams),p=t.url+d,y=Object.assign({},t.headers);return eD(y,e),JO(y,n),XO(y,o),tD(y,i),new YO(p,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zh(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rD(this._location.path)}get storage(){return this._service}get parent(){const e=iD(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new zh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WO(e)}}function cw(t,e){const n=e==null?void 0:e[MO];return n==null?null:Yn.makeFromBucketSpec(n,t)}function sD(t,e,n,i={}){t.host=`${e}:${n}`;const s=Ks(e);s&&(Ym(`https://${t.host}/b`),Jm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:ZE(o,t.app.options.projectId))}class oD{constructor(e,n,i,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=mS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VO,this._maxUploadRetryTime=FO,this._requests=new Set,s!=null?this._bucket=Yn.makeFromBucketSpec(s,this._host):this._bucket=cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zh(this,e)}_makeRequest(e,n,i,s,o=!0){if(this._deleted)return new qO(gS());{const l=nD(e,this._appId,i,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const hw="@firebase/storage",dw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="storage";function aD(t=od(),e){t=Ke(t);const i=is(t,_S).getImmediate({identifier:e}),s=qE("storage");return s&&lD(i,...s),i}function lD(t,e,n,i={}){sD(t,e,n,i)}function uD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new oD(n,i,s,e,Ys)}function cD(){ii(new Vn(_S,uD,"PUBLIC").setMultipleInstances(!0)),cn(hw,dw,""),cn(hw,dw,"esm2020")}cD();const yS="@firebase/installations",Hg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=1e4,wS=`w:${Hg}`,TS="FIS_v2",hD="https://firebaseinstallations.googleapis.com/v1",dD=60*60*1e3,fD="installations",pD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qs=new Qs(fD,pD,mD);function ES(t){return t instanceof zn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS({projectId:t}){return`${hD}/projects/${t}/installations`}function SS(t){return{token:t.token,requestStatus:2,expiresIn:_D(t.expiresIn),creationTime:Date.now()}}async function PS(t,e){const i=(await e.json()).error;return qs.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function CS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function gD(t,{refreshToken:e}){const n=CS(t);return n.append("Authorization",yD(e)),n}async function AS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function _D(t){return Number(t.replace("s","000"))}function yD(t){return`${TS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=IS(t),s=CS(t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:n,authVersion:TS,appId:t.appId,sdkVersion:wS},h={method:"POST",headers:s,body:JSON.stringify(l)},d=await AS(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:SS(p.authToken)}}else throw await PS("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=/^[cdef][\w-]{21}$/,Jp="";function ED(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ID(t);return TD.test(n)?n:Jp}catch{return Jp}}function ID(t){return wD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Map;function xS(t,e){const n=Cd(t);NS(n,e),SD(n,e)}function NS(t,e){const n=RS.get(t);if(n)for(const i of n)i(e)}function SD(t,e){const n=PD();n&&n.postMessage({key:t,fid:e}),CD()}let Rs=null;function PD(){return!Rs&&"BroadcastChannel"in self&&(Rs=new BroadcastChannel("[Firebase] FID Change"),Rs.onmessage=t=>{NS(t.data.key,t.data.fid)}),Rs}function CD(){RS.size===0&&Rs&&(Rs.close(),Rs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="firebase-installations-database",kD=1,$s="firebase-installations-store";let kf=null;function Wg(){return kf||(kf=eI(AD,kD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($s)}}})),kf}async function Uh(t,e){const n=Cd(t),s=(await Wg()).transaction($s,"readwrite"),o=s.objectStore($s),l=await o.get(n);return await o.put(e,n),await s.done,(!l||l.fid!==e.fid)&&xS(t,e.fid),e}async function LS(t){const e=Cd(t),i=(await Wg()).transaction($s,"readwrite");await i.objectStore($s).delete(e),await i.done}async function Ad(t,e){const n=Cd(t),s=(await Wg()).transaction($s,"readwrite"),o=s.objectStore($s),l=await o.get(n),h=e(l);return h===void 0?await o.delete(n):await o.put(h,n),await s.done,h&&(!l||l.fid!==h.fid)&&xS(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(t){let e;const n=await Ad(t.appConfig,i=>{const s=RD(i),o=xD(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Jp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RD(t){const e=t||{fid:ED(),registrationStatus:0};return bS(e)}function xD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=ND(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LD(t)}:{installationEntry:e}}async function ND(t,e){try{const n=await vD(t,e);return Uh(t.appConfig,n)}catch(n){throw ES(n)&&n.customData.serverCode===409?await LS(t.appConfig):await Uh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function LD(t){let e=await fw(t.appConfig);for(;e.registrationStatus===1;)await kS(100),e=await fw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await qg(t);return i||n}return e}function fw(t){return Ad(t,e=>{if(!e)throw qs.create("installation-not-found");return bS(e)})}function bS(t){return bD(t)?{fid:t.fid,registrationStatus:0}:t}function bD(t){return t.registrationStatus===1&&t.registrationTime+vS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD({appConfig:t,heartbeatServiceProvider:e},n){const i=DD(t,n),s=gD(t,n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:wS,appId:t.appId}},h={method:"POST",headers:s,body:JSON.stringify(l)},d=await AS(()=>fetch(i,h));if(d.ok){const p=await d.json();return SS(p)}else throw await PS("Generate Auth Token",d)}function DD(t,{fid:e}){return`${IS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(t,e=!1){let n;const i=await Ad(t.appConfig,o=>{if(!OS(o))throw qs.create("not-registered");const l=o.authToken;if(!e&&FD(l))return o;if(l.requestStatus===1)return n=MD(t,e),o;{if(!navigator.onLine)throw qs.create("app-offline");const h=UD(o);return n=VD(t,h),h}});return n?await n:i.authToken}async function MD(t,e){let n=await pw(t.appConfig);for(;n.authToken.requestStatus===1;)await kS(100),n=await pw(t.appConfig);const i=n.authToken;return i.requestStatus===0?$g(t,e):i}function pw(t){return Ad(t,e=>{if(!OS(e))throw qs.create("not-registered");const n=e.authToken;return BD(n)?{...e,authToken:{requestStatus:0}}:e})}async function VD(t,e){try{const n=await OD(t,e),i={...e,authToken:n};return await Uh(t.appConfig,i),n}catch(n){if(ES(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await LS(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Uh(t.appConfig,i)}throw n}}function OS(t){return t!==void 0&&t.registrationStatus===2}function FD(t){return t.requestStatus===2&&!zD(t)}function zD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dD}function UD(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function BD(t){return t.requestStatus===1&&t.requestTime+vS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t){const e=t,{installationEntry:n,registrationPromise:i}=await qg(e);return i?i.catch(console.error):$g(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e=!1){const n=t;return await WD(n),(await $g(n,e)).token}async function WD(t){const{registrationPromise:e}=await qg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t){if(!t||!t.options)throw Rf("App Configuration");if(!t.name)throw Rf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Rf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Rf(t){return qs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="installations",$D="installations-internal",GD=t=>{const e=t.getProvider("app").getImmediate(),n=qD(e),i=is(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},ZD=t=>{const e=t.getProvider("app").getImmediate(),n=is(e,DS).getImmediate();return{getId:()=>jD(n),getToken:s=>HD(n,s)}};function KD(){ii(new Vn(DS,GD,"PUBLIC")),ii(new Vn($D,ZD,"PRIVATE"))}KD();cn(yS,Hg);cn(yS,Hg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="analytics",QD="firebase_id",YD="origin",JD=60*1e3,XD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t=new sd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yn=new Qs("analytics","Analytics",eM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){if(!t.startsWith(Gg)){const e=yn.create("invalid-gtag-resource",{gtagURL:t});return $t.warn(e.message),""}return t}function MS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function nM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function iM(t,e){const n=nM("firebase-js-sdk-policy",{createScriptURL:tM}),i=document.createElement("script"),s=`${Gg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function rM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function sM(t,e,n,i,s,o){const l=i[s];try{if(l)await e[l];else{const d=(await MS(n)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(h){$t.error(h)}t("config",s,o)}async function oM(t,e,n,i,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const h=await MS(n);for(const d of l){const p=h.find(w=>w.measurementId===d),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,s||{})}catch(o){$t.error(o)}}function aM(t,e,n,i){async function s(o,...l){try{if(o==="event"){const[h,d]=l;await oM(t,e,n,h,d)}else if(o==="config"){const[h,d]=l;await sM(t,e,n,i,h,d)}else if(o==="consent"){const[h,d]=l;t("consent",h,d)}else if(o==="get"){const[h,d,p]=l;t("get",h,d,p)}else if(o==="set"){const[h]=l;t("set",h)}else t(o,...l)}catch(h){$t.error(h)}}return s}function lM(t,e,n,i,s){let o=function(...l){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=aM(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function uM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=30,hM=1e3;class dM{constructor(e={},n=hM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const VS=new dM;function fM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function pM(t){var l;const{appId:e,apiKey:n}=t,i={method:"GET",headers:fM(n)},s=XD.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let h="";try{const d=await o.json();(l=d.error)!=null&&l.message&&(h=d.error.message)}catch{}throw yn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:h})}return o.json()}async function mM(t,e=VS,n){const{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw yn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw yn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new yM;return setTimeout(async()=>{h.abort()},JD),FS({appId:i,apiKey:s,measurementId:o},l,h,e)}async function FS(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=VS){var h;const{appId:o,measurementId:l}=t;try{await gM(i,e)}catch(d){if(l)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw d}try{const d=await pM(t);return s.deleteThrottleMetadata(o),d}catch(d){const p=d;if(!_M(p)){if(s.deleteThrottleMetadata(o),l)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:o,measurementId:l};throw d}const y=Number((h=p==null?void 0:p.customData)==null?void 0:h.httpStatus)===503?xy(n,s.intervalMillis,cM):xy(n,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return s.setThrottleMetadata(o,w),$t.debug(`Calling attemptFetch again in ${y} millis`),FS(t,w,i,s)}}function gM(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),i(yn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _M(t){if(!(t instanceof zn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class yM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function vM(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const o=await e,l={...i,send_to:o};t("event",n,l)}}async function wM(t,e,n,i){if(i&&i.global){const s={};for(const o of Object.keys(n))s[`user_properties.${o}`]=n[o];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(){if(QE())try{await YE()}catch(t){return $t.warn(yn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $t.warn(yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function EM(t,e,n,i,s,o,l){const h=mM(t);h.then(T=>{n[T.measurementId]=T.appId,t.options.measurementId&&T.measurementId!==t.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>$t.error(T)),e.push(h);const d=TM().then(T=>{if(T)return i.getId()}),[p,y]=await Promise.all([h,d]);uM(o)||iM(o,p.measurementId),s("js",new Date);const w=(l==null?void 0:l.config)??{};return w[YD]="firebase",w.update=!0,y!=null&&(w[QD]=y),s("config",p.measurementId,w),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.app=e}_delete(){return delete sa[this.app.options.appId],Promise.resolve()}}let sa={},mw=[];const gw={};let xf="dataLayer",SM="gtag",_w,Zg,yw=!1;function PM(){const t=[];if(KE()&&t.push("This is a browser extension environment."),E1()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=yn.create("invalid-analytics-context",{errorInfo:e});$t.warn(n.message)}}function CM(t,e,n){PM();const i=t.options.appId;if(!i)throw yn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yn.create("no-api-key");if(sa[i]!=null)throw yn.create("already-exists",{id:i});if(!yw){rM(xf);const{wrappedGtag:o,gtagCore:l}=lM(sa,mw,gw,xf,SM);Zg=o,_w=l,yw=!0}return sa[i]=EM(t,mw,gw,e,_w,xf,n),new IM(t)}function AM(t=od()){t=Ke(t);const e=is(t,Bh);return e.isInitialized()?e.getImmediate():kM(t)}function kM(t,e={}){const n=is(t,Bh);if(n.isInitialized()){const s=n.getImmediate();if(rr(e,n.getOptions()))return s;throw yn.create("already-initialized")}return n.initialize({options:e})}function RM(t,e,n){t=Ke(t),wM(Zg,sa[t.app.options.appId],e,n).catch(i=>$t.error(i))}function xM(t,e,n,i){t=Ke(t),vM(Zg,sa[t.app.options.appId],e,n,i).catch(s=>$t.error(s))}const vw="@firebase/analytics",ww="0.10.19";function NM(){ii(new Vn(Bh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return CM(i,s,n)},"PUBLIC")),ii(new Vn("analytics-internal",t,"PRIVATE")),cn(vw,ww),cn(vw,ww,"esm2020");function t(e){try{const n=e.getProvider(Bh).getImmediate();return{logEvent:(i,s,o)=>xM(n,i,s,o),setUserProperties:(i,s)=>RM(n,i,s)}}catch(n){throw yn.create("interop-component-reg-failed",{reason:n})}}}NM();const LM={apiKey:"AIzaSyBKVCTgGiEwdDb4jUUlGmowv9oUex6VNwo",authDomain:"straycat-fc643.firebaseapp.com",projectId:"straycat-fc643",storageBucket:"straycat-fc643.firebasestorage.app",messagingSenderId:"425334696866",appId:"1:425334696866:web:710c1db1aff1807e8160fb",measurementId:"G-C28QQTJ2HH"},kd=tI(LM),ul=mO(kd);aD(kd);AM(kd);const xo=iN(kd),bM=new Gi,OM={ko:{appTitle:"  ",headerDescAdding:"      ",headerDescDefault:"     '  '     ",addBtn:"   ",editTitle:"   ",addTitle:"  ",labelName:"",labelDesc:"",placeholderDesc:"ex) ,   ",labelNeeds:"",labelCustomNeeds:"   ",labelFoundDate:" ",labelFirstFound:" ",labelFoundTime:" ",labelCondition:" ",labelStatusSidebar:"",labelNeutered:"",labelPhoto:" URL ()",labelPhone:"  ()",placeholderPhone:"(         )",submitUpdate:" ",submitAdd:" ",submitAdd:" ",toastSubmitted:" !",catSearchPlaceholder:"  ...",optNone:"(  )",optNeuter:" ",optTreat:"  ",optCare:"   ",optCustom:" ",optGood:"",optAvg:"",optThin:"",optVerified:"(TNR )",optNotDone:"",optUnknown:"",foundAt:" (  )",status:"Status",tnr:"TNR",helpReq:"   ",helpers:"  ",helpersList:"   :",btnHelp:"  ",careReq:"   ",careCount:" ",lastMeal:"  :",btnRecordCare:" /  ()",otherNeeds:" :",btnEdit:"  ",careTitle:"   ",careDesc:"     ?  !",labelDate:"",labelTime:"",btnComplete:" ",helpTitle:"  ",helpDesc:"   ?       .",labelContact:"",placeholderContact:"010-0000-0000",btnRegisterHelp:" ",alertThanks:"  !   .",alertCare:"  ! ",alertError:" .",alertSaveError:" .  .",historyTitle:"   ",historyEmpty:"  .",noticeNeuter:"        !"},en:{appTitle:" Stray Cat Map",headerDescAdding:" Click a location on the map to register",headerDescDefault:"Click 'Register New Cat' below, then click on the map to add a cat",addBtn:" Register New Cat",editTitle:" Edit Cat Info",addTitle:" Report a Cat",labelName:"Name",labelDesc:"Description",placeholderDesc:"ex) Mackerel tabby, right eye injured",labelNeeds:"Needs",labelCustomNeeds:"Enter specific needs",labelFoundDate:"Found Date",labelFirstFound:"First Found",labelFoundTime:"Found Time",labelCondition:"Condition",labelStatusSidebar:"Status",labelNeutered:"Neutered",labelPhoto:"Photo URL (Optional)",labelPhone:"Contact (Optional)",placeholderPhone:"(Enter if immediate joint vet visit is needed)",submitUpdate:"Update",submitAdd:"Submit",submitAdd:"Submit",toastSubmitted:"Report submitted!",catSearchPlaceholder:"Search cat by name...",optNone:"None",optNeuter:"Needs Neuter",optTreat:"Needs Treatment",optCare:"Needs Regular Caretaker",optCustom:"Custom Input",optGood:"Good",optAvg:"Average",optThin:"Thin",optVerified:"Verified (TNR Done)",optNotDone:"Not Done",optUnknown:"Unknown",foundAt:" Found:",status:"Status",tnr:"TNR",helpReq:" Help Needed",helpers:"helping",helpersList:" Helpers:",btnHelp:" Offer Help",careReq:" Caretakers Wanted",careCount:"cares",lastMeal:" Last Meal:",btnRecordCare:" Fed/Watered (Record)",otherNeeds:"Other Needs:",btnEdit:" Edit Info",careTitle:" Record Care",careDesc:"Did you feed or water the cat today? Please record the time!",labelDate:"Date",labelTime:"Time",btnComplete:"Complete",helpTitle:" Offer Help",helpDesc:"Can you help? Leave your contact to coordinate with others.",labelContact:"Contact",placeholderContact:"Phone Number",btnRegisterHelp:"Register Help",alertThanks:"Thank you for helping!  Contact registered.",alertCare:"Care record added! ",alertError:"An error occurred.",alertSaveError:"Failed to save. Check console.",historyTitle:" Care History",historyEmpty:"No records yet.",noticeNeuter:" Contact your local district office for neutering support!"}},DM=new ZA.DivIcon({className:"custom-cat-icon",html:'<div style="background: white; border: 2px solid #FFD700; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div>',iconSize:[30,30],iconAnchor:[15,15]});function MM({catsCount:t,onLoginClick:e}){new Date().toISOString().split("T")[0];const n=t>0?Math.floor(t*.1)+1:0;return O.jsxs("div",{className:"intro-section",children:[O.jsx("div",{className:"intro-badge",children:"    "}),O.jsx("div",{className:"intro-illustration",children:O.jsx("div",{className:"cat-emoji-large",children:""})}),O.jsx("h2",{children:"   "}),O.jsxs("div",{className:"intro-stats",children:[O.jsxs("div",{className:"stat-card",children:[O.jsx("span",{className:"stat-value",children:t}),O.jsx("span",{className:"stat-label",children:" "})]}),O.jsxs("div",{className:"stat-card",children:[O.jsxs("span",{className:"stat-value",children:["+",n]}),O.jsx("span",{className:"stat-label",children:"  "})]})]}),O.jsxs("p",{className:"intro-desc",children:["   , TNR   ",O.jsx("br",{}),"     ."]}),O.jsx("button",{className:"intro-login-btn",onClick:e,children:" "})]})}function VM({isOpen:t,onClose:e,onGoogleLogin:n,onEmailAuth:i}){const[s,o]=le.useState(!0),[l,h]=le.useState(""),[d,p]=le.useState("");if(!t)return null;const y=w=>{w.preventDefault(),i(s,l,d)};return O.jsx("div",{className:"modal-overlay",onClick:e,children:O.jsxs("div",{className:"modal-content auth-modal",onClick:w=>w.stopPropagation(),children:[O.jsx("button",{className:"modal-close-btn",onClick:e,children:""}),O.jsx("h2",{children:s?"":""}),O.jsxs("button",{className:"google-auth-btn",onClick:n,children:[O.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",alt:"G"}),"Google "]}),O.jsx("div",{className:"auth-divider",children:O.jsxs("span",{children:["  ",s?"":""]})}),O.jsxs("form",{onSubmit:y,className:"auth-form",children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:""}),O.jsx("input",{type:"email",value:l,onChange:w=>h(w.target.value),required:!0,placeholder:"example@mail.com"})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:""}),O.jsx("input",{type:"password",value:d,onChange:w=>p(w.target.value),required:!0,placeholder:"6 "})]}),O.jsx("button",{type:"submit",className:"submit-btn",children:s?"":""})]}),O.jsxs("div",{className:"auth-toggle",children:[s?" ?":"  ?",O.jsx("button",{onClick:()=>o(!s),children:s?"":""})]})]})})}function FM({selectedCat:t,markersRef:e,searchResult:n}){const i=UE();return le.useEffect(()=>{if(t&&e.current[t.id]){i.flyTo([t.lat,t.lng],16,{duration:1.5});const s=e.current[t.id];s&&window.innerWidth>=768&&setTimeout(()=>s.openPopup(),1500)}},[t,i,e]),le.useEffect(()=>{n&&i.flyTo([n.lat,n.lng],15,{duration:1.5})},[n,i]),null}function zM({onMapClick:t,isAdding:e,setIsAdding:n}){return e1({click(i){e&&t(i.latlng)},keydown(i){i.originalEvent.key==="Escape"&&n(!1)}}),null}function UM(){const[t,e]=le.useState([]),[n,i]=le.useState(!1),[s,o]=le.useState(!1),[l,h]=le.useState(!1),[d,p]=le.useState(null),[y,w]=le.useState(null),[T,M]=le.useState("ko"),[V,U]=le.useState(null),[Z,x]=le.useState(!1);le.useEffect(()=>{const F=$R(xo,Te=>{U(Te)});return()=>F()},[]);const C=async()=>{try{await dx(xo,bM),x(!1)}catch(F){console.error("Login failed:",F);let Te="   .";F.code==="auth/unauthorized-domain"&&(Te="  . Firebase   ."),alert(Te)}},D=async(F,Te,it)=>{try{if(F)await jR(xo,Te,it),x(!1);else{const vt=await BR(xo,Te,it);await HR(vt.user),alert("  .     ."),await Ky(xo),x(!1)}}catch(vt){console.error("Auth failed:",vt);let Qt=" .";const En=vt.code;En==="auth/email-already-in-use"?Qt="   .":En==="auth/weak-password"?Qt="   (6 ).":En==="auth/invalid-email"?Qt="   .":(En==="auth/user-not-found"||En==="auth/wrong-password")&&(Qt="   ."),alert(Qt)}},W=async()=>{try{await Ky(xo),I(null)}catch(F){console.error("Logout failed:",F)}},[Q,X]=le.useState(!1),[S,I]=le.useState(null),[A,b]=le.useState(window.innerWidth<768),N=le.useRef({}),P=OM[T],k=()=>{M(F=>F==="ko"?"en":"ko")},[Re,Kt]=le.useState(""),[Qe,hn]=le.useState(""),[q,ce]=le.useState(null),J=async()=>{if(Qe.trim())try{const Te=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(Qe)}`)).json();if(Te&&Te.length>0){const{lat:it,lon:vt}=Te[0];ce({lat:parseFloat(it),lng:parseFloat(vt),timestamp:Date.now()})}else alert(P.searchNoResult||"   .")}catch(F){console.error("Search failed:",F),alert("   .")}};le.useEffect(()=>{const F=()=>b(window.innerWidth<768);return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const[te,he]=le.useState({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),[Ge,Se]=le.useState(!1),[we,de]=le.useState(null),[He,Nt]=le.useState({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].slice(0,5)}),[as,ki]=le.useState(!1),[Ri,Un]=le.useState({phone:""});le.useEffect(()=>{const F=RO(Jv(ul,"cats"),xO("id","desc")),Te=OO(F,it=>{const vt=[];it.forEach(Qt=>{vt.push({...Qt.data(),firestoreId:Qt.id})}),e(vt)});return()=>Te()},[]);const xi=()=>{if(!V){x(!0);return}if(!V.emailVerified&&V.providerData[0].providerId==="password"){alert("  .  .");return}i(!0),w(null),he({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""})},to=F=>{p(F),w(null),he({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),o(!0),i(!1)},no=F=>{w(F.id),he({name:F.name,desc:F.desc,condition:F.condition,neutered:F.neutered,photo:F.photo,foundDate:F.foundDate||new Date().toISOString().split("T")[0],foundTime:F.foundTime||"12:00",needs:F.needs||"",customNeeds:F.customNeeds||"",helpers:F.helpers||0,caretakers:F.caretakers||0,phone:F.phone||""}),p({lat:F.lat,lng:F.lng}),o(!0)},dr=F=>{I(F)},Ni=F=>{de(F),Un({phone:""}),ki(!0)},Li=async F=>{if(F.preventDefault(),!!we)try{const Te=$c(ul,"cats",we.firestoreId);await Cf(Te,{helpers:(we.helpers||0)+1,helpersList:nw({phone:Ri.phone,createdAt:new Date})}),ki(!1),alert(P.alertThanks)}catch(Te){console.error("Error updating helpers:",Te),alert(P.alertError)}},at=F=>{de(F),Nt({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0].slice(0,5)}),Se(!0)},lt=async F=>{if(F.preventDefault(),!!we)try{const Te=$c(ul,"cats",we.firestoreId);await Cf(Te,{caretakers:(we.caretakers||0)+1,careHistory:nw({date:He.date,time:He.time,createdAt:new Date})}),Se(!1),alert(P.alertCare)}catch(Te){console.error("Error updating care history:",Te),alert(P.alertError)}},si=async F=>{F.preventDefault();try{if(y){const Te=$c(ul,"cats",t.find(it=>it.id===y).firestoreId);await Cf(Te,te)}else{if(!V.emailVerified&&V.providerData[0].providerId==="password"){alert("    .");return}await bO(Jv(ul,"cats"),{...te,id:Date.now(),lat:d.lat,lng:d.lng,createdAt:new Date,userId:V.uid,userEmail:V.email})}o(!1),h(!0),he({name:"",desc:"",condition:"",neutered:"(TNR )",photo:"",foundDate:new Date().toISOString().split("T")[0],foundTime:"12:00",needs:"",customNeeds:"",helpers:0,caretakers:0,phone:""}),w(null),setTimeout(()=>h(!1),3e3)}catch(Te){console.error("Error saving document: ",Te),alert(P.alertSaveError)}},ls=F=>{const Te=!V;return O.jsxs("div",{className:`cat-details-content ${Te?"blur-container":""}`,children:[F.photo&&O.jsx("img",{src:F.photo,alt:F.name,className:`cat-detail-img ${Te?"blur-content":""}`}),O.jsx("h3",{children:Te?"   ":F.name}),O.jsxs("div",{className:Te?"blur-content":"",children:[O.jsxs("p",{className:"cat-detail-meta",children:[P.foundAt," ",F.foundDate," ",F.foundTime]}),O.jsx("p",{className:"cat-detail-desc",children:F.desc}),O.jsxs("div",{className:"cat-badges",children:[O.jsxs("span",{className:"badge",children:[P.status,": ",F.condition]}),O.jsxs("span",{className:"badge",children:[P.tnr,": ",F.neutered]})]})]}),O.jsx("div",{className:`cat-needs-section ${Te?"blur-content":""}`,children:F.needs&&F.needs!==""&&O.jsx("div",{className:"needs-box",children:F.needs===" "||F.needs==="  "?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"needs-urgent",children:P.helpReq}),O.jsxs("div",{className:"needs-text",children:[F.needs," (",F.helpers||0,P.helpers,")"]}),F.helpersList&&F.helpersList.length>0&&O.jsxs("div",{className:"helpers-list",children:[O.jsx("strong",{children:P.helpersList}),O.jsx("ul",{children:F.helpersList.map((it,vt)=>O.jsx("li",{children:it.phone},vt))})]}),O.jsx("button",{onClick:()=>Ni(F),className:"action-btn help-btn",disabled:!V,children:P.btnHelp})]}):F.needs==="   "?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"care-req-title",children:P.careReq}),O.jsxs("div",{className:"needs-text",children:[F.needs," (",F.caretakers||0,P.careCount,")"]}),F.careHistory&&F.careHistory.length>0&&O.jsxs("div",{className:"care-history",onClick:()=>V&&X(!0),style:{cursor:V?"pointer":"default",textDecoration:V?"underline":"none"},children:[P.lastMeal," ",F.careHistory[F.careHistory.length-1].date," ",F.careHistory[F.careHistory.length-1].time]}),O.jsx("button",{onClick:()=>at(F),className:"action-btn care-btn",disabled:!V,children:P.btnRecordCare})]}):F.needs===" "?O.jsxs(O.Fragment,{children:[O.jsx("strong",{children:P.otherNeeds})," ",F.customNeeds]}):O.jsx("span",{children:F.needs})})}),F.phone&&O.jsxs("div",{className:`contact-box ${Te?"blur-content":""}`,children:[" ",F.phone]}),V&&O.jsx("button",{onClick:()=>no(F),className:"edit-btn",children:P.btnEdit}),!V&&O.jsx("div",{className:"login-overlay-message",style:{textAlign:"center",marginTop:"10px",color:"#666",fontSize:"0.9rem"},children:O.jsx("p",{children:"    ."})})]})};return O.jsxs("div",{className:"app-container",children:[O.jsx("button",{className:"lang-toggle",onClick:k,children:T==="ko"?"English":""}),O.jsxs("aside",{className:"sidebar",children:[O.jsxs("div",{className:"sidebar-header",children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[O.jsx("h1",{style:{margin:0},children:P.appTitle}),V?O.jsxs("div",{className:"user-profile",children:[V.photoURL?O.jsx("img",{src:V.photoURL,alt:"Profile",className:"user-avatar"}):O.jsx("div",{className:"user-avatar-placeholder",children:""}),O.jsx("button",{className:"login-btn",onClick:W,style:{padding:"4px 10px",fontSize:"0.75rem"},children:""})]}):O.jsx("button",{className:"login-btn",onClick:()=>x(!0),children:""})]}),O.jsx("p",{children:P.headerDescDefault}),V&&O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{marginTop:"10px"},children:O.jsx("button",{className:"filter-my-btn",onClick:()=>Kt(F=>F==="MY_CATS"?"":"MY_CATS"),children:Re==="MY_CATS"?" ":"  "})}),O.jsx("div",{className:"sidebar-search",children:O.jsx("input",{type:"text",placeholder:P.catSearchPlaceholder,value:Re,onChange:F=>Kt(F.target.value)})})]})]}),O.jsxs("div",{className:"cat-list",children:[V?t.filter(F=>Re==="MY_CATS"?V&&F.userId===V.uid:F.name.toLowerCase().includes(Re.toLowerCase())).map(F=>O.jsxs("div",{className:"cat-card",onClick:()=>I(F),children:[O.jsxs("div",{className:"cat-info-row",children:[O.jsxs("span",{className:"cat-label",children:[P.labelName,":"]}),O.jsx("span",{className:"cat-value",children:O.jsx("strong",{children:F.name})})]}),O.jsxs("div",{className:"cat-info-row",children:[O.jsxs("span",{className:"cat-label",children:[P.labelFirstFound,":"]}),O.jsx("span",{className:"cat-value",children:F.foundDate})]}),O.jsxs("div",{className:"cat-info-row",children:[O.jsxs("span",{className:"cat-label",children:[P.labelDesc,":"]}),O.jsx("span",{className:"cat-value desc-text",children:F.desc})]}),O.jsxs("div",{className:"cat-info-row",children:[O.jsxs("span",{className:"cat-label",children:[P.labelStatusSidebar,":"]}),O.jsxs("span",{className:"cat-value",children:[O.jsx("span",{className:`status-dot ${F.condition===""?"good":"bad"}`}),F.condition]})]}),F.needs&&F.needs!==""&&F.needs!=="None"&&O.jsxs("div",{className:"cat-info-row needs-row",children:[O.jsxs("span",{className:"cat-label",children:[P.labelNeeds,":"]}),O.jsx("span",{className:"cat-value needs-text",children:F.needs===" "||F.needs==="Custom Input"?F.customNeeds:F.needs})]})]},F.id)):O.jsx(MM,{catsCount:t.length,onLoginClick:()=>x(!0)}),V&&t.filter(F=>Re==="MY_CATS"?V&&F.userId===V.uid:F.name.toLowerCase().includes(Re.toLowerCase())).length===0&&O.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#999"},children:T==="en"?"No cats found.":"  ."})]})]}),O.jsxs("div",{className:"map-wrapper",children:[O.jsxs(n1,{center:[37.5708,126.9801],zoom:17,minZoom:7,maxBounds:[[33,124],[43,132]],id:"map-container",className:n?"cursor-crosshair":"",zoomControl:!1,children:[O.jsx(Cy,{url:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",attribution:" OpenStreetMap",className:"map-base-layer",zIndex:1}),O.jsx(Cy,{url:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",className:"map-label-layer",zIndex:100}),O.jsx(zM,{onMapClick:to,isAdding:n,setIsAdding:i}),O.jsx(FM,{selectedCat:S,markersRef:N,searchResult:q}),t.map(F=>O.jsx(i1,{position:[F.lat,F.lng],icon:DM,ref:Te=>N.current[F.id]=Te,eventHandlers:{click:()=>dr(F)},children:!A&&O.jsx(r1,{children:O.jsx("div",{className:"cat-popup",children:ls(F)})})},F.id))]}),O.jsxs("div",{className:"search-container",children:[O.jsx("input",{type:"text",className:"search-input",placeholder:P.searchPlaceholder||"Search location...",value:Qe,onChange:F=>hn(F.target.value),onKeyPress:F=>F.key==="Enter"&&J()}),O.jsx("button",{className:"search-btn",onClick:J,children:""})]}),O.jsxs("div",{className:"fab-container",children:[O.jsx("button",{className:"add-fab",onClick:xi,children:O.jsx("span",{children:"+"})}),n&&O.jsx("div",{className:"fab-tooltip",children:P.headerDescAdding})]}),A&&S&&O.jsx("div",{className:"bottom-sheet-overlay",onClick:()=>I(null),children:O.jsxs("div",{className:"bottom-sheet",onClick:F=>F.stopPropagation(),children:[O.jsx("div",{className:"sheet-handle"}),O.jsx("div",{className:"sheet-content",children:ls(S)})]})})]}),s&&O.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:O.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),children:[O.jsx("button",{className:"modal-close-btn",onClick:()=>o(!1),children:""}),O.jsx("h2",{children:y?P.editTitle:P.addTitle}),O.jsxs("form",{onSubmit:si,children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelName}),O.jsx("input",{type:"text",required:!0,value:te.name,onChange:F=>he({...te,name:F.target.value})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelDesc}),O.jsx("textarea",{required:!0,placeholder:P.placeholderDesc,value:te.desc,onChange:F=>he({...te,desc:F.target.value})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelNeeds}),O.jsxs("select",{value:te.needs,onChange:F=>he({...te,needs:F.target.value}),children:[O.jsx("option",{value:"",children:P.optNone}),O.jsx("option",{value:" ",children:P.optNeuter}),O.jsx("option",{value:"  ",children:P.optTreat}),O.jsx("option",{value:"   ",children:P.optCare}),O.jsx("option",{value:" ",children:P.optCustom})]}),te.needs===" "&&O.jsx("p",{style:{marginTop:"5px",fontSize:"0.8rem",color:"#e17055"},children:P.noticeNeuter}),te.needs===" "&&O.jsx("input",{type:"text",style:{marginTop:"5px"},placeholder:P.labelCustomNeeds,required:!0,value:te.customNeeds,onChange:F=>he({...te,customNeeds:F.target.value})})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelFoundDate}),O.jsx("input",{type:"date",required:!0,value:te.foundDate,onChange:F=>he({...te,foundDate:F.target.value})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelFoundTime}),O.jsx("select",{required:!0,value:te.foundTime,onChange:F=>he({...te,foundTime:F.target.value}),children:Array.from({length:24}).map((F,Te)=>{const it=Te.toString().padStart(2,"0");return O.jsx("option",{value:`${it}:00`,children:`${it}:00`},Te)})})]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelCondition}),O.jsxs("select",{required:!0,value:te.condition,onChange:F=>he({...te,condition:F.target.value}),children:[O.jsx("option",{value:"",children:P.optGood}),O.jsx("option",{value:"",children:P.optAvg}),O.jsx("option",{value:"",children:P.optThin})]})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelNeutered}),O.jsxs("select",{required:!0,value:te.neutered,onChange:F=>he({...te,neutered:F.target.value}),children:[O.jsx("option",{value:"(TNR )",children:P.optVerified}),O.jsx("option",{value:"",children:P.optNotDone}),O.jsx("option",{value:"",children:P.optUnknown})]})]})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelPhoto}),O.jsx("input",{type:"url",value:te.photo,onChange:F=>he({...te,photo:F.target.value})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelPhone}),O.jsx("input",{type:"tel",placeholder:P.placeholderPhone,value:te.phone,onChange:F=>he({...te,phone:F.target.value})})]}),O.jsx("button",{type:"submit",className:"submit-btn",children:y?P.submitUpdate:P.submitAdd})]})]})}),Ge&&O.jsx("div",{className:"modal-overlay",onClick:()=>Se(!1),children:O.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),style:{maxWidth:"300px"},children:[O.jsx("h3",{children:P.careTitle}),O.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"15px"},children:P.careDesc}),O.jsxs("form",{onSubmit:lt,children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelDate}),O.jsx("input",{type:"date",required:!0,value:He.date,onChange:F=>Nt({...He,date:F.target.value})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelTime}),O.jsx("input",{type:"time",required:!0,value:He.time,onChange:F=>Nt({...He,time:F.target.value})})]}),O.jsx("button",{type:"submit",className:"submit-btn",style:{background:"#55efc4",color:"#2d3436"},children:P.btnComplete})]})]})}),as&&O.jsx("div",{className:"modal-overlay",onClick:()=>ki(!1),children:O.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),style:{maxWidth:"300px"},children:[O.jsx("h3",{children:P.helpTitle}),O.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"15px"},children:P.helpDesc}),O.jsxs("form",{onSubmit:Li,children:[O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:P.labelContact}),O.jsx("input",{type:"tel",required:!0,placeholder:P.placeholderContact,value:Ri.phone,onChange:F=>Un({...Ri,phone:F.target.value})})]}),O.jsx("button",{type:"submit",className:"submit-btn",style:{background:"#ff7675",color:"white"},children:P.btnRegisterHelp})]})]})}),Q&&S&&O.jsx("div",{className:"modal-overlay",onClick:()=>X(!1),children:O.jsxs("div",{className:"modal-content",onClick:F=>F.stopPropagation(),style:{maxWidth:"350px",maxHeight:"60vh",overflowY:"auto"},children:[O.jsx("button",{className:"modal-close-btn",onClick:()=>X(!1),children:""}),O.jsx("h3",{children:P.historyTitle}),S.careHistory&&S.careHistory.length>0?O.jsx("ul",{className:"history-list",children:[...S.careHistory].reverse().map((F,Te)=>O.jsxs("li",{className:"history-item",children:[" ",F.date," ",F.time]},Te))}):O.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:P.historyEmpty})]})}),l&&O.jsxs("div",{className:"toast",children:[O.jsx("span",{className:"v-mark",children:"V"}),O.jsx("span",{children:P.toastSubmitted})]}),O.jsx(VM,{isOpen:Z,onClose:()=>x(!1),onGoogleLogin:C,onEmailAuth:D})]})}Nf.createRoot(document.getElementById("root")).render(O.jsx(Zc.StrictMode,{children:O.jsx(UM,{})}));
